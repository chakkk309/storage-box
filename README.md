

# 1.项目背景

* 为了满足个人用户对临时寄放物品等仓储业务的需求，储留箱有限公司推出了以上海市为服务范围的个人物品箱式寄存、上门送箱、上门收箱、物品周转服务。储留箱个人仓储业务系统也是基于该业务开发、实施的软件项目。


# 2. 术语


| 序号 |    词汇名称    | 词汇含义                                                   |
| :--: | :------------: | :--------------------------------------------------------- |
|  1   |     仓储箱     | 箱子，指储留箱所提供、用于手机端存放物品的仓储业务专用箱。 |
|  2   |      规格      | 长* 乘 *高，指的是箱子的长宽高                             |
|  3   |      空箱      | 指未存放手机端用户物品的仓储箱。                           |
|  4   |      重箱      | 指已存放手机端用户物品的仓储箱。                           |
|  5   |   手机端用户   | App端使用的用户，在系统里，实际为**客户**                  |
|  6   |   后台端用户   | 后台端使用的用户，在系统里，实际为**用户**                 |
|  7   | 手机端订单状态 | 手机端对于订单状态的解读                                   |
|  8   | 后台端订单状态 | 后台端对于订单状态的解读                                   |
|  9   |    箱子状态    | 0：未使用 1：已使用                                        |
|  10  |    租赁时长    | 等效于预约周期，单位为月                                   |
|  11  |     用户名     | 后台端用户的账号                                           |
|  12  |     客户名     | 手机端用户的账号                                           |



# 3. 功能设计

## 3.1 手机端

## 3.1.1 注册

#### 3.1.1.1 需求说明

* 手机端用户，在手机端登录页面，点击【注册】，跳转至手机端注册页面
* 注册成功之后，跳转至登录页面

#### 3.1.1.2 页面元素

##### 3.1.1.2.1 注册

* 输入框
  * 用户名
  * 密码
  * 确认密码
  * 手机号
  * 姓名
  * 邮箱
* 单选
  * 性别
    * 男
    * 女
* 按钮
  * 注册

#### 3.1.1.3 详细设计

##### 3.1.1.3.1 注册

* 操作表
  * 客户表（手机端角色）
  * 积分记录表
* 校验
  * 用户名、手机号、邮箱不能重复
  * 两次输入的密码是否一致
  * 强密码（加分项）
  * 用户名：最大长度16，只能包含英文和数字
  * 密码：最大长度16，只能包含英文和数字
  * 手机号：最大长度11
  * 姓名：最大长度10
  * 性别：最大长度1
  * 邮箱：符合邮箱规则
* 注意事项
  * 事务：注册新用户设置个人积分值【客户表（手机端角色）】，同时新增积分获得记录【积分记录表】
* 图

```flow
start=>start: 开始
regist=>end: 结束
input=>inputoutput: 输入用户名、密码、确认密码、
手机号、姓名、性别、身份证
cond1=>condition: 两次输入密码
是否一致
op1=>operation: 提示：两次输入密码不一致
sub1=>subroutine: 查询客户表
cond2=>condition: 用户名、手机号、
邮箱是否不重复
op2=>operation: 提示：用户名、手机号、邮箱重复
op3=>operation: 事务：注册新用户设置个人积分值，新增积分获得记录
插入【客户表】
插入【积分记录表】
cond3=>condition: 是否成功
op4=>operation: 注册成功并跳转登录页
op5=>operation: 提示：注册失败,
请联系管理员

start->input->cond1
cond1(yes)->sub1
cond1(no,right)->op1(right)->input
sub1->cond2
cond2(no)->op2(right)->input
cond2(yes,left)->op3(left)
op3->cond3
cond3(no)->op5(right)->input
cond3(yes)->op4
op4->regist
```

## 3.1.2 登录

#### 3.1.2.1 需求说明

* 手机端用户，打开APP，直接进入登录页面，点击【登录】，成功后跳转至手机端首页
* 手机端用户，在手机端登录页面，点击【忘记密码？】，提示：请联系管理员+手机号
* 手机端用户，在手机端登录页面，点击【注册】，跳转至手机端注册

#### 3.1.2.2 页面元素

##### 3.1.2.2.1 登录

* 输入框
  * 用户名
  * 密码
* 按钮
  * 登录
  * 忘记密码？
  * 注册

#### 3.1.2.3  详细设计

##### 3.1.2.3.1 登录

* 操作表
  * 客户表（手机端角色）
* 校验（前端做校验）
  * 用户名：最大长度16，只能包含英文和数字
  * 密码：最大长度16，只能包含英文和数字
* 注意事项
  * 通过用户名可以登录（其他不可）

* 提示语：用户不存在/密码错误


## 3.1.3 首页

#### 3.1.3.1 需求说明

* 手机端用户，在手机端登录成功后，跳转手机端首页
* 【广告】轮播
* 点击【广告】，跳转至广告详情页面
* 点击【空箱预约】，跳转至空箱预约页面
* 点击【我的订单】，跳转至订单列表页面
* 点击【个人中心】，跳转至个人中心页面

#### 3.1.3.2 页面元素

##### 3.1.3.2.1 首页

* 轮播图
  * 广告编号
  * 广告标题
  * 广告内容
  * 可获积分
  * 轮播图地址
  * 广告排序
  * 广告状态
    * 0：启用
    * 1：未启用
* 按钮
  * 空箱预约
  * 我的订单
  * 个人中心
  * 图片

##### 3.1.3.2.2 详情页面

* 显示项
  * 广告标题
  * 广告内容
  * 轮播图地址

#### 3.1.3.3 详细设计

##### 3.1.3.3.1 广告列表

* 操作表
  * 广告表
* 校验
  * 无
* 注意事项
  * 只获取广告状态为启用的数据
  * 轮播图按照广告排序字段，升序排列

##### 3.1.1.3.2 广告详情

* 操作表
  * 积分记录表
  * 客户表（手机端角色）
* 校验
  * 无
* 注意事项
  * 详情数据来自于列表，直接带过来
  * 点击图片，有广告积分获取的操作，事务：插入【积分记录表】，同时修改【客户表（手机端角色）】，如果抛异常，则在广告详情页面提示具体异常信息：积分获取失败，请联系管理员
  * 点击一次广告，就给一次积分

## 3.1.4 空箱预约

#### 3.1.4.1 需求说明

* 手机端用户，在手机端首页，点击【空箱预约】，进入空箱预约页面

* 查询当前用户默认收货地址，显示在收货信息处

* 点击收货信息处的按钮【>】，跳转至地址选择列表 （地址管理功能的地址列表信息），点击地址列表，回显至空箱预约页面的收货信息

* 查询箱子信息（规格、积分、库存等）

* 点击【提交】，跳转至预约确认页面，点击【提交订单】，跳转至订单列表页面


#### 3.1.4.2 页面元素

##### 3.1.4.2.1 空箱预约

* 按钮
  * 提交
    * 点击跳转至预约确认页面
  * 收货信息部分的地址选择按钮“>"
    * 跳转至地址选择列表（地址管理功能的地址列表页面）
    * 点击地址列表，回显至空箱预约页面的收货信息
      * 姓名
      * 电话
      * 地址
      * 上门时间
      * 上门时段
      * 默认标识
  * 上门时间选择按钮“>"
  * 上门时段选择按钮“>"
* 单选
  * 箱子信息
    * 规格
    * 每月积分单价
* 加减控件
  * 租赁时长

##### 3.1.4.2.2 预约确认

* 显示项

  * 收货信息

    * 姓名
    * 电话
    * 地址
    * 上门时间
      * 上门时间
      * 上门时段
  * 箱子信息

    * 规格
    * 每月积分单价
    * 租赁时长
    * 总计积分
  * 实付积分
* 按钮
  * 提交订单

#### 3.1.4.3 详细设计

##### 3.1.4.3.1 空箱预约

* 操作表
  * 客户地址表
  * 箱子规格表
  * 箱子信息表

* 校验
  * 前端校验租赁时长大于等于1个月
* 注意事项
  * 获取当前登录人默认收货地址
  * 收货地址列表功能参考地址管理
  * 箱子信息，获取【箱子规格表】中有效的箱子，且有库存（通过【箱子规格表】及【箱子信息表】计算得出）

##### 3.1.4.3.2 预约确认

* 操作表

  * 订单表
  * 箱子信息表
  * 积分记录表
  * 客户表（手机端角色）

* 校验

  * 当前客户积分，大于等于总计积分

* 注意事项

  * 新增订单时，冗余存储

    * 空箱上门姓名
    * 空箱上门电话
    * 空箱上门地址
    * 空箱上门上门时间
    * 空箱上门上门时段
    * 箱子编号
    * 箱子规格
    * 所需积分（每月积分单价）

  * 订单编号自动生成，调用工具类

  * 地址无省市区，只有一个详细地址

  * 订单名称：本次订单内，箱子中存放的物品等等，方便后续根据此次名称取回需要的箱子

  * 存储租赁时长的同时，要存储到期时间（加分项：定时日任务，到期自动送回机制，注意匹配相应手机端订单及后台订单状态）

  * 自动分配箱子，并标记箱子状态（已使用，已使用人）

    * 代码逻辑中，自动分配箱子，当前库存为0时，直接手动抛出异常，回滚；如果当前的时间点，拿到当前箱子的version，`update set version= version+1 where version=当前时间点的version`（如果此时，另一个线程同时拿到了同一个箱子，那么，现在有A、B两个人同时提交了订单，同时拿到了箱子Box，此时Box的version=1，A先执行完成，`update set version= version+1`，导致Box的version=2，此时，B再执行`update set version= version+1 where version=1`，导致更新了0条，手动抛出指定异常，事务回滚。在异常捕获里，对指定异常做一个补偿机制：重新自动分配箱子。而其他异常，事务回滚后，不进行补偿机制）

    ```sequence
    title: 箱子分配机制序列图
    participant 用户A as A
    participant Box as C
    participant 用户B as B
    note over C:version=1
    C->A:用户A先拿到箱子  
    note over A:执行\nupdate set version= version+1\nwhere version=1\n成功
    A->C:Box的状态被改变
    note over C: version=2
    C->B:用户B后拿到箱子
    note over B:执行\nupdate set version= version+1 where version=1\n失败
    B->C:事务回滚
    C->B: 重新为用户B分配箱子
    note over B:执行\nupdate set version= version+1 where version=2\n成功
    ```

  * 完整事务：

    * 新增订单

    * 自动分配箱子
      * 订单
      * 箱子id——实时数据
      * 箱子规格、箱子编号、所需积分-（每月积分单价）——冗余存储
      * 箱子：已使用，及使用人
    * 新增积分使用记录
    * 设置客户当前积分

* 异常信息

  * 提示：箱子库存不足，请重新选择
  * 提示：提交订单失败，请联系管理员

## 3.1.5 我的订单

### 3.1.5.1 需求说明

* 手机端用户，在手机端首页，点击【我的订单】，进入订单列表页面

* 查询当前用户的订单列表（分页）

* 点击订单列表的订单，进入订单详情页面

* 订单详情页面根据具体状态，可以执行相关操作


| 订单状态编码 | 手机端对应状态 | 手机端按钮 | 后台端对应状态 | 后台端按钮 |
| :----------: | :------------: | :--------: | :------------: | :--------: |
|      1       |   已下上门单   |     -      |    待发空箱    |  发送空箱  |
|      2       |    代收空箱    |  收取空箱  |    已发空箱    |     -      |
|      3       |    已收空箱    |  发送重箱  |    送达空箱    |     -      |
|      4       |    已发重箱    |     -      |    代收重箱    |  收取重箱  |
|      5       |     已储存     |  预约提取  |     已存储     |     -      |
|      6       |   已下提取单   |     -      |    待发重箱    |  发送重箱  |
|      7       |    代收重箱    |  收取重箱  |    已发重箱    |     -      |
|      8       |    已收重箱    |  发送空箱  |    送达重箱    |     -      |
|      9       |    已发空箱    |     -      |    代收空箱    |  收取空箱  |
|      10      |     已完成     |  删除订单  |     已完成     |     -      |


### 3.1.5.2 页面元素

##### 3.1.5.2.1 订单列表

* 显示项

  * 订单详情列表

    * 点击跳转订单详情页面
    * 订单编号（自动生成，调用工具类）
    * 订单状态（前后端约定一致，写死）
    * 订单名称
    * 箱子id
    * 箱子规格（冗余数据）
    * 箱子编号（冗余数据）
    * 箱子积分单价（每月积分单价）（冗余数据）
    * 租赁时长
    * 实付积分
    * 空箱上门下单时间（订单状态为1-5，显示）
    * 重箱提取下单时间（订单状态为6-10，显示）

* 按钮
  * 订单信息
  * 查询
  * 重置
  * 删除

##### 3.1.5.2.2 订单详情

* 显示项
  * 订单编号
  * 订单名称
  * 空箱上门下单时间（订单状态为1-5，显示）
  * 重箱提取下单时间（订单状态为6-10，显示）
  * 空箱上门姓名（订单状态为1-5，显示）
  * 空箱上门电话（订单状态为1-5，显示）
  * 空箱上门地址（订单状态为1-5，显示）
  * 空箱上门上门时间（订单状态为1-5，显示）
  * 空箱上门上门时段（订单状态为1-5，显示）
  * 重箱提取姓名（订单状态为6-10，显示）
  * 重箱提取电话（订单状态为6-10，显示）
  * 重箱提取地址（订单状态为6-10，显示）
  * 重箱提取时间（订单状态为6-10，显示）
  * 重箱提取时段（订单状态为6-10，显示）
  * 箱子id
  * 箱子编号（冗余数据）
  * 箱子规格（冗余数据）
  * 箱子积分单价（每月积分单价）（冗余数据）
  * 租赁时长
  * 实付积分
  * 订单状态
    * 1：已下上门单
    * 2：待收空箱
    * 3：已收空箱
    * 4：已发重箱
    * 5：已存储
    * 6：已下提取单
    * 7：待收重箱
    * 8：已收重箱
    * 9：已发空箱
    * 10：已完成
  * 配送人信息（删除）
* 按钮
  * 收取空箱（对应状态2显示）
  * 发送重箱（对应状态3显示）
  * 预约提取（对应状态5显示）
  * 收取重箱（对应状态7显示）
  * 发送空箱（对应状态8显示）
  * 删除订单（对应状态10显示）

### 3.1.5.3 详细设计

##### 3.1.5.3.1 订单列表

* 操作表
  * 订单表
* 校验
  * 无
* 注意事项
  * 需要根据当前订单状态显示需要显示的下单时间
    * 空箱上门下单时间（订单状态为1-5，显示）
    * 重箱提取上门时间（订单状态为6-10，显示）
  * 箱子编号（冗余数据）
  * 箱子规格（冗余数据）
  * 所需积分（每月积分单价）（冗余数据）

##### 3.1.5.3.2 订单详情

* 操作表
  * 订单表
* 校验

  * 无
* 注意事项

  * 根据当前订单状态，显示要下单的时间

    * 空箱上门下单时间（订单状态为1-5，显示）

    * 重箱提取下单时间（订单状态为6-10，显示）
  * 空箱上门姓名（订单状态为1-5，显示）
  * 空箱上门电话（订单状态为1-5，显示）
  * 空箱上门地址（订单状态为1-5，显示）
  * 空箱上门时间（订单状态为1-5，显示）
  * 空箱上门时段（订单状态为1-5，显示）
  * 重箱提取姓名（订单状态为6-10，显示）
  * 重箱提取电话（订单状态为6-10，显示）
  * 重箱提取地址（订单状态为6-10，显示）
  * 重箱提取时间（订单状态为6-10，显示）
  * 重箱提取时段（订单状态为6-10，显示）
  * 箱子编号（冗余数据）
  * 箱子规格（冗余数据）
  * 箱子积分单价（每月积分单价）（冗余数据）
  * 租赁时长
  * 实付积分
  * 订单状态（前后端约定一致写死）

##### 3.1.5.1.3 订单操作

| 订单状态编码 | 操作                        | 手机端对应状态 | 手机端按钮 | 备注                                                         |
| :----------: | --------------------------- | :------------: | :--------: | ------------------------------------------------------------ |
|      1       | 手机端点击<br/>【提交订单】 |   已下上门单   |     -      | 不操作订单历史表<br/>写入空箱上门相关字段<br/>重箱提取相关字段为空<br/>写入空箱上门下单时间 |
|      2       | 后台端点击<br/>【发送空箱】 |    代收空箱    |  收取空箱  | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      3       | 手机端点击<br/>【收取空箱】 |    已收空箱    |  发送重箱  | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      4       | 手机端点击<br/>【发送重箱】 |    已发重箱    |     -      | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      5       | 后台端点击<br/>【收取重箱】 |     已储存     |  预约提取  | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      6       | 手机端点击<br/>【预约提取】 |   已下提取单   |     -      | 写入重箱提取相关字段<br/>空箱上门相关字段不变<br/>写入重箱提取下单时间 |
|      7       | 后台端点击<br/>【发送重箱】 |    代收重箱    |  收取重箱  | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      8       | 手机端点击<br/>【收取重箱】 |    已收重箱    |  发送空箱  | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      9       | 手机端点击<br/>【发送空箱】 |    已发空箱    |     -      | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      10      | 后台端点击<br/>【收取重箱】 |     已完成     |  删除订单  | 手机端显示状态信息及按钮                                     |

* 操作表
  * 订单表
  * 订单历史表（只有空箱上门下单、不插入、其他状态修改、都插入）
  * 箱子信息表（只要后台端点击收取空箱、才修改箱子使用状态为未使用、清空使用人）
* 校验
  * 每个操作都要加乐观锁（提示：已有他人率先操作，请刷新后重试）
* 注意事项
  * 点击【预约提取】，需修改的重箱提取的地址信息、提取时间、提取时段、重箱提取下单时间
  * 删除订单，只修改手机端订单有效状态为已删除，而不修改后台端订单有效状态
  * 未完成的订单不可删除
  * 注意每个按钮的操作内包含的所有数据库操作，都在各自的事务里
  * 异常提示语：（按钮名称）失败



## 3.1.6 个人中心

### 3.1.6.1 需求说明

* 手机端用户，在手机端首页点击【个人中心】按钮，跳转至个人中心页面。
* 显示个人信息
* 点击【个人信息】，跳转至账户管理页面
* 点击【修改密码】，跳转至修改密码页面
* 点击【积分记录】，跳转至积分记录页面
* 点击【意见建议】，跳转至意见建议页面
* 点击【关于我们】，跳转至关于我们页面（前端静态页）

### 3.1.6.2 页面元素

#### 3.1.6.2.1 个人中心

* 显示项 
  * 头像地址
  * 客户姓名
* 按钮
  * 个人信息
  * 修改密码
  * 积分记录
  * 地址管理
  * 意见建议
  * 关于我们

#### 3.1.6.2.2 个人信息

* 输入项
  * 姓名
  * 手机号
  * 邮箱
* 单选项
  * 性别
* 按钮
  * 保存

#### 3.1.6.2.3 修改密码

* 输入项
  * 原密码
  * 新密码
  * 确认新密码
* 按钮
  * 保存

#### 3.1.6.2.4 积分记录

* 显示项
  * 当前积分
  * 积分明细列表
    * 方式
      * 1：注册赠送
      * 2：活动获得
      * 3：积分使用
    * 积分（积分获得为正数，积分使用为负数）
    * 积分记录时间

#### 3.1.6.2.5 地址管理

##### 3.1.6.2.5.1 列表

* 展示项
  * 地址列表
    * 姓名
    * 电话
    * 地址
    * 是否为默认地址
* 按钮
  * 设置默认地址
  * 新增
  * 编辑
  * 删除

##### 3.1.6.2.5.2 新增

* 输入项
  * 收货人
  * 手机号
  * 详细地址
* 开关项
  * 设置默认地址
* 按钮
  * 保存

##### 3.1.6.2.5.3 编辑

* 输入项
  * 收货人
  * 手机号
  * 详细地址
* 开关项
  * 设置默认地址
* 按钮
  * 保存

#### 3.1.6.2.6 意见建议

* 输入项
  * 标题
  * 内容
* 按钮
  * 提交

#### 3.1.6.2.7 关于我们

* 展示项
  * 前端自定内容

### 3.1.6.3 详细设计

#### 3.1.6.3.1 个人中心

* 操作表
  * 客户表（手机端角色）
* 校验
  * 无
* 注意事项
  * 查询内容
    * 姓名
    * 手机号
    * 邮箱
    * 性别
    * 头像（建议裁剪，设置所有人头像相同，无法修改）

#### 3.1.6.3.2 个人信息

* 操作表
  * 无
* 检验
  * 无
* 注意事项
  * 内容从个人中心中带过来
    * 姓名
    * 手机号
    * 邮箱
    * 性别
    * 头像（建议裁剪，设置所有人头像相同，无法修改）

#### 3.1.6.3.3 修改密码

* 操作表
  * 客户表（手机端角色）
* 校验
  * 新密码和原密码不能一致（提示：新密码和原密码不能一致）
  * 新密码和确认新密码要一致（提示:两次输入新密码不一致）
  * 强密码（加分项）
  * 密码：最大长度16，只能包含英文和数字
* 注意事项
  * 原密码要查询【客户表（手机端角色）】以确认密码正确

#### 3.1.6.3.4 积分记录查询

* 操作表
  * 客户表（手机端角色）
  * 积分记录表
* 校验
  * 无
* 注意事项
  * 分页

#### 3.1.6.3.5 地址管理

##### 3.1.6.3.5.1 列表

* 操作表
  * 客户地址表
* 校验
  * 无
* 注意事项
  * 不分页
  * 设置默认地址。要先`update 客户地址表 set 默认地址=0 where 客户=当前用户 and 默认地址=1`，然后再设置默认地址。

##### 3.1.6.3.5.2 新增

* 操作表
  * 客户地址表
* 校验
  * 收货人、手机号、地址，在表中无完全一致的数据（提示：地址已重复）
  * 收货人、手机号、地址不能为空（提示：收货人/手机号/地址、不能为空）
* 注意事项
  * 设置默认地址。要先`update 客户地址表 set 默认地址=0 where 客户=当前用户 and 默认地址=1`，然后再设置默认地址。

##### 3.1.6.3.5.3 编辑

* 操作表
  * 客户地址表
* 校验
  * 收货人、手机号、地址，在表中（排除当前条）无完全一致的数据（提示：地址已重复）
  * 收货人、手机号、地址不能为空（提示：收货人/手机号/地址、不能为空）
* 注意事项
  * 数据从列表中带过来，不查库
  * 设置默认地址。要先`update 客户地址表 set 默认地址=0 where 客户=当前用户 and 默认地址=1`，然后再设置默认地址。

#### 3.1.6.3.6 意见建议

* 操作表
  * 意见表
* 校验
  * 标题、内容不能为空（提示：标题/内容为空）
  * 标题最大长度为20
  * 内容最大长度为1000
* 注意事项
  * 注意控制标题长度，以及内容长度，不能超过设置的字段大小

#### 3.1.6.3.7 关于我们

* 操作表
  * 无
* 校验
  * 无
* 注意事项
  * 前端自定内容

## 3.2 后台端

## 3.2.1 登录

#### 3.2.1.1 需求说明

* 后台端用户，打开网址，直接进入登录页面，点击【登录】成功后跳转至订单管理页面
* 后台端用户，在后台端登录页面，点击【忘记密码，寻求帮助】，提示：请联系管理员+手机号

#### 3.2.1.2 页面元素

##### 3.2.1.2.1 登录

* 输入框
  * 用户名
  * 密码
* 按钮
  * 登录
  * 忘记密码，寻求帮助？

#### 3.2.1.3  详细设计

##### 3.2.1.3.1 登录

* 操作表
  * 用户表（后台端角色）
* 校验（前端做校验）
  * 用户名：最大长度16，只能包含英文和数字
  * 密码：最大长度16，只能包含英文和数字
* 注意事项
  * 通过用户名可以登录（其他不可）

* 提示语：用户不存在/密码错误


## 3.2.2 首页

#### 3.2.2.1 需求说明

* 后台端用户，在登录成功后，跳转至订单管理页面
* 右上角显示用户名
* 点击【修改密码】，弹窗修改密码页面
* 点击【退出登录】，清空登录信息，跳转至登录页面

#### 3.2.2.2 页面元素

##### 3.2.2.2.1 首页

* 展示项
  * 用户名
  * 菜单
    * 用户管理（跳转页面）
    * 客户管理（跳转页面）
    * 箱子管理（跳转页面）
    * 订单管理（跳转页面）
    * 广告管理（跳转页面）
    * 意见建议（跳转页面）
* 按钮
  * 修改密码
  * 退出登录

#### 3.2.2.3  详细设计

##### 3.2.2.3.1 首页

* 操作表
  * 无
* 校验
  * 无
* 注意事项
  * 前端直接获取当前登录人接口，以得到用户名

##### 3.2.2.3.2 修改密码

* 操作表
  * 用户表（后台端角色）
* 校验
  * 校验
    * 新密码和原密码不能一致（提示：新密码和原密码不能一致）
    * 新密码和确认新密码要一致（提示:两次输入新密码不一致）
    * 强密码（加分项）
    * 密码：最大长度16，只能包含英文和数字
  * 注意事项
    * 原密码要查询【用户表（后台端角色）】并确认密码正确

##### 3.2.2.3.3 退出登录

* 操作表
  * 无
* 校验
  * 无
* 注意事项
  * 清除登录信息

## 3.2.3 用户管理

#### 3.2.3.1 需求说明

* 点击【用户管理】菜单，进入用户管理页
* 点击【新增】按钮，进入用户新增页
* 点击【编辑】按钮，进入用户编辑页（数据直接从列表带出）
* 点击【启用】按钮，启用多个用户
* 点击【停用】按钮，停用多个用户
* 点击【删除】按钮，删除多个用户
* 点击【查询】按钮，根据查询条件，加载列表页
* 点击【重置】按钮，清空查询条件，加载列表页

#### 3.2.3.2 页面元素

##### 3.2.3.2.1 列表页

* 显示项
  * 用户名
  * 姓名
  * 手机号
  * 邮箱
  * 状态
* 输入项
  * 用户名（姓名、用户名、手机号、邮箱都可以进行查询）
  * 姓名
* 按钮
  * 查询
  * 重置
  * 新增
  * 修改
  * 启用
  * 停用
  * 删除
  * 重置密码
  * 全选

##### 3.2.3.2.2 新增页

* 输入项
  * 用户名
  * 姓名
  * 性别
  * 手机号
  * 邮箱
* 按钮
  * 保存
  * 取消

##### 3.2.3.2.3 编辑页

* 显示项
  * 用户名（不能改）
* 输入项
  * 姓名
  * 性别
  * 手机号
  * 邮箱
* 按钮
  * 保存
  * 取消

#### 3.2.3.3  详细设计

##### 3.2.3.3.1 列表页

##### 3.2.3.3.1.1 查询

* 操作表
  * 用户表（后台端角色）
* 校验
  * 用户名、姓名、不包含特殊字符（前端校验）
* 注意事项
  * 查询列表结果
    * 用户名
    * 姓名
    * 性别
    * 手机号
    * 邮箱
    * 状态

##### 3.2.3.3.1.2 启用

* 操作表
  * 用户表（后台端角色）
* 校验
  * 当前状态为启用的用户，不能启用（提示：状态为启用的用户，不能启用）
* 注意事项
  * 可操作多个用户
  * 注意并发操作，用version加乐观锁（update返回结果不等于传递list的大小，则抛异常）（提示：当前用户已被他人操作，请刷新后重试）

##### 3.2.3.3.1.3 停用

* 操作表
  * 用户表（后台端角色）
* 校验
  * 当前状态为以停用的用户，不能停用（提示：状态为停用的客户，不能停用）
* 注意事项
  * 可操作多个用户
  * 注意并发操作，用version加乐观锁（update返回结果不等于传递list的大小，则抛异常）（提示：当前用户已被他人操作，请刷新后重试）

##### 3.2.3.3.1.4 删除

* 操作表
  * 用户表（后台端角色）
* 校验
  * 当前状态为停用的用户，不能停用（提示：状态为停用的用户，才可以删除）
* 注意事项
  * 可操作多个用户
  * 注意并发操作，用version加乐观锁（update返回结果不等于传递list的大小，则抛异常）（提示：当前用户已被他人操作，请刷新后重试）
  * 逻辑删除（设置is_deleted字段为已删除）

##### 3.2.3.3.1.5 重置密码

* 操作表
  * 用户表（后台端角色）
* 校验
  * 无
* 注意事项
  * 可操作多个用户
  * 注意并发操作，用version加乐观锁（update返回结果不等于传递list的大小，则抛异常）（提示：当前用户已被他人操作，请刷新后重试）
  * 重置为初始密码【Abc,123456】

##### 3.2.3.3.2  新增页

* 操作表
  * 用户表（后台端角色）
* 校验
  * 用户名：最大长度16，只能包含英文和数字
  * 手机号：最大长度11
  * 姓名：最大长度10
  * 性别：最大长度1
  * 邮箱：符合邮箱规则
  * 校验用户名、手机号、邮箱是否重复（提示：用户名/手机号/邮箱重复）
* 注意事项
  * 默认密码【Abc,123456】

##### 3.2.3.3.3  编辑页

* 操作表
  * 用户表（后台端角色）
* 校验
  * 手机号：最大长度11
  * 姓名：最大长度10
  * 性别：最大长度1
  * 邮箱：符合邮箱规则
  * 校验手机号、邮箱是否重复(去除当前数据，其他数据有无重复）（提示：手机号/邮箱重复）
* 注意事项
  * 用户名不能修改
  * 数据从列表页带过来
  * 点击保存，加入乐观锁

## 3.2.4 客户管理

#### 3.2.4.1 需求说明

* 点击【客户管理】菜单，进入客户管理页
* 点击【新增】按钮，进入客户新增页面
* 点击【编辑】按钮，进入客户编辑页（数据直接从列表带出）
* 点击【启用】按钮，启用多个客户
* 点击【停用】按钮，停用多个客户
* 点击【删除】按钮，删除多个客户
* 点击【查询】按钮，根据查询条件，加载列表页
* 点击【重置】按钮，清空查询条件，加载列表页

#### 3.2.4.2 页面元素

##### 3.2.3.4.1 列表页

* 显示项
  * 客户名
  * 姓名
  * 手机号
  * 邮箱
  * 积分
  * 状态
* 输入项
  * 单个输入框（姓名、客户名、手机号、邮箱都可以进行查询）
* 按钮
  * 查询
  * 重置
  * 新增
  * 修改
  * 启用
  * 停用
  * 删除
  * 重置密码
  * 全选

##### 3.2.4.2.2 新增页

* 输入项
  * 客户名
  * 姓名
  * 手机号
  * 邮箱
* 按钮
  * 保存
  * 取消

##### 3.2.4.2.3 编辑页

* 显示项
  * 客户名（不能改）
* 输入项
  * 姓名
  * 手机号
  * 邮箱
* 按钮
  * 保存
  * 取消

#### 3.2.4.3  详细设计

##### 3.2.4.3.1 列表页

##### 3.2.4.3.1.1 查询

* 操作表
  * 客户表（手机端角色）
* 校验
  * 客户名、姓名、不包含特殊字符（前端校验）
* 注意事项
  * 查询列表结果
    * 客户名
    * 姓名
    * 性别
    * 手机号
    * 邮箱
    * 积分
    * 状态

##### 3.2.4.3.1.2 启用

* 操作表
  * 客户表（手机端角色）
* 校验
  * 当前状态为启用的用户，不能启用（提示：提示状态为启用的客户，不能启用）
* 注意事项
  * 可操作多个客户
  * 注意并发操作，用version加乐观锁（update返回结果不等于传递list的大小，则抛异常）（提示：当前用户已被他人操作，请刷新后重试）

##### 3.2.4.3.1.3 停用

* 操作表
  * 客户表（手机端角色）
* 校验
  * 当前状态为停用的用户，不能停用（提示：状态为停用的客户，不能停用）
* 注意事项
  * 可操作多个用户
  * 注意并发操作，用version加乐观锁（update返回结果不等于传递list的大小，则抛异常）（提示：当前用户已被他人操作，请刷新后重试）

##### 3.2.4.3.1.4 删除

* 操作表
  * 客户表（手机端角色）
* 校验
  * 当前状态为以停用的客户，才可以删除（提示：状态为停用的客户，才可以删除）
* 注意事项
  * 可操作多个用户
  * 注意并发操作，用version加乐观锁（update返回结果，大等于传递list的大小，则抛异常）（提示：当前他用户已被他人操作，请刷新后重试）
  * 逻辑删除（设置is_deleted字段为已删除）

##### 3.2.4.3.1.5 重置密码

* 操作表
  * 用户表（手机端角色）
* 校验
  * 无
* 注意事项
  * 可操作多个用户
  * 注意并发操作，用version加乐观锁（update返回结果不等于传递list的大小，则抛异常）（提示：当前用户已被他人操作，请刷新后重试）
  * 重置为初始密码【12345678】

##### 3.2.4.3.2  新增页

* 操作表
  * 用户表（手机端角色）
* 校验
  * 用户名：最大长度16，只能包含英文和数字
  * 手机号：最大长度11
  * 姓名：最大长度10
  * 性别：最大长度1
  * 邮箱：符合邮箱规则
* 注意事项
  * 默认密码【12345678】
  * 校验客户名、手机号、邮箱是否重复（提示：客户名/手机号/邮箱重复）
  * 积分默认为0，因为不是从手机端注册的，不给积分（数据库加check>=0）

##### 3.2.3.3.3  编辑页

* 操作表
  * 用户表（手机端角色）
* 校验
  * 手机号：最大长度11
  * 姓名：最大长度10
  * 性别：最大长度1
  * 邮箱：符合邮箱规则
  * 检验用户名、手机号、邮箱是否重复（去除当前数据，其他数据有无重复）（提示：手机号/邮箱重复）
* 注意事项
  * 客户名不能修改
  * 数据从列表页带过来
  * 点击保存，加入乐观锁

## 3.2.5 箱子管理

#### 3.2.5.1 需求说明

* 点击【箱子管理】菜单，展开二级菜单【箱子规格】和【箱子信息】
* 点击二级菜单【箱子规格】，进入箱子规格列表页面
* 点击二级菜单【箱子信息】，进入箱子信息列表页面
* 点击【箱子规格列表页面】的【新增】按钮，进入新增箱子规格页面
* 点击【箱子规格列表页面】的【删除】按钮，删除多个箱子规格
* 点击【箱子信息列表页面】的【新增】按钮，进入新增箱子信息页面
* 点击【箱子信息列表页面】的【编辑】按钮，进入编辑箱子信息页面
* 点击【箱子信息列表页面】的【删除】按钮，删除多个具体箱子
* 点击【查询】按钮，根据查询条件，加载列表页
* 点击【重置】按钮，清空查询条件，加载列表页

#### 3.2.5.2 页面元素

##### 3.2.5.2.1 箱子规格

##### 3.2.5.2.1.1 列表

* 显示项
  * 箱子规格
  * 总数量
  * 已使用数量
  * 库存
  * 使用比例
  * 所需积分（每月所需积分）

* 输入框
  * 箱子规格
* 按钮
  * 查询
  * 重置
  * 新增
  * 删除

##### 3.2.5.2.1.2 新增

* 输入项
  * 箱子规格
  * 数量
  * 所需积分
  * 备注
* 按钮
  * 保存
  * 取消

##### 3.2.5.2.2 箱子信息

##### 3.2.5.2.2.1 列表

* 显示项
  * 箱子规格
  * 箱子编号
  * 所需积分（每月积分单价）
  * 使用状态
    * 0：未使用
    * 1：已使用
  * 使用人
  * 备注
  * （删除标识）
    * 0：未删除
* 输入项
  * 箱子规格
  * 使用状态
  * 使用人
* 按钮
  * 查询
  * 重置
  * 编辑
  * 新增

##### 3.2.5.2.2.2 新增

* 输入项
  * 箱子规格
  * （箱子编号——自动生成）
  * （所需积分——选自箱子规格后带出）
  * （使用人——空）
  * （使用状态——0：未使用）
  * 备注
* 按钮
  * 保存
  * 取消 

#### 3.2.5.3  详细设计

##### 3.2.5.3.1 箱子规格

##### 3.2.5.3.1.1 列表

* 操作表

  * 箱子规格表
  * 箱子信息表

* 校验

  * 箱子规格，不包含特殊字符（前端校验）

* 注意事项

  * 查询列表结果
    * 箱子规格
    * 总数量
    * 已使用数量
    * 库存
    * 使用比例
    * 所需积分（每月积分单价）


##### 3.2.5.3.1.2 新增

* 操作表
  * 箱子规格表
  * 箱子信息表
* 校验
  * 箱子规格、数量、所需积分不能为空
  * 数量必须大于等于0
  * 对于已经存在的规格，判定所需积分（每月积分单价）是否与当前鬼个所需积分一致，一致，则根据条数添加【箱子信息表】的数据
* 注意事项
  * 操作项
    * 箱子规格
    * 数量
    * 所需积分
    * 备注
  * 对于【箱子规格表】，插入1条，箱子规格，所需积分（每月积分单价）、备注
  * 对于【箱子信息表】，插入n条（n=数量），自动生成箱子编号，写入箱子规格，可以冗余存储所需积分（每月积分单价）、写入备注

##### 3.2.5.3.1.3 删除

* 操作表
  * 箱子规格表
  * 箱子信息表

* 检验

  * 当前规格下，仍然有箱子，则规格不能删除

* 注意事项

  * 逻辑删除

##### 3.2.5.3.2 箱子信息

##### 3.2.5.3.2 .1 列表

* 操作表

  * 箱子规格表
  * 箱子信息表

* 校验

  * 箱子规格为下拉列表（从箱子规格表中获取）
  * 使用状态为下拉列表（0：未使用，1：已使用）
  * 使用人为输入框，不能存在特殊字符

* 注意事项

  * 查询列表结果
    * 箱子编号
    * 箱子规格
    * 所需积分（每月积分单价）
    * 使用状态
      * 0：未使用
      * 1：已使用
    * 使用人
    * 备注
    * （删除标识）
      * 0：未删除

##### 3.2.5.3.2.2 新增

* 操作表
  * 箱子信息表
  * 箱子规格表
* 检验
  * 箱子规格为下拉列表（从箱子规格表中获取）
* 注意事项
  * 箱子规格为下拉列表（从箱子规格表中获取）
  * (箱子编号——自动生成)
  * 所需积分（每月积分单价）
  * (使用人——空)
  * (使用状态——0 未使用)
  * (删除状态——0 未删除)
  * 备注

##### 3.2.5.3.2.3 删除

* 操作表

  * 订单表
  * 箱子信息表

* 校验

  * 当前箱子，仍有订单（未完成的订单）关联（箱子id），则箱子不能删除

* 注意事项

  * 逻辑删除


## 3.2.6 订单管理

### 3.2.6.1 需求说明

* 后台端用户，在手机端首页，点击【我的订单】，进入订单列表页面
* 查询订单列表（分页）
* 点击订单列表的订单，进入订单详情页面
* 订单列表操作列，可根据具体状态，可以执行相关操作
* 订单详情页面，根据具体状态，可以执行相关操作


| 订单状态编码 | 手机端对应状态 | 手机端按钮 | 后台端对应状态 | 后台端按钮 |
| :----------: | :------------: | :--------: | :------------: | :--------: |
|      1       |   已下上门单   |     -      |    待发空箱    |  发送空箱  |
|      2       |    代收空箱    |  收取空箱  |    已发空箱    |     -      |
|      3       |    已收空箱    |  发送重箱  |    送达空箱    |     -      |
|      4       |    已发重箱    |     -      |    代收重箱    |  收取重箱  |
|      5       |     已储存     |  预约提取  |     已存储     |     -      |
|      6       |   已下提取单   |     -      |    待发重箱    |  发送重箱  |
|      7       |    代收重箱    |  收取重箱  |    已发重箱    |     -      |
|      8       |    已收重箱    |  发送空箱  |    送达重箱    |     -      |
|      9       |    已发空箱    |     -      |    代收空箱    |  收取空箱  |
|      10      |     已完成     |  删除订单  |     已完成     |     -      |

### 3.2.6.2 页面元素

#### 3.2.6.2.1 订单列表

*  显示项
   * 订单详情列表

     * 点击订单名称跳转订单详情页面
     * 订单编号
     * 订单状态（前后端约定一致，写死）
     * 订单名称
     * 箱子id
     * 箱子规格（冗余数据）
     * 箱子编号（冗余数据）
     * 所需积分：每月积分单价（冗余数据）
     * 实付积分
     * 租赁时长
     * 空箱上门下单时间（订单状态为1-5，显示）
     * 重箱提取下单时间（订单状态为6-10，显示）
*  输入项
   * 客户名称
   * 订单状态（下拉框）
     * 1：待发空箱
     * 2：已发空箱
     * 3：送达空箱
     * 4：待收重箱
     * 5：已存储
     * 6：待发重箱
     * 7：已发重箱
     * 8：送达重箱
     * 9：待收空箱
     * 10：已完成
   * 下单时间
     * 开始时间
     * 结束时间
*  按钮
   * 订单名称
   * 操作按钮
     * 发送空箱（对应状态1显示）
     * 收取重箱（对应状态4显示）
     * 发送重箱（对应状态6显示）
     * 收取空箱（对应状态9显示）

#### 3.2.6.2.2 订单详情

* 显示项
  * 订单编号
  * 订单名称
  * 空箱上门下单时间（订单状态为1-5，显示）
  * 重箱提取下单时间（订单状态为6-10，显示）
  * 空箱上门姓名（订单状态为1-5，显示）
  * 空箱上门电话（订单状态为1-5，显示）
  * 空箱上门地址（订单状态为1-5，显示）
  * 空箱上门上门时间（订单状态为1-5，显示）
  * 空箱上门上门时段（订单状态为1-5，显示）
  * 重箱提取姓名（订单状态为6-10，显示）
  * 重箱提取电话（订单状态为6-10，显示）
  * 重箱提取地址（订单状态为6-10，显示）
  * 重箱提取时间（订单状态为6-10，显示）
  * 重箱提取时段（订单状态为6-10，显示）
  * 箱子id
  * 箱子编号（冗余数据）
  * 箱子规格（冗余数据）
  * 箱子积分单价（每月积分单价）（冗余数据）
  * 租赁时长
  * 实付积分
  * 订单状态（前后端约定一致写死）
  * 配送人信息（删除）
* 按钮
  * 发送空箱（对应状态1显示）
  * 收取重箱（对应状态4显示）
  * 发送重箱（对应状态6显示）
  * 收取空箱（对应状态9显示）

### 3.2.6.3 详细设计

##### 3.2.6.3.1 订单列表

* 操作表
  * 订单表
  * 客户表（手机端角色）
* 校验
  * 无
* 注意事项
  * 需要根据当前订单状态显示需要显示的下单时间
    * 空箱上门下单时间（订单状态为1-5，显示）
    * 重箱提取上门时间（订单状态为6-10，显示）
  * 箱子编号（冗余数据）
  * 箱子规格（冗余数据）
  * 箱子积分单价（每月积分单价）（冗余数据）

##### 3.2.6.3.2 订单列表

* 操作表
  * 订单表
  * 客户表（手机端角色）
* 校验

  * 无
* 注意事项

  * 根据当前订单状态，显示要下单的时间

    * 空箱上门下单时间（订单状态为1-5，显示）

    * 重箱提取下单时间（订单状态为6-10，显示）
  * 空箱上门下单时间（订单状态为1-5，显示）
  * 重箱提取下单时间（订单状态为6-10，显示）
  * 空箱上门姓名（订单状态为1-5，显示）
  * 空箱上门电话（订单状态为1-5，显示）
  * 空箱上门地址（订单状态为1-5，显示）
  * 空箱上门上门时间（订单状态为1-5，显示）
  * 空箱上门上门时段（订单状态为1-5，显示）
  * 重箱提取姓名（订单状态为6-10，显示）
  * 重箱提取电话（订单状态为6-10，显示）
  * 重箱提取地址（订单状态为6-10，显示）
  * 重箱提取时间（订单状态为6-10，显示）
  * 重箱提取时段（订单状态为6-10，显示）
  * 箱子编号（冗余数据）
  * 箱子规格（冗余数据）
  * 箱子积分单价（每月积分单价）（冗余数据）
  * 租赁时长
  * 订单状态（前后端约定一致写死）

##### 3.1.5.3.3 订单操作

| 订单状态编码 | 操作                        | 手机端对应状态 | 手机端按钮 | 备注                                                         |
| :----------: | --------------------------- | :------------: | :--------: | ------------------------------------------------------------ |
|      1       | 手机端点击<br/>【提交订单】 |   已下上门单   |     -      | 不操作订单历史表<br/>写入空箱上门相关字段<br/>重箱提取相关字段为空<br/>写入空箱上门下单时间 |
|      2       | 后台端点击<br/>【发送空箱】 |    代收空箱    |  收取空箱  | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      3       | 手机端点击<br/>【收取空箱】 |    已收空箱    |  发送重箱  | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      4       | 手机端点击<br/>【发送重箱】 |    已发重箱    |     -      | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      5       | 后台端点击<br/>【收取重箱】 |     已储存     |  预约提取  | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      6       | 手机端点击<br/>【预约提取】 |   已下提取单   |     -      | 写入重箱提取相关字段<br/>空箱上门相关字段不变<br/>写入重箱提取下单时间 |
|      7       | 后台端点击<br/>【发送重箱】 |    代收重箱    |  收取重箱  | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      8       | 手机端点击<br/>【收取重箱】 |    已收重箱    |  发送空箱  | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      9       | 手机端点击<br/>【发送空箱】 |    已发空箱    |     -      | 操作订单状态<br/>修改操作人<br/>修改更新时间                 |
|      10      | 后台端点击<br/>【收取重箱】 |     已完成     |  删除订单  | 操作订单状态<br/>修改操作人<br/>修改更新时间<br/>修改箱子信息表（未使用、清空使用人） |

* 操作表

  * 订单表
  * 订单历史表（所有操作，都插入）
  * 箱子信息表（只要后台端点击收取空箱、才修改箱子使用状态为未使用、清空使用人）

* 校验

  * 每个操作都要加乐观锁（提示：已有他人率先操作，请刷新后重试）

* 注意事项

  * 点击【预约提取】，需修改的重箱提取的地址信息、提取时间、提取时段、重箱提取下单时间
  * 删除订单，只修改后台端订单有效状态为已删除，而不修改手机端订单有效状态
  * 未完成的订单不可删除（提示：未完成的订单不可删除）
  * 注意每个按钮的操作内包含的所有数据库操作，都在各自的事务里
  * 异常提示语：（按钮名称）失败

* 图

  ```sequence
  title: 空箱上门订单状态时序图 
  participant 手机端用户 as A
  participant 服务器 as B
  participant 后台端用户 as C
  note over A:点击【空箱预约】，并提交订单
  A->B:提交上门空箱预约
  note over B:生成订单同时扣除积分
  note over B:状态【1】 
  B->A:手机端获取订单状态\n（手机提交订单后，加载订单列表）
  note over A:状态【1】--【已下单上门】\n页面无按钮 
  B->C:后台端获取订单状态\n（手机端提交订单后，加载订单列表） 
  note over C:状态【1】--【待发空箱】\n页面按钮【发送空箱】
  C->B:后台端点击【发送空箱】按钮
  note over B:状态【2】
  B->C:后台端获取订单状态\n（后台端发送空箱后，重新加载订单列表）
  note over C:状态【2】--已发空箱\n页面无按钮
  B->A:手机端获取订单状态\n（后台端发送空箱后，加载订单列表）
  note over A:状态【2】--待收空箱\n页面按钮【收取空箱】
  A->B:手机端点击【收取空箱】按钮
  note over B:状态【3】
  B->A:手机端获取订单状态\n（手机端收取空箱后，加载订单列表）
  note over A:状态【3】--已收空箱\n页面按钮【发送重箱】
  B->C:后台端获取订单状态\n（手机端收取空箱后，重新加载订单列表）
  note over C:状态【3】--送达空箱\n页面无按钮
  A->B:放入物品\n手机端点击【发送重箱】按钮
  note over B:状态【4】
  B->A:手机端获取订单状态\n（手机端发送重箱后，加载订单列表）
  note over A:状态【4】--已发重箱\n页面无按钮
  B->C:后台端获取订单状态\n（手机端发送重箱后，重新加载订单列表）
  note over C:状态【4】--待收空箱\n页面按钮【收取重箱】
  C->B:后台端点击【收取重箱】按钮
  note over B:状态【5】
  B->C:后台端获取订单状态\n（后台端收取重箱后，重新加载订单列表）
  note over C:状态【5】--已存储\n页面无按钮
  B->A:手机端获取订单状态\n（后台端收取重箱后，加载订单列表）
  note over A:状态【5】--已存储\n页面按钮【预约提取】
  ```

  ```sequence
  title:空箱提取订单状态时序图
  participant 手机端用户 as A
  participant 服务器 as B
  participant 后台端用户 as C
  note over A:点击【预约提取】\n填写地址并提交订单
  A->B:提交提取预约
  note over B:状态【6】
  B->A:手机端获取订单状态\n（手机提交订单后，加载订单列表）
  note over A:状态【6】--【已下提取单】\n页面无按钮
  B->C:后台端获取订单状态\n（手机端提交订单后，加载订单列表） 
  note over C:状态【6】--【待发重箱】\n页面按钮【发送重箱】
  C->B:后台端点击【发送重箱】按钮
  note over B:状态【7】
  B->C:后台端获取订单状态\n（后台端发送重箱后，加载订单列表） 
  note over C:状态【7】--【已发重箱】\n页面无按钮
  B->A:手机端获取订单状态\n（后台端发送重箱后，加载订单列表）
  note over A:状态【7】--【待收重箱】\n页面按钮【收取重箱】
  A->B:手机端点击【收取重箱】按钮
  note over B:状态【8】
  B->A:手机端获取订单状态\n（手机端收取重箱后，加载订单列表）
  note over A:状态【8】--【已收重箱】\n页面按钮【发送空箱】
  B->C:后台端获取订单状态\n（手机端发送空箱后，加载订单列表） 
  note over C:状态【8】--【送达重箱】\n页面无按钮
  A->B:手机端点击【发送空箱】按钮
  note over B:状态【9】
  B->A:手机端获取订单状态\n（手机端发送空箱后，加载订单列表）
  note over A:状态【9】--【已发空箱】\n页面无按钮
  B->C:后台端获取订单状态\n（手机端提交订单后，加载订单列表） 
  note over C:状态【9】--【待收空箱】\n页面按钮【收取空箱】
  C->B:后台端点击【收取空箱】按钮
  note over B:状态【10】
  B->C:后台端获取订单状态\n（后台端收取空箱后，加载订单列表） 
  note over C:状态【10】--【已完成】\n页面无按钮
  B->A:手机端获取订单状态\n（手机提交订单后，加载订单列表）
  note over A:状态【10】--【已完成】\n页面按钮【删除订单】
  ```

##### 3.1.5.3.3 订单删除

* 操作表
  * 订单表
  * 订单历史表
* 检验
  * 未完成的订单不可删除（提示：未完成的订单不可删除）
* 注意事项
  * 逻辑删除
  * 同时进入历史表

## 3.2.7 广告管理

### 3.2.7.1 需求说明

* 点击【广告管理】菜单，进入广告管理列表页
* 点击【新增】按钮，进入广告新增页
* 点击【编辑】按钮，进入广告编辑页（数据直接从列表带出）
* 点击【启用】按钮，启用多个广告
* 点击【停用】按钮，停用多个广告
* 点击【删除】按钮，删除多个广告
* 点击【查询】按钮，根据查询条件，加载列表页
* 点击【重置】按钮，清空查询条件，加载列表页

### 3.2.7.2 页面元素

#### 3.2.7.2.1 列表元素

* 显示项
  * 列表
    * 广告编号（广告id）
    * 广告标题
    * （广告内容）
    * 奖励积分
    * 图片地址
    * 广告排序
    * 广告状态
      * 0： 启用
      * 1： 未启用
    * 删除状态
      * 0：未删除
* 输入项
  * 单个输入框（广告标题、奖励积分、图片地址）
* 按钮
  * 查询
  * 重置
  * 新增
  * 编辑
  * 启用
  * 停用
  * 删除
  * 全选

#### 3.2.7.2.2 新增页

* 输入项
  * 广告标题
  * 广告内容
  * 奖励积分
  * 图片地址
  * 广告排序
* 上传项
  * 图片
* 按钮
  * 保存
  * 取消

#### 3.2.7.2.3 编辑页

* 输入项
  * 广告标题
  * 广告内容
  * 奖励积分
  * 图片地址
  * 广告排序
* 上传项
  * 图片
* 按钮
  * 保存
  * 取消

### 3.2.7.3 详细设计

### 3.2.7.3.1 列表页

#### 3.2.7.3.1.1 查询

* 操作表
  * 广告表
* 检验
  * 单个输入框不包括特殊字符（前端校验）
* 注意事项
  * 查询列表结果
    * 广告编号（广告id）
    * 广告标题
    * （广告内容）
    * 奖励积分
    * 图片地址
    * 广告排序
    * 广告状态
      * 0： 启用
      * 1： 未启用
    * 删除状态
      * 0：未删除
  * 按照广告排序升序进行查询

#### 3.2.7.3.1.2 启用

* 操作表
  * 广告表
* 检验
  * 当前状态为启用的广告，不能启用（提示：状态为启用的广告，不能启用）
* 注意事项
  * 可操作多个广告
  * 注意并发操作，用version加乐观锁（update返回结果不等于传递List的大小，则抛异常）（提示：当前广告已被他人操作，请刷新后重试）

#### 3.2.7.3.1.3 停用

* 操作表
  * 广告表
* 检验
  * 当前状态为停用的广告，不能停用（提示：状态为停用的广告，不能停用）
* 注意事项
  * 可操作多个广告
  * 注意并发操作，用version加乐观锁（update返回结果不等于传递List的大小，则抛异常）（提示：当前广告已被他人操作，请刷新后重试）

#### 3.2.7.3.1.4 删除

* 操作表
  * 广告表
* 检验
  * 当前状态为停用的广告，才可以删除（提示：状态为停用的广告，才可以删除）
* 注意事项
  * 可操作多个广告
  * 注意并发操作，用version加乐观锁（update返回结果不等于传递List的大小，则抛异常）（提示：当前广告已被他人操作，请刷新后重试）

### 3.2.7.3.2 新增页

* 操作表
  * 广告表
* 检验
  * 广告标题（最大长度20）
  * 广告内容（最大长度1000）
  * 奖励积分（正整数）
  * 图片地址（最大长度512）
  * 广告排序（正整数）
* 注意事项
  * 广告列表允许重复

### 3.2.7.3.3 编辑页

* 操作表
  * 广告表
* 检验
  * 广告标题（最大长度20）
  * 广告内容（最大长度1000）
  * 奖励积分（正整数）
  * 图片地址（最大长度512）
  * 广告排序（正整数）
* 注意事项
  * 广告列表允许重复

## 3.2.8 意见建议

### 3.2.8.1 需求说明

* 点击【意见建议】菜单，进入意见建议列表页
* 点击【查询】按钮，根据查询条件，加载列表项
* 点击【重置】按钮，清空查询条件，加载列表项

### 3.2.8.2 页面元素

#### 3.2.8.2.1 列表页面

* 显示项

  * 列表
    *  编号（意见建议id）
    *  提交人（显示姓名，实际存储提交人的用户名）
    *  意见标题
    *  意见内容
    *  提交时间
    *  删除状态

       *  0：未删除

* 输入项

  * 单个输入框（提交人、意见标题）

* 按钮

  * 查询

  * 重置

### 3.2.8.3 详细设计

#### 3.2.8.3.1列表页

* 操作表
  * 意见表
* 检验
  * 单个输入框不包含特殊字符（前端校验）
* 注意事项
  * 查询列表结果
    * 编号（意见建议id）
    * 提交人（显示姓名，实际存储提交人的用户id）
    * 意见标题
    * 意见内容
    * 提交时间（创建时间）
    * 删除状态
      * 0： 未删除
  * 意见内容，查出显示区域，显示【...】，鼠标移入，提示全部信息（前端做）

# 4. 数据库设计

## 4.1 数据模型

#### 4.1.1 pdm截图

* 快捷键Ctrl+Shift+X
* pdm逆向工程后，将Name中的字符COPY至Comment中

```sql
'代码一:将Name中的字符COPY至Comment中
Option  Explicit
ValidationMode  =  True
InteractiveMode  =  im_Batch
Dim  mdl  '  the  current  model
'  get  the  current  active  model
Set  mdl  =  ActiveModel
If  (mdl  Is  Nothing)  Then
   MsgBox  "There  is  no  current  Model "
ElseIf  Not  mdl.IsKindOf(PdPDM.cls_Model)  Then
   MsgBox  "The  current  model  is  not  an  Physical  Data  model.
"
Else
   ProcessFolder  mdl
End  If
'  This  routine  copy  name  into  comment  for  each  table,  each 
column  and  each  view
'  of  the  current  folder
Private  sub  ProcessFolder(folder)
   Dim  Tab  'running   table
   for  each  Tab  in  folder.tables
      if  not  tab.isShortcut  then
         tab.comment  =  tab.name
         Dim  col  '  running  column
         for  each  col  in  tab.columns
            col.comment=  col.name
         next
      end  if
   next
   Dim  view  'running  view
   for  each  view  in  folder.Views
      if  not  view.isShortcut  then
         view.comment  =  view.name
      end  if
   next
   '  go  into  the  sub-packages
   Dim  f  '  running  folder
   For  Each  f  In  folder.Packages
      if  not  f.IsShortcut  then
         ProcessFolder  f
      end  if
   Next
end  sub
```

* pdm逆向工程后，将Comment中的字符COPY至Name中

```VB
'代码二:将Comment中的字符COPY至Name中
Option  Explicit
ValidationMode  =  True
InteractiveMode  =  im_Batch
Dim  mdl  '  the  current  model
'  get  the  current  active  model
Set  mdl  =  ActiveModel
If  (mdl  Is  Nothing)  Then
   MsgBox  "There  is  no  current  Model "
ElseIf  Not  mdl.IsKindOf(PdPDM.cls_Model)  Then
   MsgBox  "The  current  model  is  not  an  Physical  Data  model.
"
Else
   ProcessFolder  mdl
End  If
Private  sub  ProcessFolder(folder)
On Error Resume Next
   Dim  Tab  'running   table
   for  each  Tab  in  folder.tables
      if  not  tab.isShortcut  then
         tab.name  =  tab.comment
         Dim  col  '  running  column
         for  each  col  in  tab.columns
         if col.comment="" then
         else
            col.name=  col.comment
         end if
         next
      end  if
   next
   Dim  view  'running  view
   for  each  view  in  folder.Views
      if  not  view.isShortcut  then
         view.name  =  view.comment
      end  if
   next
   '  go  into  the  sub-packages
   Dim  f  '  running  folder
   For  Each  f  In  folder.Packages
      if  not  f.IsShortcut  then
         ProcessFolder  f
      end  if
   Next
end  sub
```

##### 4.1.1.1 业务表截图

![1](http://quh52ni8g.hb-bkt.clouddn.com/1.png) 

##### 4.1.1.2 系统表截图

![2](http://quh52ni8g.hb-bkt.clouddn.com/2.png)  

##### 4.1.1.3 定时任务表截图

![3](http://quh52ni8g.hb-bkt.clouddn.com/3.png)

#### 4.1.2 建表sql

##### 4.1.2.1 业务表

```sql
-- ----------------------------
-- 1、广告表
-- ----------------------------
DROP TABLE IF EXISTS `t_advertisement`;
CREATE TABLE `t_advertisement` (
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'id',
`title` varchar(64) NOT NULL COMMENT '标题',
`content` varchar(4096) NOT NULL COMMENT '内容',
`img_url` varchar(1024) DEFAULT NULL COMMENT '头像路径',
`points` bigint(20) unsigned NOT NULL COMMENT '可获积分',
`is_enable` tinyint(3) unsigned NOT NULL COMMENT '是否启用（0：启用；1：停用）',
`sort_no` bigint(20) unsigned NOT NULL COMMENT '序号',
`create_time` datetime NOT NULL COMMENT '创建时间',
`create_by` varchar(64) NOT NULL COMMENT '创建人',
`update_time` datetime DEFAULT NULL COMMENT '更新时间',
`update_by` varchar(64) DEFAULT NULL COMMENT '更新人',
 `version` bigint(20) unsigned NOT NULL COMMENT '版本号',
`del_flag` char(1) NOT NULL COMMENT '删除标记（0：未删除；2：已删除）',
PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='广告表';
-- ----------------------------
-- 2、意见表
-- ----------------------------
DROP TABLE IF EXISTS `t_advice`;
CREATE TABLE `t_advice` (
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'id',
`user_id` varchar(64) NOT NULL COMMENT '手机端用户id',
`title` varchar(64) NOT NULL COMMENT '标题',
`content` varchar(4096) NOT NULL COMMENT '内容',
`sort_no` bigint(20) unsigned DEFAULT NULL COMMENT '序号',
`create_time` datetime NOT NULL COMMENT '创建时间',
`create_by` varchar(64) NOT NULL COMMENT '创建人',
`update_time` datetime DEFAULT NULL COMMENT '更新时间',
`update_by` varchar(64) DEFAULT NULL COMMENT '更新人',
`version` bigint(20) unsigned NOT NULL COMMENT '版本号',
`del_flag` char(1) NOT NULL COMMENT '删除标记（0：未删除；2：已删除）',
PRIMARY KEY (`id`),
KEY `idx_user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='意见表';
-- ----------------------------
-- 3、箱子信息表
-- ----------------------------
DROP TABLE IF EXISTS `t_box_info`;
CREATE TABLE `t_box_info` (
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'id',
`box_code` bigint(20) unsigned NOT NULL COMMENT '箱子编号（年月日+6位序列）',
`box_standard` varchar(64) NOT NULL COMMENT '箱子规格（如20*20*20）',
`box_unit_price` bigint(20) unsigned NOT NULL COMMENT '箱子积分单价（每月积分单
价）',
`used_by` bigint(20) unsigned DEFAULT NULL COMMENT '使用人',
`is_used` tinyint(3) unsigned DEFAULT NULL COMMENT '是否被使用（0：未使用；1：已使
用）',
`remark` varchar(1024) NOT NULL COMMENT '备注',
`sort_no` bigint(20) unsigned DEFAULT NULL COMMENT '序号',
`create_time` datetime NOT NULL COMMENT '创建时间',
`create_by` varchar(64) NOT NULL COMMENT '创建人',
`update_time` datetime DEFAULT NULL COMMENT '更新时间',
`update_by` varchar(64) DEFAULT NULL COMMENT '更新人',
`version` bigint(20) unsigned NOT NULL COMMENT '版本号',
`del_flag` char(1) NOT NULL COMMENT '删除标记（0：未删除；2：已删除）',
PRIMARY KEY (`id`),
KEY `idx_box_standard` (`box_standard`),
KEY `idx_used_by` (`used_by`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='箱子信息表';
-- ----------------------------
-- 4、箱子规格表
-- ----------------------------
DROP TABLE IF EXISTS `t_box_standard`;
CREATE TABLE `t_box_standard` (
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'id',
`box_standard` varchar(64) NOT NULL COMMENT '箱子规格（如20*20*20）',
 `box_unit_price` bigint(20) unsigned NOT NULL COMMENT '箱子积分单价（每月积分单
价）',
`remark` varchar(1024) NOT NULL COMMENT '备注',
`sort_no` bigint(20) unsigned DEFAULT NULL COMMENT '序号',
`create_time` datetime NOT NULL COMMENT '创建时间',
`create_by` varchar(64) NOT NULL COMMENT '创建人',
`update_time` datetime DEFAULT NULL COMMENT '更新时间',
`update_by` varchar(64) DEFAULT NULL COMMENT '更新人',
`version` bigint(20) unsigned NOT NULL COMMENT '版本号',
`del_flag` char(1) NOT NULL COMMENT '删除标记（0：未删除；2：已删除）',
PRIMARY KEY (`id`),
KEY `idx_box_standard` (`box_standard`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='箱子规格表';
-- ----------------------------
-- 5、客户地址表
-- ----------------------------
DROP TABLE IF EXISTS `t_customer_address`;
CREATE TABLE `t_customer_address` (
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'id',
`user_id` varchar(64) NOT NULL COMMENT '手机端用户id',
`contacts` varchar(64) NOT NULL COMMENT '联系人',
`contacts_phone` varchar(64) NOT NULL COMMENT '联系人电话',
`province` varchar(64) DEFAULT NULL COMMENT '省编号',
`province_name` varchar(64) DEFAULT NULL COMMENT '省名称',
`city` varchar(64) DEFAULT NULL COMMENT '市编号',
`city_name` varchar(64) DEFAULT NULL COMMENT '市名称',
`area` varchar(64) DEFAULT NULL COMMENT '区编号',
`area_name` varchar(64) DEFAULT NULL COMMENT '区名称',
`address` varchar(1024) NOT NULL COMMENT '详细地址',
`is_default` tinyint(3) unsigned NOT NULL COMMENT '是否是默认地址（0：是；1：否）',
`sort_no` bigint(20) unsigned DEFAULT NULL COMMENT '序号',
`create_time` datetime NOT NULL COMMENT '创建时间',
`create_by` varchar(64) NOT NULL COMMENT '创建人',
`update_time` datetime DEFAULT NULL COMMENT '更新时间',
`update_by` varchar(64) DEFAULT NULL COMMENT '更新人',
`version` bigint(20) unsigned NOT NULL COMMENT '版本号',
`del_flag` char(1) NOT NULL COMMENT '删除标记（0：未删除；2：已删除）',
PRIMARY KEY (`id`),
KEY `idx_user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='客户地址表';
-- ----------------------------
-- 6、订单表
-- ----------------------------
DROP TABLE IF EXISTS `t_order`;
CREATE TABLE `t_order` (
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'id',
`user_id` varchar(64) NOT NULL COMMENT '手机端用户id',
`status` tinyint(3) unsigned NOT NULL COMMENT '订单状态（手机端——1：已下上门单；2：
待收空箱；3：已收空箱；4：已发重箱；5：已存储；6：已下提取单；7：待收重箱；8：已收重箱；9：已发
空箱；10：已完成）订单状态（后台端——1：待发空箱；2：已发空箱；3：送达空箱；4：待发重箱；5：已存
储；6：待发重箱；7：已发重箱；8：送达重箱；9：待收空箱；10：已完成）',
`order_code` bigint(20) unsigned NOT NULL COMMENT '订单编号（年月日+6位序列）',
`order_name` varchar(64) NOT NULL COMMENT '订单名称',
`empty_box_order_time` datetime NOT NULL COMMENT '空箱上门下单时间（订单状态为1-5，
显示）',
 `heavy_box_order_time` datetime DEFAULT NULL COMMENT '重箱提取下单时间（订单状态为
6-10，显示）',
`empty_box_call_name` varchar(64) NOT NULL COMMENT '空箱上门姓名（订单状态为1-5，显
示）',
`empty_box_call_phone` varchar(64) NOT NULL COMMENT '空箱上门电话（订单状态为1-5，
显示）',
`empty_box_call_address` varchar(1024) NOT NULL COMMENT '空箱上门地址（订单状态为
1-5，显示）',
`empty_box_call_time` date NOT NULL COMMENT '空箱上门时间（年月日，订单状态为1-5，显
示）',
`empty_box_call_interval` varchar(64) NOT NULL COMMENT '空箱上门时段（如09:00-
13:00，订单状态为1-5，显示）',
`heavy_box_call_name` varchar(64) DEFAULT NULL COMMENT '重箱提取姓名（订单状态为6-
10，显示）',
`heavy_box_call_phone` varchar(64) DEFAULT NULL COMMENT '重箱提取电话（订单状态为
6-10，显示）',
`heavy_box_call_address` varchar(1024) DEFAULT NULL COMMENT '重箱提取地址（订单状
态为6-10，显示）',
`heavy_box_call_time` date DEFAULT NULL COMMENT '重箱提取时间（年月日，订单状态为6-
10，显示）',
`heavy_box_call_interval` varchar(64) DEFAULT NULL COMMENT '重箱提取时段（如
09:00-13:00，订单状态为6-10，显示）',
`box_id` bigint(20) unsigned NOT NULL COMMENT '箱子id',
`box_code` bigint(20) unsigned NOT NULL COMMENT '箱子编号（年月日+6位序列）',
`box_standard` varchar(64) NOT NULL COMMENT '箱子规格（如20*20*20）',
`box_unit_price` bigint(20) unsigned NOT NULL COMMENT '箱子积分单价（每月积分单
价）',
`lease_duration` int(10) unsigned NOT NULL COMMENT '租赁时长（月）',
`total_price` bigint(20) unsigned NOT NULL COMMENT '实付积分',
`sort_no` bigint(20) unsigned DEFAULT NULL COMMENT '序号',
`create_time` datetime NOT NULL COMMENT '创建时间',
`create_by` varchar(64) NOT NULL COMMENT '创建人',
`update_time` datetime DEFAULT NULL COMMENT '更新时间',
`update_by` varchar(64) DEFAULT NULL COMMENT '更新人',
`version` bigint(20) unsigned NOT NULL COMMENT '版本号',
`del_flag` char(1) NOT NULL COMMENT '删除标记（0：未删除；2：已删除）',
`app_del_flag` tinyint(3) unsigned NOT NULL COMMENT '手机端删除标记（0：未删除；2：
已删除）',
`backend_del_flag` tinyint(3) unsigned NOT NULL COMMENT '后台端删除标记（0：未删
除；2：已删除）',
PRIMARY KEY (`id`),
KEY `idx_user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='订单表';
-- ----------------------------
-- 7、订单历史表
-- ----------------------------
DROP TABLE IF EXISTS `t_order_his`;
CREATE TABLE `t_order_his` (
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'id',
`order_id` bigint(20) unsigned NOT NULL COMMENT '订单id',
`user_id` varchar(64) NOT NULL COMMENT '手机端用户id',
`status` tinyint(3) unsigned NOT NULL COMMENT '订单状态（手机端——1：已下上门单；2：
待收空箱；3：已收空箱；4：已发重箱；5：已存储；6：已下提取单；7：待收重箱；8：已收重箱；9：已发
空箱；10：已完成）订单状态（后台端——1：待发空箱；2：已发空箱；3：送达空箱；4：待发重箱；5：已存
储；6：待发重箱；7：已发重箱；8：送达重箱；9：待收空箱；10：已完成）',
`order_code` bigint(20) unsigned NOT NULL COMMENT '订单编号（年月日+6位序列）',
`order_name` varchar(64) NOT NULL COMMENT '订单名称',
 `empty_box_order_time` datetime NOT NULL COMMENT '空箱上门下单时间（订单状态为1-5，
显示）',
`heavy_box_order_time` datetime DEFAULT NULL COMMENT '重箱提取下单时间（订单状态为
6-10，显示）',
`empty_box_call_name` varchar(64) NOT NULL COMMENT '空箱上门姓名（订单状态为1-5，显
示）',
`empty_box_call_phone` varchar(64) NOT NULL COMMENT '空箱上门电话（订单状态为1-5，
显示）',
`empty_box_call_address` varchar(1024) NOT NULL COMMENT '空箱上门地址（订单状态为
1-5，显示）',
`empty_box_call_time` date NOT NULL COMMENT '空箱上门时间（年月日，订单状态为1-5，显
示）',
`empty_box_call_interval` varchar(64) NOT NULL COMMENT '空箱上门时段（如09:00-
13:00，订单状态为1-5，显示）',
`heavy_box_call_name` varchar(64) DEFAULT NULL COMMENT '重箱提取姓名（订单状态为6-
10，显示）',
`heavy_box_call_phone` varchar(64) DEFAULT NULL COMMENT '重箱提取电话（订单状态为
6-10，显示）',
`heavy_box_call_address` varchar(1024) DEFAULT NULL COMMENT '重箱提取地址（订单状
态为6-10，显示）',
`heavy_box_call_time` date DEFAULT NULL COMMENT '重箱提取时间（年月日，订单状态为6-
10，显示）',
`heavy_box_call_interval` varchar(64) DEFAULT NULL COMMENT '重箱提取时段（如
09:00-13:00，订单状态为6-10，显示）',
`box_id` bigint(20) unsigned NOT NULL COMMENT '箱子id',
`box_code` bigint(20) unsigned NOT NULL COMMENT '箱子编号（年月日+6位序列）',
`box_standard` varchar(64) NOT NULL COMMENT '箱子规格（如20*20*20）',
`box_unit_price` bigint(20) unsigned NOT NULL COMMENT '箱子积分单价（每月积分单
价）',
`lease_duration` int(10) unsigned NOT NULL COMMENT '租赁时长（月）',
`total_price` bigint(20) unsigned NOT NULL COMMENT '实付积分',
`sort_no` bigint(20) unsigned DEFAULT NULL COMMENT '序号',
`create_time` datetime NOT NULL COMMENT '创建时间',
`create_by` varchar(64) NOT NULL COMMENT '创建人',
`update_time` datetime DEFAULT NULL COMMENT '更新时间',
`update_by` varchar(64) DEFAULT NULL COMMENT '更新人',
`version` bigint(20) unsigned NOT NULL COMMENT '版本号',
`del_flag` char(1) NOT NULL COMMENT '删除标记（0：未删除；2：已删除）',
`app_del_flag` tinyint(3) unsigned NOT NULL COMMENT '手机端删除标记（0：未删除；2：
已删除）',
`backend_del_flag` tinyint(3) unsigned NOT NULL COMMENT '后台端删除标记（0：未删
除；2：已删除）',
PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='订单历史表';
-- ----------------------------
-- 8、积分记录表
-- ----------------------------
DROP TABLE IF EXISTS `t_point_record`;
CREATE TABLE `t_point_record` (
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'id',
`user_id` varchar(64) NOT NULL COMMENT '手机端用户id',
`way` tinyint(3) unsigned NOT NULL COMMENT '方式（1：注册赠送；2：活动获得；3：积分
使用）',
`points` bigint(20) NOT NULL COMMENT '积分（积分获得为正数，积分使用未负数）',
`advertisement_id` bigint(20) unsigned DEFAULT NULL COMMENT '广告id',
`order_id` bigint(20) unsigned DEFAULT NULL COMMENT '订单id',
`sort_no` bigint(20) unsigned DEFAULT NULL COMMENT '序号',
`create_time` datetime NOT NULL COMMENT '创建时间',
`create_by` varchar(64) NOT NULL COMMENT '创建人',
`update_time` datetime DEFAULT NULL COMMENT '更新时间',
`update_by` varchar(64) DEFAULT NULL COMMENT '更新人',
`version` bigint(20) unsigned NOT NULL COMMENT '版本号',
`del_flag` char(1) NOT NULL COMMENT '删除标记（0：未删除；2：已删除）',
PRIMARY KEY (`id`),
KEY `idx_user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='积分记录表';
```

##### 4.1.2.2 系统表

```sql
-- ----------------------------
-- 1、部门表
-- ----------------------------
drop table if exists sys_dept;
create table sys_dept (
dept_id      bigint(20)    not null auto_increment  comment '部门id',
parent_id     bigint(20)   default 0         comment '父部门
id',
ancestors     varchar(50)   default ''         comment '祖级列
表',
dept_name     varchar(30)   default ''         comment '部门名
称',
order_num     int(4)     default 0         comment '显示顺
序',
leader       varchar(20)   default null        comment '负责人',
phone       varchar(11)   default null        comment '联系电
话',
email       varchar(50)   default null        comment '邮箱',
status       char(1)     default '0'        comment '部门状态
（0正常 1停用）',
del_flag      char(1)     default '0'        comment '删除标志
（0代表存在 2代表删除）',
create_by     varchar(64)   default ''         comment '创建者',
create_time   datetime                  comment '创建时
间',
update_by     varchar(64)   default ''         comment '更新者',
update_time    datetime                  comment '更新时
间',
primary key (dept_id)
) engine=innodb auto_increment=200 comment = '部门表';
-- ----------------------------
-- 初始化-部门表数据
-- ----------------------------
insert into sys_dept values(100,  0,  '0',      '若依科技',  0, '若依',
'15888888888', 'ry@qq.com', '0', '0', 'admin', '2018-03-16 11-33-00', 'ry',
'2018-03-16 11-33-00');
insert into sys_dept values(101,  100, '0,100',    '深圳总公司', 1, '若依',
'15888888888', 'ry@qq.com', '0', '0', 'admin', '2018-03-16 11-33-00', 'ry',
'2018-03-16 11-33-00');
insert into sys_dept values(102,  100, '0,100',    '长沙分公司', 2, '若依',
'15888888888', 'ry@qq.com', '0', '0', 'admin', '2018-03-16 11-33-00', 'ry',
'2018-03-16 11-33-00');
insert into sys_dept values(103,  101, '0,100,101',  '研发部门',  1, '若依',
'15888888888', 'ry@qq.com', '0', '0', 'admin', '2018-03-16 11-33-00', 'ry',
'2018-03-16 11-33-00');
insert into sys_dept values(104,  101, '0,100,101',  '市场部门',  2, '若依',
'15888888888', 'ry@qq.com', '0', '0', 'admin', '2018-03-16 11-33-00', 'ry',
'2018-03-16 11-33-00');
insert into sys_dept values(105,  101, '0,100,101',  '测试部门',  3, '若依',
'15888888888', 'ry@qq.com', '0', '0', 'admin', '2018-03-16 11-33-00', 'ry',
'2018-03-16 11-33-00');
insert into sys_dept values(106,  101, '0,100,101',  '财务部门',  4, '若依',
'15888888888', 'ry@qq.com', '0', '0', 'admin', '2018-03-16 11-33-00', 'ry',
'2018-03-16 11-33-00');
insert into sys_dept values(107,  101, '0,100,101',  '运维部门',  5, '若依',
'15888888888', 'ry@qq.com', '0', '0', 'admin', '2018-03-16 11-33-00', 'ry',
'2018-03-16 11-33-00');
insert into sys_dept values(108,  102, '0,100,102',  '市场部门',  1, '若依',
'15888888888', 'ry@qq.com', '0', '0', 'admin', '2018-03-16 11-33-00', 'ry',
'2018-03-16 11-33-00');
insert into sys_dept values(109,  102, '0,100,102',  '财务部门',  2, '若依',
'15888888888', 'ry@qq.com', '0', '0', 'admin', '2018-03-16 11-33-00', 'ry',
'2018-03-16 11-33-00');
-- ----------------------------
-- 2、用户信息表
-- ----------------------------
drop table if exists sys_user;
create table sys_user (
user_id      bigint(20)    not null auto_increment  comment '用户ID',
dept_id      bigint(20)   default null        comment '部门ID',
user_name     varchar(30)   not null          comment '用户账
号',
nick_name     varchar(30)   not null          comment '用户昵
称',
user_type     varchar(2)   default '00'        comment '用户类型
（00系统用户；01后台端用户；02手机端用户）',
email       varchar(50)   default ''         comment '用户邮
箱',
phonenumber    varchar(11)   default ''         comment '手机号
码',
sex        char(1)     default '0'        comment '用户性别
（0男 1女 2未知）',
avatar       varchar(100)  default ''         comment '头像地
址',
password      varchar(100)  default ''         comment '密码',
status       char(1)     default '0'        comment '帐号状态
（0正常 1停用）',
del_flag      char(1)     default '0'        comment '删除标志
（0代表存在 2代表删除）',
login_ip      varchar(50)   default ''         comment '最后登陆
IP',
login_date     datetime                  comment '最后登陆时
间',
create_by     varchar(64)   default ''         comment '创建者',
create_time    datetime                  comment '创建时
间',
update_by     varchar(64)   default ''         comment '更新者',
 update_time    datetime                  comment '更新时
间',
remark       varchar(500)  default null        comment '备注',
`current_points`  bigint(20)   unsigned NULL        COMMENT '当前积
分',
`version`     bigint(20)   unsigned NULL        COMMENT '版本号',
primary key (user_id)
) engine=innodb auto_increment=100 comment = '用户信息表';
-- ----------------------------
-- 初始化-用户信息表数据
-- ----------------------------
insert into sys_user values(1,  103, 'admin', '若依', '00', 'ry@163.com',
'15888888888', '1', '',
'$2a$10$7JB720yubVSZvUI0rEqK/.VqGOZTH.ulu33dHOiBE8ByOhJIrdAu2', '0', '0',
'127.0.0.1', '2018-03-16 11-33-00', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '管理员', null, null);
insert into sys_user values(2,  105, 'ry',   '若依', '00', 'ry@qq.com',
 '15666666666', '1', '',
'$2a$10$7JB720yubVSZvUI0rEqK/.VqGOZTH.ulu33dHOiBE8ByOhJIrdAu2', '0', '0',
'127.0.0.1', '2018-03-16 11-33-00', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '测试员', null, null);
-- ----------------------------
-- 3、岗位信息表
-- ----------------------------
drop table if exists sys_post;
create table sys_post
(
post_id    bigint(20)    not null auto_increment  comment '岗位ID',
post_code   varchar(64)   not null          comment '岗位编码',
post_name   varchar(50)   not null          comment '岗位名称',
post_sort   int(4)      not null          comment '显示顺序',
status     char(1)     not null          comment '状态（0正常 1
停用）',
create_by   varchar(64)   default ''         comment '创建者',
create_time  datetime                  comment '创建时间',
update_by   varchar(64)   default ''    comment '更新者',
update_time  datetime                  comment '更新时间',
remark     varchar(500)  default null        comment '备注',
primary key (post_id)
) engine=innodb comment = '岗位信息表';
-- ----------------------------
-- 初始化-岗位信息表数据
-- ----------------------------
insert into sys_post values(1, 'ceo',  '董事长',   1, '0', 'admin', '2018-03-16
11-33-00', 'ry', '2018-03-16 11-33-00', '');
insert into sys_post values(2, 'se',  '项目经理',  2, '0', 'admin', '2018-03-16
11-33-00', 'ry', '2018-03-16 11-33-00', '');
insert into sys_post values(3, 'hr',  '人力资源',  3, '0', 'admin', '2018-03-16
11-33-00', 'ry', '2018-03-16 11-33-00', '');
insert into sys_post values(4, 'user', '普通员工',  4, '0', 'admin', '2018-03-16
11-33-00', 'ry', '2018-03-16 11-33-00', '');
-- ----------------------------
-- 4、角色信息表
-- ----------------------------
drop table if exists sys_role;
create table sys_role (
role_id      bigint(20)    not null auto_increment  comment '角色ID',
role_name     varchar(30)   not null          comment '角色名
称',
role_key      varchar(100)   not null          comment '角色权限字
符串',
role_sort     int(4)      not null          comment '显示顺
序',
data_scope     char(1)     default '1'        comment '数据范围
（1：全部数据权限 2：自定数据权限 3：本部门数据权限 4：本部门及以下数据权限）',
status       char(1)     not null          comment '角色状态
（0正常 1停用）',
del_flag      char(1)     default '0'        comment '删除标志
（0代表存在 2代表删除）',
create_by     varchar(64)   default ''         comment '创建者',
create_time    datetime                  comment '创建时
间',
update_by     varchar(64)   default ''         comment '更新者',
update_time    datetime                  comment '更新时
间',
remark       varchar(500)  default null        comment '备注',
primary key (role_id)
) engine=innodb auto_increment=100 comment = '角色信息表';
-- ----------------------------
-- 初始化-角色信息表数据
-- ----------------------------
insert into sys_role values('1', '管理员',  'admin',  1, 1, '0', '0', 'admin',
'2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '管理员');
insert into sys_role values('2', '普通角色', 'common', 2, 2, '0', '0', 'admin',
'2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '普通角色');
-- ----------------------------
-- 5、菜单权限表
-- ----------------------------
drop table if exists sys_menu;
create table sys_menu (
menu_id      bigint(20)    not null auto_increment  comment '菜单ID',
menu_name     varchar(50)   not null          comment '菜单名
称',
parent_id     bigint(20)   default 0         comment '父菜单
ID',
order_num     int(4)     default 0         comment '显示顺
序',
path        varchar(200)  default ''         comment '路由地
址',
component     varchar(255)  default null        comment '组件路
径',
is_frame      int(1)     default 1         comment '是否为外链
（0是 1否）',
menu_type     char(1)     default ''         comment '菜单类型
（M目录 C菜单 F按钮）',
visible      char(1)     default 0         comment '菜单状态
（0显示 1隐藏）',
 perms       varchar(100)  default null        comment '权限标
识',
icon        varchar(100)  default '#'        comment '菜单图
标',
create_by     varchar(64)   default ''         comment '创建者',
create_time    datetime                  comment '创建时
间',
update_by     varchar(64)   default ''         comment '更新者',
update_time    datetime                  comment '更新时
间',
remark       varchar(500)  default ''         comment '备注',
primary key (menu_id)
) engine=innodb auto_increment=2000 comment = '菜单权限表';
-- ----------------------------
-- 初始化-菜单信息表数据
-- ----------------------------
-- 一级菜单
insert into sys_menu values('1', '系统管理', '0', '1', 'system',      null,
 1, 'M', '0', '', 'system',  'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16
11-33-00', '系统管理目录');
insert into sys_menu values('2', '系统监控', '0', '2', 'monitor',      null,
 1, 'M', '0', '', 'monitor',  'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16
11-33-00', '系统监控目录');
insert into sys_menu values('3', '系统工具', '0', '3', 'tool',       null,
 1, 'M', '0', '', 'tool',   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16
11-33-00', '系统工具目录');
insert into sys_menu values('4', '若依官网', '0', '4', 'http://ruoyi.vip', null ,
 0, 'M', '0', '', 'guide',   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16
11-33-00', '若依官网地址');
-- 二级菜单
insert into sys_menu values('100',  '用户管理', '1',  '1', 'user',   
'system/user/index',     1, 'C', '0', 'system:user:list',     'user',  
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '用户管理菜单');
insert into sys_menu values('101',  '角色管理', '1',  '2', 'role',   
'system/role/index',     1, 'C', '0', 'system:role:list',     'peoples', 
  'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '角色管理菜单');
insert into sys_menu values('102',  '菜单管理', '1',  '3', 'menu',   
'system/menu/index',     1, 'C', '0', 'system:menu:list',     'tree-
table',   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '菜单管理
菜单');
insert into sys_menu values('103',  '部门管理', '1',  '4', 'dept',   
'system/dept/index',     1, 'C', '0', 'system:dept:list',     'tree',  
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '部门管理菜单');
insert into sys_menu values('104',  '岗位管理', '1',  '5', 'post',   
'system/post/index',     1, 'C', '0', 'system:post:list',     'post',  
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '岗位管理菜单');
insert into sys_menu values('105',  '字典管理', '1',  '6', 'dict',   
'system/dict/index',     1, 'C', '0', 'system:dict:list',     'dict',  
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '字典管理菜单');
insert into sys_menu values('106',  '参数设置', '1',  '7', 'config',  
'system/config/index',    1, 'C', '0', 'system:config:list',    'edit',  
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '参数设置菜单');
insert into sys_menu values('107',  '通知公告', '1',  '8', 'notice',  
'system/notice/index',    1, 'C', '0', 'system:notice:list',    'message', 
  'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '通知公告菜单');
insert into sys_menu values('108',  '日志管理', '1',  '9', 'log',   
 'system/log/index',     1, 'M', '0', '',             'log',  
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '日志管理菜
单');
insert into sys_menu values('109',  '在线用户', '2',  '1', 'online',  
'monitor/online/index',   1, 'C', '0', 'monitor:online:list',   'online', 
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '在线用户菜单');
insert into sys_menu values('110',  '定时任务', '2',  '2', 'job',   
 'monitor/job/index',     1, 'C', '0', 'monitor:job:list',     'job',  
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '定时任务菜
单');
insert into sys_menu values('111',  '数据监控', '2',  '3', 'druid',  
 'monitor/druid/index',    1, 'C', '0', 'monitor:druid:list',    'druid', 
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '数据监控菜
单');
insert into sys_menu values('112',  '服务监控', '2',  '4', 'server',  
'monitor/server/index',   1, 'C', '0', 'monitor:server:list',   'server', 
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '服务监控菜单');
insert into sys_menu values('113',  '表单构建', '3',  '1', 'build',  
 'tool/build/index',     1 ,'C', '0', 'tool:build:list',     'build', 
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '表单构建菜
单');
insert into sys_menu values('114',  '代码生成', '3',  '2', 'gen',   
 'tool/gen/index',      1, 'C', '0', 'tool:gen:list',      'code',  
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '代码生成菜单');
insert into sys_menu values('115',  '系统接口', '3',  '3', 'swagger', 
 'tool/swagger/index',    1, 'C', '0', 'tool:swagger:list',    'swagger',
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '系统接口菜
单');
-- 三级菜单
insert into sys_menu values('500',  '操作日志', '108', '1', 'operlog', 
 'monitor/operlog/index',   1, 'C', '0', 'monitor:operlog:list',   'form',  
   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '操作日志菜单');
insert into sys_menu values('501',  '登录日志', '108', '2', 'logininfor',
'monitor/logininfor/index', 1, 'C', '0', 'monitor:logininfor:list',
'logininfor',   'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00',
'登录日志菜单');
-- 用户管理按钮
insert into sys_menu values('1001', '用户查询', '100', '1',  '', '', 1, 'F', '0',
'system:user:query',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1002', '用户新增', '100', '2',  '', '', 1, 'F', '0',
'system:user:add',       '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1003', '用户修改', '100', '3',  '', '', 1, 'F', '0',
'system:user:edit',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1004', '用户删除', '100', '4',  '', '', 1, 'F', '0',
'system:user:remove',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1005', '用户导出', '100', '5',  '', '', 1, 'F', '0',
'system:user:export',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1006', '用户导入', '100', '6',  '', '', 1, 'F', '0',
'system:user:import',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1007', '重置密码', '100', '7',  '', '', 1, 'F', '0',
'system:user:resetPwd',    '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- 角色管理按钮
insert into sys_menu values('1008', '角色查询', '101', '1',  '', '', 1, 'F', '0',
'system:role:query',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1009', '角色新增', '101', '2',  '', '', 1, 'F', '0',
'system:role:add',       '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1010', '角色修改', '101', '3',  '', '', 1, 'F', '0',
'system:role:edit',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1011', '角色删除', '101', '4',  '', '', 1, 'F', '0',
'system:role:remove',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1012', '角色导出', '101', '5',  '', '', 1, 'F', '0',
'system:role:export',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- 菜单管理按钮
insert into sys_menu values('1013', '菜单查询', '102', '1',  '', '', 1, 'F', '0',
'system:menu:query',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1014', '菜单新增', '102', '2',  '', '', 1, 'F', '0',
'system:menu:add',       '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1015', '菜单修改', '102', '3',  '', '', 1, 'F', '0',
'system:menu:edit',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1016', '菜单删除', '102', '4',  '', '', 1, 'F', '0',
'system:menu:remove',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- 部门管理按钮
insert into sys_menu values('1017', '部门查询', '103', '1',  '', '', 1, 'F', '0',
'system:dept:query',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1018', '部门新增', '103', '2',  '', '', 1, 'F', '0',
'system:dept:add',       '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1019', '部门修改', '103', '3',  '', '', 1, 'F', '0',
'system:dept:edit',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1020', '部门删除', '103', '4',  '', '', 1, 'F', '0',
'system:dept:remove',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- 岗位管理按钮
insert into sys_menu values('1021', '岗位查询', '104', '1',  '', '', 1, 'F', '0',
'system:post:query',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1022', '岗位新增', '104', '2',  '', '', 1, 'F', '0',
'system:post:add',       '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1023', '岗位修改', '104', '3',  '', '', 1, 'F', '0',
'system:post:edit',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1024', '岗位删除', '104', '4',  '', '', 1, 'F', '0',
'system:post:remove',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1025', '岗位导出', '104', '5',  '', '', 1, 'F', '0',
'system:post:export',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- 字典管理按钮
insert into sys_menu values('1026', '字典查询', '105', '1', '#', '', 1, 'F', '0',
'system:dict:query',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1027', '字典新增', '105', '2', '#', '', 1, 'F', '0',
'system:dict:add',       '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1028', '字典修改', '105', '3', '#', '', 1, 'F', '0',
'system:dict:edit',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1029', '字典删除', '105', '4', '#', '', 1, 'F', '0',
'system:dict:remove',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1030', '字典导出', '105', '5', '#', '', 1, 'F', '0',
'system:dict:export',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- 参数设置按钮
insert into sys_menu values('1031', '参数查询', '106', '1', '#', '', 1, 'F', '0',
'system:config:query',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1032', '参数新增', '106', '2', '#', '', 1, 'F', '0',
'system:config:add',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1033', '参数修改', '106', '3', '#', '', 1, 'F', '0',
'system:config:edit',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1034', '参数删除', '106', '4', '#', '', 1, 'F', '0',
'system:config:remove',    '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1035', '参数导出', '106', '5', '#', '', 1, 'F', '0',
'system:config:export',    '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- 通知公告按钮
insert into sys_menu values('1036', '公告查询', '107', '1', '#', '', 1, 'F', '0',
'system:notice:query',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1037', '公告新增', '107', '2', '#', '', 1, 'F', '0',
'system:notice:add',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1038', '公告修改', '107', '3', '#', '', 1, 'F', '0',
'system:notice:edit',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1039', '公告删除', '107', '4', '#', '', 1, 'F', '0',
'system:notice:remove',    '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- 操作日志按钮
insert into sys_menu values('1040', '操作查询', '500', '1', '#', '', 1, 'F', '0',
'monitor:operlog:query',    '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1041', '操作删除', '500', '2', '#', '', 1, 'F', '0',
'monitor:operlog:remove',   '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1042', '日志导出', '500', '4', '#', '', 1, 'F', '0',
'monitor:operlog:export',   '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- 登录日志按钮
insert into sys_menu values('1043', '登录查询', '501', '1', '#', '', 1, 'F', '0',
'monitor:logininfor:query',  '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1044', '登录删除', '501', '2', '#', '', 1, 'F', '0',
'monitor:logininfor:remove',  '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1045', '日志导出', '501', '3', '#', '', 1, 'F', '0',
'monitor:logininfor:export',  '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- 在线用户按钮
insert into sys_menu values('1046', '在线查询', '109', '1', '#', '', 1, 'F', '0',
'monitor:online:query',    '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1047', '批量强退', '109', '2', '#', '', 1, 'F', '0',
'monitor:online:batchLogout', '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1048', '单条强退', '109', '3', '#', '', 1, 'F', '0',
'monitor:online:forceLogout', '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- 定时任务按钮
insert into sys_menu values('1049', '任务查询', '110', '1', '#', '', 1, 'F', '0',
'monitor:job:query',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1050', '任务新增', '110', '2', '#', '', 1, 'F', '0',
'monitor:job:add',       '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1051', '任务修改', '110', '3', '#', '', 1, 'F', '0',
'monitor:job:edit',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1052', '任务删除', '110', '4', '#', '', 1, 'F', '0',
'monitor:job:remove',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1053', '状态修改', '110', '5', '#', '', 1, 'F', '0',
'monitor:job:changeStatus',  '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1054', '任务导出', '110', '7', '#', '', 1, 'F', '0',
'monitor:job:export',     '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- 代码生成按钮
insert into sys_menu values('1055', '生成查询', '114', '1', '#', '', 1, 'F', '0',
'tool:gen:query',       '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1056', '生成修改', '114', '2', '#', '', 1, 'F', '0',
'tool:gen:edit',        '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1057', '生成删除', '114', '3', '#', '', 1, 'F', '0',
'tool:gen:remove',       '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1058', '导入代码', '114', '2', '#', '', 1, 'F', '0',
'tool:gen:import',       '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1059', '预览代码', '114', '4', '#', '', 1, 'F', '0',
'tool:gen:preview',      '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
insert into sys_menu values('1060', '生成代码', '114', '5', '#', '', 1, 'F', '0',
'tool:gen:code',        '#', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '');
-- ----------------------------
-- 6、用户和角色关联表 用户N-1角色
-- ----------------------------
drop table if exists sys_user_role;
create table sys_user_role (
user_id  bigint(20) not null comment '用户ID',
role_id  bigint(20) not null comment '角色ID',
primary key(user_id, role_id)
) engine=innodb comment = '用户和角色关联表';
-- ----------------------------
-- 初始化-用户和角色关联表数据
-- ----------------------------
insert into sys_user_role values ('1', '1');
insert into sys_user_role values ('2', '2');
-- ----------------------------
-- 7、角色和菜单关联表 角色1-N菜单
-- ----------------------------
drop table if exists sys_role_menu;
create table sys_role_menu (
role_id  bigint(20) not null comment '角色ID',
menu_id  bigint(20) not null comment '菜单ID',
primary key(role_id, menu_id)
) engine=innodb comment = '角色和菜单关联表';
-- ----------------------------
-- 初始化-角色和菜单关联表数据
-- ----------------------------
insert into sys_role_menu values ('2', '1');
insert into sys_role_menu values ('2', '2');
insert into sys_role_menu values ('2', '3');
insert into sys_role_menu values ('2', '4');
insert into sys_role_menu values ('2', '100');
insert into sys_role_menu values ('2', '101');
insert into sys_role_menu values ('2', '102');
insert into sys_role_menu values ('2', '103');
insert into sys_role_menu values ('2', '104');
insert into sys_role_menu values ('2', '105');
insert into sys_role_menu values ('2', '106');
insert into sys_role_menu values ('2', '107');
insert into sys_role_menu values ('2', '108');
insert into sys_role_menu values ('2', '109');
insert into sys_role_menu values ('2', '110');
insert into sys_role_menu values ('2', '111');
insert into sys_role_menu values ('2', '112');
insert into sys_role_menu values ('2', '113');
insert into sys_role_menu values ('2', '114');
insert into sys_role_menu values ('2', '115');
insert into sys_role_menu values ('2', '500');
insert into sys_role_menu values ('2', '501');
insert into sys_role_menu values ('2', '1000');
insert into sys_role_menu values ('2', '1001');
insert into sys_role_menu values ('2', '1002');
insert into sys_role_menu values ('2', '1003');
insert into sys_role_menu values ('2', '1004');
insert into sys_role_menu values ('2', '1005');
insert into sys_role_menu values ('2', '1006');
insert into sys_role_menu values ('2', '1007');
insert into sys_role_menu values ('2', '1008');
insert into sys_role_menu values ('2', '1009');
insert into sys_role_menu values ('2', '1010');
insert into sys_role_menu values ('2', '1011');
insert into sys_role_menu values ('2', '1012');
insert into sys_role_menu values ('2', '1013');
insert into sys_role_menu values ('2', '1014');
insert into sys_role_menu values ('2', '1015');
insert into sys_role_menu values ('2', '1016');
insert into sys_role_menu values ('2', '1017');
insert into sys_role_menu values ('2', '1018');
insert into sys_role_menu values ('2', '1019');
insert into sys_role_menu values ('2', '1020');
insert into sys_role_menu values ('2', '1021');
insert into sys_role_menu values ('2', '1022');
insert into sys_role_menu values ('2', '1023');
insert into sys_role_menu values ('2', '1024');
insert into sys_role_menu values ('2', '1025');
insert into sys_role_menu values ('2', '1026');
insert into sys_role_menu values ('2', '1027');
insert into sys_role_menu values ('2', '1028');
insert into sys_role_menu values ('2', '1029');
insert into sys_role_menu values ('2', '1030');
insert into sys_role_menu values ('2', '1031');
insert into sys_role_menu values ('2', '1032');
insert into sys_role_menu values ('2', '1033');
insert into sys_role_menu values ('2', '1034');
insert into sys_role_menu values ('2', '1035');
insert into sys_role_menu values ('2', '1036');
insert into sys_role_menu values ('2', '1037');
insert into sys_role_menu values ('2', '1038');
insert into sys_role_menu values ('2', '1039');
insert into sys_role_menu values ('2', '1040');
insert into sys_role_menu values ('2', '1041');
insert into sys_role_menu values ('2', '1042');
insert into sys_role_menu values ('2', '1043');
insert into sys_role_menu values ('2', '1044');
insert into sys_role_menu values ('2', '1045');
insert into sys_role_menu values ('2', '1046');
insert into sys_role_menu values ('2', '1047');
insert into sys_role_menu values ('2', '1048');
insert into sys_role_menu values ('2', '1049');
insert into sys_role_menu values ('2', '1050');
insert into sys_role_menu values ('2', '1051');
insert into sys_role_menu values ('2', '1052');
insert into sys_role_menu values ('2', '1053');
insert into sys_role_menu values ('2', '1054');
insert into sys_role_menu values ('2', '1055');
insert into sys_role_menu values ('2', '1056');
insert into sys_role_menu values ('2', '1057');
insert into sys_role_menu values ('2', '1058');
insert into sys_role_menu values ('2', '1059');
insert into sys_role_menu values ('2', '1060');
-- ----------------------------
-- 8、角色和部门关联表 角色1-N部门
-- ----------------------------
drop table if exists sys_role_dept;
create table sys_role_dept (
role_id  bigint(20) not null comment '角色ID',
dept_id  bigint(20) not null comment '部门ID',
primary key(role_id, dept_id)
) engine=innodb comment = '角色和部门关联表';
-- ----------------------------
-- 初始化-角色和部门关联表数据
-- ----------------------------
insert into sys_role_dept values ('2', '100');
insert into sys_role_dept values ('2', '101');
insert into sys_role_dept values ('2', '105');
-- ----------------------------
-- 9、用户与岗位关联表 用户1-N岗位
-- ----------------------------
drop table if exists sys_user_post;
create table sys_user_post
(
user_id  bigint(20) not null comment '用户ID',
post_id  bigint(20) not null comment '岗位ID',
primary key (user_id, post_id)
) engine=innodb comment = '用户与岗位关联表';
-- ----------------------------
-- 初始化-用户与岗位关联表数据
-- ----------------------------
insert into sys_user_post values ('1', '1');
insert into sys_user_post values ('2', '2');
-- ----------------------------
-- 10、操作日志记录
-- ----------------------------
drop table if exists sys_oper_log;
create table sys_oper_log (
oper_id      bigint(20)    not null auto_increment  comment '日志主
键',
title       varchar(50)   default ''         comment '模块标
题',
business_type   int(2)     default 0         comment '业务类型
（0其它 1新增 2修改 3删除）',
method       varchar(100)  default ''         comment '方法名
称',
request_method   varchar(10)   default ''         comment '请求方
式',
operator_type   int(1)     default 0         comment '操作类别
（0其它 1后台用户 2手机端用户）',
oper_name     varchar(50)   default ''         comment '操作人
员',
dept_name     varchar(50)   default ''         comment '部门名
称',
oper_url      varchar(255)  default ''         comment '请求URL',
 oper_ip      varchar(50)   default ''         comment '主机地
址',
oper_location   varchar(255)  default ''         comment '操作地
点',
oper_param     varchar(2000)  default ''         comment '请求参
数',
json_result    varchar(2000)  default ''         comment '返回参
数',
status       int(1)     default 0         comment '操作状态
（0正常 1异常）',
error_msg     varchar(2000)  default ''         comment '错误消
息',
oper_time     datetime                  comment '操作时
间',
primary key (oper_id)
) engine=innodb auto_increment=100 comment = '操作日志记录';
-- ----------------------------
-- 11、字典类型表
-- ----------------------------
drop table if exists sys_dict_type;
create table sys_dict_type
(
dict_id      bigint(20)    not null auto_increment  comment '字典主键',
dict_name     varchar(100)  default ''         comment '字典名称',
dict_type     varchar(100)  default ''         comment '字典类型',
status      char(1)     default '0'        comment '状态（0正常
1停用）',
create_by     varchar(64)   default ''         comment '创建者',
create_time    datetime                  comment '创建时间',
update_by     varchar(64)   default ''         comment '更新者',
update_time    datetime                  comment '更新时间',
remark      varchar(500)  default null        comment '备注',
primary key (dict_id),
unique (dict_type)
) engine=innodb auto_increment=100 comment = '字典类型表';
insert into sys_dict_type values(1,  '用户性别', 'sys_user_sex',     '0',
'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '用户性别列表');
insert into sys_dict_type values(2,  '菜单状态', 'sys_show_hide',    '0',
'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '菜单状态列表');
insert into sys_dict_type values(3,  '系统开关', 'sys_normal_disable',  '0',
'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '系统开关列表');
insert into sys_dict_type values(4,  '任务状态', 'sys_job_status',    '0',
'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '任务状态列表');
insert into sys_dict_type values(5,  '任务分组', 'sys_job_group',    '0',
'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '任务分组列表');
insert into sys_dict_type values(6,  '系统是否', 'sys_yes_no',      '0',
'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '系统是否列表');
insert into sys_dict_type values(7,  '通知类型', 'sys_notice_type',   '0',
'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '通知类型列表');
insert into sys_dict_type values(8,  '通知状态', 'sys_notice_status',  '0',
'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '通知状态列表');
insert into sys_dict_type values(9,  '操作类型', 'sys_oper_type',    '0',
'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '操作类型列表');
insert into sys_dict_type values(10, '系统状态', 'sys_common_status',  '0',
'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '登录状态列表');
-- ----------------------------
-- 12、字典数据表
-- ----------------------------
drop table if exists sys_dict_data;
create table sys_dict_data
(
dict_code     bigint(20)    not null auto_increment  comment '字典编码',
dict_sort     int(4)     default 0         comment '字典排序',
dict_label    varchar(100)  default ''         comment '字典标签',
dict_value    varchar(100)  default ''         comment '字典键值',
dict_type     varchar(100)  default ''         comment '字典类型',
css_class     varchar(100)  default null        comment '样式属性
（其他样式扩展）',
list_class    varchar(100)  default null        comment '表格回显样
式',
is_default    char(1)     default 'N'        comment '是否默认（Y
是 N否）',
status      char(1)     default '0'        comment '状态（0正常
1停用）',
create_by     varchar(64)   default ''         comment '创建者',
create_time    datetime                  comment '创建时间',
update_by     varchar(64)   default ''         comment '更新者',
update_time    datetime                  comment '更新时间',
remark      varchar(500)  default null        comment '备注',
primary key (dict_code)
) engine=innodb auto_increment=100 comment = '字典数据表';
insert into sys_dict_data values(1,  1,  '男',    '0',    'sys_user_sex',
    '',  '',     'Y', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '性别男');
insert into sys_dict_data values(2,  2,  '女',    '1',    'sys_user_sex',
    '',  '',     'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '性别女');
insert into sys_dict_data values(3,  3,  '未知',   '2',    'sys_user_sex', 
   '',  '',     'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '性别未知');
insert into sys_dict_data values(4,  1,  '显示',   '0',    'sys_show_hide',
   '',  'primary', 'Y', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '显示菜单');
insert into sys_dict_data values(5,  2,  '隐藏',   '1',    'sys_show_hide',
   '',  'danger',  'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '隐藏菜单');
insert into sys_dict_data values(6,  1,  '正常',   '0',   
'sys_normal_disable',  '',  'primary', 'Y', '0', 'admin', '2018-03-16 11-33-
00', 'ry', '2018-03-16 11-33-00', '正常状态');
insert into sys_dict_data values(7,  2,  '停用',   '1',   
'sys_normal_disable',  '',  'danger',  'N', '0', 'admin', '2018-03-16 11-33-
00', 'ry', '2018-03-16 11-33-00', '停用状态');
insert into sys_dict_data values(8,  1,  '正常',   '0',    'sys_job_status',
   '',  'primary', 'Y', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '正常状态');
insert into sys_dict_data values(9,  2,  '暂停',   '1',    'sys_job_status',
   '',  'danger',  'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '停用状态');
insert into sys_dict_data values(10, 1,  '默认',   'DEFAULT', 'sys_job_group',
   '',  '',     'Y', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '默认分组');
insert into sys_dict_data values(11, 2,  '系统',   'SYSTEM',  'sys_job_group',
   '',  '',     'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '系统分组');
insert into sys_dict_data values(12, 1,  '是',    'Y',    'sys_yes_no', 
    '',  'primary', 'Y', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '系统默认是');
insert into sys_dict_data values(13, 2,  '否',    'N',    'sys_yes_no', 
    '',  'danger',  'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-
03-16 11-33-00', '系统默认否');
insert into sys_dict_data values(14, 1,  '通知',   '1',   
'sys_notice_type',   '',  'warning', 'Y', '0', 'admin', '2018-03-16 11-33-
00', 'ry', '2018-03-16 11-33-00', '通知');
insert into sys_dict_data values(15, 2,  '公告',   '2',   
'sys_notice_type',   '',  'success', 'N', '0', 'admin', '2018-03-16 11-33-
00', 'ry', '2018-03-16 11-33-00', '公告');
insert into sys_dict_data values(16, 1,  '正常',   '0',   
'sys_notice_status',  '',  'primary', 'Y', '0', 'admin', '2018-03-16 11-33-
00', 'ry', '2018-03-16 11-33-00', '正常状态');
insert into sys_dict_data values(17, 2,  '关闭',   '1',   
'sys_notice_status',  '',  'danger',  'N', '0', 'admin', '2018-03-16 11-33-
00', 'ry', '2018-03-16 11-33-00', '关闭状态');
insert into sys_dict_data values(18, 1,  '新增',   '1',    'sys_oper_type',
   '',  'info',   'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '新增操作');
insert into sys_dict_data values(19, 2,  '修改',   '2',    'sys_oper_type',
   '',  'info',   'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '修改操作');
insert into sys_dict_data values(20, 3,  '删除',   '3',    'sys_oper_type',
   '',  'danger',  'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '删除操作');
insert into sys_dict_data values(21, 4,  '授权',   '4',    'sys_oper_type',
   '',  'primary', 'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '授权操作');
insert into sys_dict_data values(22, 5,  '导出',   '5',    'sys_oper_type',
   '',  'warning', 'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '导出操作');
insert into sys_dict_data values(23, 6,  '导入',   '6',    'sys_oper_type',
   '',  'warning', 'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '导入操作');
insert into sys_dict_data values(24, 7,  '强退',   '7',    'sys_oper_type',
   '',  'danger',  'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '强退操作');
insert into sys_dict_data values(25, 8,  '生成代码', '8',    'sys_oper_type',
   '',  'warning', 'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '生成操作');
insert into sys_dict_data values(26, 9,  '清空数据', '9',    'sys_oper_type',
   '',  'danger',  'N', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-
16 11-33-00', '清空操作');
insert into sys_dict_data values(27, 1,  '成功',   '0',   
'sys_common_status',  '',  'primary', 'N', '0', 'admin', '2018-03-16 11-33-
00', 'ry', '2018-03-16 11-33-00', '正常状态');
insert into sys_dict_data values(28, 2,  '失败',   '1',   
'sys_common_status',  '',  'danger',  'N', '0', 'admin', '2018-03-16 11-33-
00', 'ry', '2018-03-16 11-33-00', '停用状态');
-- ----------------------------
-- 13、参数配置表
-- ----------------------------
drop table if exists sys_config;
create table sys_config (
config_id     int(5)      not null auto_increment  comment '参数主
键',
config_name    varchar(100)  default ''         comment '参数名
称',
config_key     varchar(100)  default ''         comment '参数键
名',
config_value    varchar(500)  default ''         comment '参数键
值',
config_type    char(1)     default 'N'        comment '系统内置
（Y是 N否）',
create_by     varchar(64)   default ''         comment '创建者',
create_time    datetime                  comment '创建时
间',
update_by     varchar(64)   default ''         comment '更新者',
update_time    datetime                  comment '更新时
间',
remark       varchar(500)  default null        comment '备注',
primary key (config_id)
) engine=innodb auto_increment=100 comment = '参数配置表';
insert into sys_config values(1, '主框架页-默认皮肤样式名称', 'sys.index.skinName',
  'skin-blue',   'Y', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-
33-00', '蓝色 skin-blue、绿色 skin-green、紫色 skin-purple、红色 skin-red、黄色 skin-
yellow' );
insert into sys_config values(2, '用户管理-账号初始密码',  
'sys.user.initPassword',  '123456',     'Y', 'admin', '2018-03-16 11-33-00',
'ry', '2018-03-16 11-33-00', '初始化密码 123456' );
insert into sys_config values(3, '主框架页-侧边栏主题',   
'sys.index.sideTheme',   'theme-dark',   'Y', 'admin', '2018-03-16 11-33-00',
'ry', '2018-03-16 11-33-00', '深色主题theme-dark，浅色主题theme-light' );
-- ----------------------------
-- 14、系统访问记录
-- ----------------------------
drop table if exists sys_logininfor;
create table sys_logininfor (
info_id     bigint(20)   not null auto_increment  comment '访问ID',
user_name    varchar(50)  default ''        comment '用户账号',
ipaddr     varchar(50)  default ''        comment '登录IP地址',
login_location varchar(255)  default ''        comment '登录地点',
browser     varchar(50)  default ''        comment '浏览器类型',
os       varchar(50)  default ''        comment '操作系统',
status     char(1)    default '0'        comment '登录状态（0成功
1失败）',
msg       varchar(255)  default ''        comment '提示消息',
login_time   datetime                 comment '访问时间',
primary key (info_id)
) engine=innodb auto_increment=100 comment = '系统访问记录';
-- ----------------------------
-- 15、定时任务调度表
-- ----------------------------
drop table if exists sys_job;
create table sys_job (
job_id        bigint(20)   not null auto_increment  comment '任务ID',
job_name       varchar(64)  default ''         comment '任务名
称',
job_group      varchar(64)  default 'DEFAULT'     comment '任务组
名',
invoke_target    varchar(500)  not null          comment '调用目标字
符串',
cron_expression   varchar(255) default ''         comment 'cron执行
表达式',
misfire_policy    varchar(20)  default '3'        comment '计划执行错
误策略（1立即执行 2执行一次 3放弃执行）',
concurrent      char(1)    default '1'        comment '是否并发执
行（0允许 1禁止）',
status        char(1)    default '0'        comment '状态（0正
常 1暂停）',
create_by      varchar(64)  default ''         comment '创建者',
create_time     datetime                 comment '创建时
间',
update_by      varchar(64)  default ''         comment '更新者',
update_time     datetime                 comment '更新时
间',
remark        varchar(500) default ''         comment '备注信
息',
primary key (job_id, job_name, job_group)
) engine=innodb auto_increment=100 comment = '定时任务调度表';
insert into sys_job values(1, '系统默认（无参）', 'DEFAULT', 'ryTask.ryNoParams', 
   '0/10 * * * * ?', '3', '1', '1', 'admin', '2018-03-16 11-33-00', 'ry',
'2018-03-16 11-33-00', '');
insert into sys_job values(2, '系统默认（有参）', 'DEFAULT',
'ryTask.ryParams(\'ry\')',  '0/15 * * * * ?', '3', '1', '1', 'admin', '2018-03-
16 11-33-00', 'ry', '2018-03-16 11-33-00', '');
insert into sys_job values(3, '系统默认（多参）', 'DEFAULT',
'ryTask.ryMultipleParams(\'ry\', true, 2000L, 316.50D, 100)',  '0/20 * * * * ?',
'3', '1', '1', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '');
-- ----------------------------
-- 16、定时任务调度日志表
-- ----------------------------
drop table if exists sys_job_log;
create table sys_job_log (
job_log_id      bigint(20)   not null auto_increment  comment '任务日志
ID',
job_name       varchar(64)   not null          comment '任务名
称',
job_group      varchar(64)   not null          comment '任务组
名',
invoke_target    varchar(500)  not null          comment '调用目标
字符串',
job_message     varchar(500)               comment '日志信
息',
status        char(1)    default '0'        comment '执行状态
（0正常 1失败）',
 exception_info    varchar(2000) default ''         comment '异常信
息',
create_time     datetime                 comment '创建时
间',
primary key (job_log_id)
) engine=innodb comment = '定时任务调度日志表';
-- ----------------------------
-- 17、通知公告表
-- ----------------------------
drop table if exists sys_notice;
create table sys_notice (
notice_id     int(4)      not null auto_increment  comment '公告ID',
notice_title    varchar(50)   not null          comment '公告标
题',
notice_type    char(1)     not null          comment '公告类型
（1通知 2公告）',
notice_content   varchar(2000)  default null        comment '公告内
容',
status       char(1)     default '0'        comment '公告状态
（0正常 1关闭）',
create_by     varchar(64)   default ''         comment '创建者',
create_time    datetime                  comment '创建时
间',
update_by     varchar(64)   default ''         comment '更新者',
update_time    datetime                  comment '更新时
间',
remark       varchar(255)  default null        comment '备注',
primary key (notice_id)
) engine=innodb auto_increment=10 comment = '通知公告表';
-- ----------------------------
-- 初始化-公告信息表数据
-- ----------------------------
insert into sys_notice values('1', '温馨提醒：2018-07-01 若依新版本发布啦', '2', '新
版本内容', '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '管理
员');
insert into sys_notice values('2', '维护通知：2018-07-01 若依系统凌晨维护', '1', '维
护内容',  '0', 'admin', '2018-03-16 11-33-00', 'ry', '2018-03-16 11-33-00', '管理
员');
-- ----------------------------
-- 18、代码生成业务表
-- ----------------------------
drop table if exists gen_table;
create table gen_table (
table_id      bigint(20)    not null auto_increment  comment '编号',
table_name     varchar(200)  default ''         comment '表名称',
table_comment   varchar(500)  default ''         comment '表描述',
class_name     varchar(100)  default ''         comment '实体类名
称',
tpl_category    varchar(200)  default 'crud'       comment '使用的模板
（crud单表操作 tree树表操作）',
package_name    varchar(100)                comment '生成包路
径',
 module_name    varchar(30)                comment '生成模块
名',
business_name   varchar(30)                comment '生成业务
名',
function_name   varchar(50)                comment '生成功能
名',
function_author  varchar(50)                comment '生成功能作
者',
options      varchar(1000)               comment '其它生成选
项',
create_by     varchar(64)   default ''         comment '创建者',
create_time   datetime                  comment '创建时
间',
update_by     varchar(64)   default ''         comment '更新者',
update_time    datetime                  comment '更新时
间',
remark       varchar(500)  default null        comment '备注',
primary key (table_id)
) engine=innodb auto_increment=1 comment = '代码生成业务表';
-- ----------------------------
-- 19、代码生成业务表字段
-- ----------------------------
drop table if exists gen_table_column;
create table gen_table_column (
column_id     bigint(20)    not null auto_increment  comment '编号',
table_id      varchar(64)                comment '归属表编
号',
column_name    varchar(200)                comment '列名称',
column_comment   varchar(500)                comment '列描述',
column_type    varchar(100)                comment '列类型',
java_type     varchar(500)                comment 'JAVA类
型',
java_field     varchar(200)                comment 'JAVA字段
名',
is_pk       char(1)                  comment '是否主键
（1是）',
is_increment    char(1)                  comment '是否自增
（1是）',
is_required    char(1)                  comment '是否必填
（1是）',
is_insert     char(1)                  comment '是否为插入
字段（1是）',
is_edit      char(1)                  comment '是否编辑字
段（1是）',
is_list      char(1)                  comment '是否列表字
段（1是）',
is_query      char(1)                  comment '是否查询字
段（1是）',
query_type     varchar(200)  default 'EQ'        comment '查询方式
（等于、不等于、大于、小于、范围）',
html_type     varchar(200)                comment '显示类型
（文本框、文本域、下拉框、复选框、单选框、日期控件）',
dict_type     varchar(200)  default ''         comment '字典类
型',
sort        int                    comment '排序',
create_by     varchar(64)   default ''         comment '创建者',
create_time   datetime                  comment '创建时
间',
update_by     varchar(64)   default ''         comment '更新者',
update_time    datetime                  comment '更新时
间',
primary key (column_id)
) engine=innodb auto_increment=1 comment = '代码生成业务表字段';
```

##### 4.1.2.3 定时任务表

```sql
-- ----------------------------
-- 1、存储每一个已配置的 jobDetail 的详细信息
-- ----------------------------
drop table if exists QRTZ_JOB_DETAILS;
create table QRTZ_JOB_DETAILS (
 sched_name      varchar(120)   not null,
 job_name       varchar(200)   not null,
 job_group       varchar(200)   not null,
 description      varchar(250)   null,
 job_class_name    varchar(250)   not null,
 is_durable      varchar(1)    not null,
 is_nonconcurrent   varchar(1)    not null,
 is_update_data    varchar(1)    not null,
 requests_recovery   varchar(1)    not null,
 job_data       blob       null,
 primary key (sched_name,job_name,job_group)
) engine=innodb;
-- ----------------------------
-- 2、 存储已配置的 Trigger 的信息
-- ----------------------------
drop table if exists QRTZ_TRIGGERS;
create table QRTZ_TRIGGERS (
 sched_name      varchar(120)   not null,
 trigger_name     varchar(200)   not null,
 trigger_group     varchar(200)   not null,
 job_name       varchar(200)   not null,
 job_group       varchar(200)   not null,
 description      varchar(250)   null,
 next_fire_time    bigint(13)    null,
 prev_fire_time    bigint(13)    null,
 priority       integer     null,
 trigger_state     varchar(16)   not null,
 trigger_type     varchar(8)    not null,
 start_time      bigint(13)    not null,
 end_time       bigint(13)    null,
 calendar_name     varchar(200)   null,
 misfire_instr    smallint(2)   null,
 job_data       blob       null,
 primary key (sched_name,trigger_name,trigger_group),
 foreign key (sched_name,job_name,job_group) references
QRTZ_JOB_DETAILS(sched_name,job_name,job_group)
) engine=innodb;
-- ----------------------------
-- 3、 存储简单的 Trigger，包括重复次数，间隔，以及已触发的次数
-- ----------------------------
drop table if exists QRTZ_SIMPLE_TRIGGERS;
create table QRTZ_SIMPLE_TRIGGERS (
 sched_name      varchar(120)   not null,
 trigger_name     varchar(200)   not null,
 trigger_group     varchar(200)   not null,
 repeat_count     bigint(7)    not null,
 repeat_interval    bigint(12)    not null,
 times_triggered    bigint(10)    not null,
 primary key (sched_name,trigger_name,trigger_group),
 foreign key (sched_name,trigger_name,trigger_group) references
QRTZ_TRIGGERS(sched_name,trigger_name,trigger_group)
) engine=innodb;
-- ----------------------------
-- 4、 存储 Cron Trigger，包括 Cron 表达式和时区信息
-- ----------------------------
drop table if exists QRTZ_CRON_TRIGGERS;
create table QRTZ_CRON_TRIGGERS (
 sched_name      varchar(120)   not null,
 trigger_name     varchar(200)   not null,
 trigger_group     varchar(200)   not null,
 cron_expression    varchar(200)   not null,
 time_zone_id     varchar(80),
 primary key (sched_name,trigger_name,trigger_group),
 foreign key (sched_name,trigger_name,trigger_group) references
QRTZ_TRIGGERS(sched_name,trigger_name,trigger_group)
) engine=innodb;
-- ----------------------------
-- 5、 Trigger 作为 Blob 类型存储(用于 Quartz 用户用 JDBC 创建他们自己定制的 Trigger 类
型，JobStore 并不知道如何存储实例的时候)
-- ----------------------------
drop table if exists QRTZ_BLOB_TRIGGERS;
create table QRTZ_BLOB_TRIGGERS (
 sched_name      varchar(120)   not null,
 trigger_name     varchar(200)   not null,
 trigger_group     varchar(200)   not null,
 blob_data       blob       null,
 primary key (sched_name,trigger_name,trigger_group),
 foreign key (sched_name,trigger_name,trigger_group) references
QRTZ_TRIGGERS(sched_name,trigger_name,trigger_group)
) engine=innodb;
-- ----------------------------
-- 6、 以 Blob 类型存储存放日历信息， quartz可配置一个日历来指定一个时间范围
-- ----------------------------
drop table if exists QRTZ_CALENDARS;
create table QRTZ_CALENDARS (
 sched_name      varchar(120)   not null,
 calendar_name     varchar(200)   not null,
 calendar       blob       not null,
 primary key (sched_name,calendar_name)
) engine=innodb;
-- ----------------------------
-- 7、 存储已暂停的 Trigger 组的信息
-- ----------------------------
drop table if exists QRTZ_PAUSED_TRIGGER_GRPS;
create table QRTZ_PAUSED_TRIGGER_GRPS (
 sched_name      varchar(120)   not null,
 trigger_group     varchar(200)   not null,
 primary key (sched_name,trigger_group)
) engine=innodb;
-- ----------------------------
-- 8、 存储与已触发的 Trigger 相关的状态信息，以及相联 Job 的执行信息
-- ----------------------------
drop table if exists QRTZ_FIRED_TRIGGERS;
create table QRTZ_FIRED_TRIGGERS (
 sched_name      varchar(120)   not null,
 entry_id       varchar(95)   not null,
 trigger_name     varchar(200)   not null,
 trigger_group     varchar(200)   not null,
 instance_name     varchar(200)   not null,
 fired_time      bigint(13)    not null,
 sched_time      bigint(13)    not null,
 priority       integer     not null,
 state         varchar(16)   not null,
 job_name       varchar(200)   null,
 job_group       varchar(200)   null,
 is_nonconcurrent   varchar(1)    null,
 requests_recovery   varchar(1)    null,
 primary key (sched_name,entry_id)
) engine=innodb;
-- ----------------------------
-- 9、 存储少量的有关 Scheduler 的状态信息，假如是用于集群中，可以看到其他的 Scheduler 实例
-- ----------------------------
drop table if exists QRTZ_SCHEDULER_STATE;
create table QRTZ_SCHEDULER_STATE (
 sched_name      varchar(120)   not null,
 instance_name     varchar(200)   not null,
 last_checkin_time   bigint(13)    not null,
 checkin_interval   bigint(13)    not null,
 primary key (sched_name,instance_name)
) engine=innodb;
-- ----------------------------
-- 10、 存储程序的悲观锁的信息(假如使用了悲观锁)
-- ----------------------------
drop table if exists QRTZ_LOCKS;
create table QRTZ_LOCKS (
 sched_name      varchar(120)   not null,
 lock_name       varchar(40)   not null,
 primary key (sched_name,lock_name)
) engine=innodb;
drop table if exists QRTZ_SIMPROP_TRIGGERS;
create table QRTZ_SIMPROP_TRIGGERS (
 sched_name      varchar(120)   not null,
 trigger_name     varchar(200)   not null,
 trigger_group     varchar(200)   not null,
 str_prop_1      varchar(512)   null,
 str_prop_2      varchar(512)   null,
 str_prop_3      varchar(512)   null,
 int_prop_1      int       null,
 int_prop_2      int       null,
 long_prop_1      bigint      null,
 long_prop_2      bigint      null,
 dec_prop_1      numeric(13,4)  null,
 dec_prop_2      numeric(13,4)  null,
 bool_prop_1      varchar(1)    null,
 bool_prop_2      varchar(1)    null,
 primary key (sched_name,trigger_name,trigger_group),
 foreign key (sched_name,trigger_name,trigger_group) references
QRTZ_TRIGGERS(sched_name,trigger_name,trigger_group)
) engine=innodb;
```

## 4.2 数据表

* 导出markdown表结构

```sql
SELECT '| No | 字段 | 类型 | 空 | 注释 | 备注 |' AS tbl FROM DUAL
UNION ALL
SELECT '| :--: | :--: | :--: | :--: | :--: | :--: |' AS tbl FROM DUAL
UNION ALL
SELECT CONCAT('| ', ORDINAL_POSITION, ' | ',
                    COLUMN_NAME, ' | ',
                    COLUMN_TYPE, ' | ',
                    IS_NULLABLE, ' | ',
                    COLUMN_COMMENT, ' | ',
                    EXTRA, ' |'
             ) AS tbl
  FROM `information_schema`.`COLUMNS`
 WHERE TABLE_SCHEMA = '数据库名'
   AND TABLE_NAME = '表名';
```



# 5.接口设计

## 导出实体结构

```sql
SELECT '| No | 字段 | 类型 | 空 | 注释 | 备注 |' AS tbl FROM DUAL
UNION ALL
SELECT '| :--: | :--: | :--: | :--: | :--: | :--: |' AS tbl FROM DUAL
UNION ALL
SELECT CONCAT('| ', ORDINAL_POSITION, ' | ',
                    COLUMN_NAME, ' | ',
                    COLUMN_TYPE, ' | ',
                    IS_NULLABLE, ' | ',
                    COLUMN_COMMENT, ' | ',
                    EXTRA, ' |'
             ) AS tbl
  FROM `information_schema`.`COLUMNS`
 WHERE TABLE_SCHEMA = '数据库名'
   AND TABLE_NAME = '表名';
```

## 通用返回状态码

| 序号 | 状态码 | 含义                               |
| ---- | ------ | ---------------------------------- |
| 1    | 200    | 操作成功                           |
| 2    | 201    | 对象创建成功                       |
| 3    | 202    | 请求已经被接受                     |
| 4    | 204    | 请求已经执行成功，但是没有返回数据 |
| 5    | 301    | 资源已被移除                       |
| 6    | 303    | 重定向                             |
| 7    | 304    | 资源没有被修改                     |
| 8    | 400    | 参数列表错误（确少，格式不匹配）   |
| 9    | 401    | 未授权                             |
| 10   | 403    | 访问受限，授权过期                 |
| 11   | 404    | 资源、服务未找到                   |
| 12   | 405    | 不允许的http方法                   |
| 13   | 409    | 资源冲突，或者资源被锁             |
| 14   | 415    | 不支持的数据，媒体类型             |
| 15   | 500    | 系统内部错误                       |
| 16   | 501    | 接口未实现                         |

## 通用返回实体（非分页）AjaxResult

* ##### 类型为HashMap<String, Object>

* ##### content-type: application/json;charset=UTF-8

| 序号 | String | Object     | 备注       |
| ---- | ------ | ---------- | ---------- |
| 1    | code   | 消息状态码 | 一定存在   |
| 2    | msg    | 消息内容   | 一定存在   |
| 3    | data   | 数据对象   | 不一定存在 |
| 4    | token  | 令牌       | 不一定存在 |

## 通用返回实体（分页）TableDataInfo

| 序号 | 字段         | 含义       | 备注       |
| ---- | ------------ | ---------- | ---------- |
| 1    | long total   | 总记录数   | 一定存在   |
| 2    | List<?> rows | 列表数据   | 一定存在   |
| 3    | int code     | 消息状态码 | 一定存在   |
| 4    | String msg   | 消息内容   | 不一定存在 |

## 5.1 公共

### 5.1.1 登录

#### **接入方式**

```
common/login
POST
```

#### **请求参数**

| 参数名称 | 参数类型 | 参数含义 | 可为空 |              备注              |
| :------: | :------: | :------: | :----: | :----------------------------: |
| userName |  String  |   账号   |   NO   | 最大长度16，只能包含英文和数字 |
| password |  String  |   密码   |   NO   | 最大长度16，只能包含英文和数字 |
| userType |  String  | 用户类型 |   NO   |   01后台端用户；02手机端用户   |

* #### 案例

```sql
{
    "username": "wangdong",
    "password": "wangdong",
     "userType": "01"
}
{
    "username": "wangdong",
    "password": "wangdong1234",
    "userType": "02"
}
```

#### **响应信息（AjaxResult）**

| 参数名称 | 参数类型 |  参数含义  |    备注    |
| :------: | :------: | :--------: | :--------: |
|   code   |  Object  | 消息状态码 |  一定存在  |
|   msg    |  Object  |  返回消息  |  一定存在  |
|  token   |  Object  |    令牌    | 不一定存在 |

* #### 案例

```sql
{
    "msg": "操作成功",
    "code": 200,
    "token":
"eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6Ijc4ODIyMDhkLTZiNzEtNDc2Yi04MzEwLW
Y1ZWNkMWE5NjY4NCJ9.0AXf5xGist4cXoVmucI45tiu1Rms-
FFs6RXvr17gFWBkzoeNGP5Kv8HGmXfkGpp9cp-Yswtvps8W8Nd_5QuxbQ"
}
{
    "msg": "用户不存在/密码错误",
    "code": 500
}
```

### 5.1.2 获取当前登录人信息

#### 接入方式

```
common/getLoginInfo
GET

高性能接口：从redis中获取，建议获取登录人相关信息，使用此接口
```

#### 请求参数

| 参数名称      | 参数类型             | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | -------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | lRequest<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |

* #### 案例

```
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
```

#### 响应信息（AjaxResult）

| 参数名称    | 参数类型 | 参数含义   | 备注                                                         |
| ----------- | -------- | ---------- | ------------------------------------------------------------ |
| code        | Object   | 消息状态码 | 一定存在                                                     |
| msg         | Object   | 返回信息   | 一定存在                                                     |
| permissions | Object   | 权限集合   | 不集成权限框架无需使用                                       |
| roles       | Object   | 角色集合   | 从此可拿到手机端角色和后台端角色<br/>["app", "backend"]<br/>用于判定当前登录人角色 |
| users       | Object   | 用户对象   | 用户对象 sys_user                                            |

* #### 案例

```sql
{
    "msg": "操作成功",
    "code": 200,
    "permissions": ["*:*:*"],
    "roles": ["admin"],
    "user": {
    "searchValue": null,
    "createBy": "admin",
    "createTime": "2018-03-16 11:33:00",
    "updateBy": null,
    "updateTime": null,
    "remark": "管理员",
    "dataScope": null,
    "params": {},
    "userId": 1,
    "deptId": 103,
    "userName": "admin",
    "nickName": "若依",
    "email": "ry@163.com",
    "phonenumber": "15888888888",
    "sex": "1",
    "avatar": "",
    "password":
    "$2a$10$7JB720yubVSZvUI0rEqK/.VqGOZTH.ulu33dHOiBE8ByOhJIrdAu2",
    "salt": null,
    "status": "0",
    "delFlag": "0",
    "loginIp": "127.0.0.1",
    "loginDate": "2018-03-16T11:33:00.000+0800",
    "dept": {
    "searchValue": null,
    "createBy": null,
    "createTime": null,
    "updateBy": null,
    "updateTime": null,
    "remark": null,
    "dataScope": null,
    "params": {},
    "deptId": 103,
    "parentId": 101,
    "ancestors": null,
    "deptName": "研发部门",
    "orderNum": "1",
    "leader": "若依",
    "phone": null,
    "email": null,
    "status": "0",
    "delFlag": null,
    "parentName": null,
    "children": []
    },
    "roles": [{
    "searchValue": null,
    "createBy": null,
    "createTime": null,
    "updateBy": null,
    "updateTime": null,
    "remark": null,
    "dataScope": "1",
    "params": {},
    "roleId": 1,
    "roleName": "管理员",
    "roleKey": "admin",
    "roleSort": "1",
    "status": "0",
    "delFlag": null,
    "flag": false,
    "menuIds": null,
    "deptIds": null,
    "admin": true
    }],
    "roleIds": null,
    "postIds": null,
    "admin": true
    }
}
{
    "msg":"请求访问：/getInfo，认证失败，无法访问系统资源",
    "code":401
}
```

* #### 案例内实体

```sql
/** 搜索值 */
private String searchValue;
/** 创建者 */
private String createBy;
/** 创建时间 */
@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")
private Date createTime;
/** 更新者 */
private String updateBy;
/** 更新时间 */
@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")
private Date updateTime;
/** 备注 */
private String remark;
/** 数据权限 */
private String dataScope;
/** 开始时间 */
@JsonIgnore
private String beginTime;
/** 结束时间 */
@JsonIgnore
private String endTime;
/** 请求参数 */
private Map<String, Object> params;
/** 用户ID */
@Excel(name = "用户序号", cellType = ColumnType.NUMERIC, prompt = "用户编号")
private Long userId;
/** 部门ID */
@Excel(name = "部门编号", type = Type.IMPORT)
private Long deptId;
/** 用户账号 */
@Excel(name = "登录名称")
private String userName;
/** 用户名称 */
@Excel(name = "用户名称")
private String nickName;
/** 用户邮箱 */
@Excel(name = "用户邮箱")
private String email;
/** 手机号码 */
@Excel(name = "手机号码")
private String phonenumber;
/** 用户性别 */
@Excel(name = "用户性别", readConverterExp = "0=男,1=女,2=未知")
private String sex;
/** 用户头像 */
private String avatar;
/** 密码 */
private String password;
/** 盐加密 */
private String salt;
/** 帐号状态（0正常 1停用） */
@Excel(name = "帐号状态", readConverterExp = "0=正常,1=停用")
private String status;
/** 删除标志（0代表存在 2代表删除） */
private String delFlag;
/** 最后登陆IP */
@Excel(name = "最后登陆IP", type = Type.EXPORT)
private String loginIp;
/** 最后登陆时间 */
@Excel(name = "最后登陆时间", width = 30, dateFormat = "yyyy-MM-dd HH:mm:ss", type
= Type.EXPORT)
private Date loginDate;
/** 部门对象 */
@Excels({
  @Excel(name = "部门名称", targetAttr = "deptName", type = Type.EXPORT),
  @Excel(name = "部门负责人", targetAttr = "leader", type = Type.EXPORT)
})
private SysDept dept;
/** 部门ID */
  private Long deptId;
  /** 父部门ID */
  private Long parentId;
  /** 祖级列表 */
  private String ancestors;
  /** 部门名称 */
  private String deptName;
  /** 显示顺序 */
  private String orderNum;
  /** 负责人 */
  private String leader;
  /** 联系电话 */
  private String phone;
  /** 邮箱 */
  private String email;
  /** 部门状态:0正常,1停用 */
  private String status;
  /** 删除标志（0代表存在 2代表删除） */
  private String delFlag;
  /** 父部门名称 */
  private String parentName;
 
  /** 子部门 */
  private List<SysDept> children = new ArrayList<SysDept>();
/** 角色对象 */
private List<SysRole> roles;
/** 角色ID */
  @Excel(name = "角色序号", cellType = ColumnType.NUMERIC)
  private Long roleId;
  /** 角色名称 */
  @Excel(name = "角色名称")
  private String roleName;
  /** 角色权限 */
  @Excel(name = "角色权限")
  private String roleKey;
  /** 角色排序 */
  @Excel(name = "角色排序")
  private String roleSort;
  /** 数据范围（1：所有数据权限；2：自定义数据权限；3：本部门数据权限；4：本部门及以下数据权
限） */
  @Excel(name = "数据范围", readConverterExp = "1=所有数据权限,2=自定义数据权限,3=本
部门数据权限,4=本部门及以下数据权限")
  private String dataScope;
  /** 角色状态（0正常 1停用） */
  @Excel(name = "角色状态", readConverterExp = "0=正常,1=停用")
  private String status;
  /** 删除标志（0代表存在 2代表删除） */
  private String delFlag;
  /** 用户是否存在此角色标识 默认不存在 */
  private boolean flag = false;
  /** 菜单组 */
  private Long[] menuIds;
  /** 部门组（数据权限） */
  private Long[] deptIds;
/** 角色组 */
private Long[] roleIds;
/** 岗位组 */
private Long[] postIds
```

### 5.1.3 退出登录

#### 接入方式

```
common/logout
POST
```

#### 请求参数

| 参数名称      | 参数类型             | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | -------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | lRequest<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |

* #### 案例

```
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
```

#### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 返回信息   | 一定存在 |

* #### 案例

```sql
{
    "msg": "退出成功",
    "code": 200
}
```

### 5.1.4 上传

##### 接入方式

```
common/upload
POST
```

##### 请求参数

| 参数名称      | 参数类型             | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | -------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | lRequest<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |

* ##### 案例

```
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义       | 备注                            |
| -------- | -------- | -------------- | ------------------------------- |
| code     | Object   | 消息状态码     | 一定存在                        |
| msg      | Object   | 返回信息       | 一定存在                        |
| fileName | Object   | 文件路径       | 一定存在（存入数据库img_url字段 |
| url      | Object   | 完整的请求路径 | 一定存在（做回显用）            |

* ##### 案例

```sql
{
    "msg": "操作成功",
    "code": 200,
      "fileName":
    "/profile/upload/2020/04/20/b93224129f7e9177e37b2c13c96d57b0.jpeg",
      "url": "http://localhost/dev-
    api/profile/upload/2020/04/20/b93224129f7e9177e37b2c13c96d57b0.jpeg"
}
```

## 5.2 手机端

### 5.2.1 注册

#### 接入方式

```
app/regist
POST
```

#### 请求参数

| 参数名称    | 参数类型 | 参数含义                | 可为空 | 备注                                |
| ----------- | -------- | ----------------------- | ------ | ----------------------------------- |
| userName    | String   | 账号                    | NO     | 最大长度16，只能包含英文和<br/>数字 |
| nickName    | String   | 姓名                    | NO     | 最大长度10                          |
| password    | String   | 密码                    | NO     | 最大长度16，只能包含英文和<br/>数字 |
| phonenumber | String   | 手机号                  | NO     | 最大长度11                          |
| email       | String   | 邮箱                    | NO     | 前端正则校验邮箱有效性              |
| sex         | Integer  | 性别（0：男；1：<br/>女 | NO     |                                     |

* #### 案例

```sql
{
    "userName": "wangdong",
    "nickName": "王东",
    "password": "wangdong",
    "phonenumber": "15142815248",
    "email": "249627569@qq.com",
    "sex": "0"
}
{
    "userName": "wangdong1",
    "nickName": "王东",
    "password": "wangdong",
    "phonenumber": "15142815248",
    "email": "249627569@qq.com",
    "sex": "0"
}
{
    "userName": "wangdong1",
    "nickName": "王东",
    "password": "wangdong",
    "phonenumber": "15142815241",
    "email": "249627569@qq.com",
    "sex": "0"
}
{
    "userName": "wangdong1",
    "nickName": "王东",
    "password": "wangdong",
    "phonenumber": "15142815241",
    "email": "249627561@qq.com",
    "sex": "0"
}
```

#### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 返回信息   | 一定存在 |

* #### 案例

```sql
{
    "msg": "注册成功",
    "code": 200
}
{
    "msg": "新增用户'wangdong'失败，登录账号已存在",
    "code": 500
}
{
    "msg": "新增用户'wangdong1'失败，手机号码已存在",
    "code": 500
}
{
    "msg": "新增用户'wangdong1'失败，邮箱账号已存在",
    "code": 500
}
```

### 5.2.2 首页

#### 5.2.2.1 广告列表（非分页）

##### 接入方式

```
app/advertisement/list
GET
```

##### 请求参数

| 参数名称      | 参数类型             | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | -------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | lRequest<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
```

##### 响应信息（AjaxResult）

| 序号 | String | Object     | 备注       |
| ---- | ------ | ---------- | ---------- |
| 1    | code   | 消息状态码 | 一定存在   |
| 2    | msg    | 消息内容   | 一定存在   |
| 3    | data   | List       | 不一定存在 |

* ##### Advertisement

|  No  |    字段     |  类型   |  空  |               注释               | 备注 |
| :--: | :---------: | :-----: | :--: | :------------------------------: | :--: |
|  1   |     id      |  Long   |  NO  |                id                |      |
|  2   |    title    | String  |  NO  |               标题               |      |
|  3   |   content   | String  |  NO  |               内容               |      |
|  4   |   img_url   | String  | YES  |             头像路径             |      |
|  5   |   points    |  Long   |  NO  |             可获积分             |      |
|  6   |  is_enable  | Integer |  NO  |   是否启用（0：启用；1：停用）   |      |
|  7   |   sort_no   | Integer |  NO  |               序号               |      |
|  8   | create_time |  Date   |  NO  |             创建时间             |      |
|  9   |  create_by  | String  |  NO  |              创建人              |      |
|  10  | update_time |  Date   | YES  |             更新时间             |      |
|  11  |  update_by  | String  | YES  |              更新人              |      |
|  12  |   version   |  Long   |  NO  |              版本号              |      |
|  13  |  del_flag   | String  |  NO  | 删除标记（0：未删除；2：已删除） |      |

* ##### 案例

```sql
{
    "msg": "查询成功",
    "code": 200,
      "data":[
       {
          "id": 1,
          "title": "校园卡",
          "content": "校园卡即将发布，尽情期待",
          "imgUrl":
    "/profile/upload/2020/04/20/b93224129f7e9177e37b2c13c96d57b0.jpeg",
          "points": 1000,
          "isEnable": 0,
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": "2018-03-16 11:33:00",
          "updateBy": "wangdong",
          "version": 2,
          "delFlag": 0
       },
       {
          "id": 2,
          "title": "图书卡",
          "content": "图书卡即将发布，尽情期待",
          "imgUrl":
    "/profile/upload/2020/04/20/b93224129f7e9177e37b2c13c96d57b0.jpeg",
          "points": 500,
          "isEnable": 0,
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": null,
          "updateBy": null,
          "version": 1,
          "delFlag": 0
       }
     ]
}
{
    "msg": "查询成功",
    "code": 200,
      "data":[]
}
```

#### 5.2.2.2 广告积分获取

##### 接入方式

```
app/advertisement/points
PUT
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| points        | Long                | 可获积分                  | NO     |                                                              |
| version       | Long                | 当前用户版本号            | NO     |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
{
  "points": 1000,
  "advertisementId": 3
}
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "获取积分成功",
    "code": 200
}
{
    "msg": "获取积分失败",
    "code": 500
}
```

### 5.2.3 空箱预约

#### 5.2.3.1 获取当前用户默认收货地址

##### 接入方式

```
app/box/defaultAddress
GET
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |

* ##### 案例

```
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
```

##### 响应信息（AjaxResult）

| 序号 | 字段 | 含义       | 备注       |
| ---- | ---- | ---------- | ---------- |
| 1    | code | 消息状态码 | 一定存在   |
| 2    | msg  | 消息内容   | 一定存在   |
| 3    | data | Address    | 不一定存在 |

* ##### 案例

```sql
{
    "msg": "查询成功",
    "code": 200,
      "data": {
        "id": 1,
        "userId": 1,
        "contacts": "王东",
        "contactsPhone": "15142815248",
        "province": null,
        "provinceName": null,
        "city": null,
        "cityName": null,
        "area": null,
        "areaName": null,
        "address": "沈阳市大东区XXX",
        "isDefault": 0,
        "sortNo": 1,
        "createTime": "2018-03-16 11:33:00",
        "createBy": "wangdong",
        "updateTime": "2018-03-16 11:33:00",
        "updateBy": "wangdong",
        "version": 2,
        "delFlag": 0
     }
}
{
    "msg": "查询成功",
    "code": 200,
}
```

#### 5.2.3.2 有效箱子规格选择（非分页）

##### 接入方式

```
app/box/standard/select
GET
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |

* ##### 案例

```
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
```

##### 响应信息（AjaxResult）

| 序号 | 字段 | 含义       | 备注       |
| ---- | ---- | ---------- | ---------- |
| 1    | code | 消息状态码 | 一定存在   |
| 2    | msg  | 消息内容   | 一定存在   |
| 3    | data | List       | 不一定存在 |

* ##### BoxStandardSelectVO

|  No  |     字段     |  类型  |  空  |               注释                |      备注      |
| :--: | :----------: | :----: | :--: | :-------------------------------: | :------------: |
|  1   |      id      |  Long  |  NO  |                id                 | auto_increment |
|  2   | boxStandard  | String |  NO  |     箱子规格（如`20*20*20`）      |                |
|  3   | boxUnitPrice |  Long  |  NO  | 箱子积分单价（每月积分单<br/>价） |                |

* ##### 案例

```sql
{
    "msg": "查询成功",
    "code": 200,
      "data":[
       {
          "id": 1,
          "boxStandard": "30*30*30",
          "boxUnitPrice": 200
       },
       {
          "id": 2,
          "boxStandard": "40*40*40",
          "boxUnitPrice": 300
       }
     ]
}
{
    "msg": "查询成功",
    "code": 200,
      "data":[]
}
```

#### 5.2.3.3 预约

##### 接入方式

```
app/box/order
POST
```

##### 请求参数

| 参数名称             | 参数类型            | 参数含义                          | 可为空 | 备注                                                         |
| -------------------- | ------------------- | --------------------------------- | ------ | ------------------------------------------------------------ |
| Authorization        | Request<br/>Headers | 令牌自定义Header<br/>标识         | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| orderName            | Date                | 订单名称                          | NO     |                                                              |
| emptyBoxOrderTime    | String              | 空箱上门下单时间                  | NO     |                                                              |
| emptyBoxCallName     | String              | 空箱上门姓名                      | NO     | 最大长度10                                                   |
| emptyBoxCallPhone    | String              | 空箱上门电话                      | NO     | 最大长度11                                                   |
| emptyBoxCallAddress  | Date                | 空箱上门地址                      | NO     | 最大长度256                                                  |
| emptyBoxCallTime     | String              | 空箱上门时间（年月<br/>日         | NO     |                                                              |
| emptyBoxCallInterval | Long                | 空箱上门时段（如<br/>09:00-13:00  | NO     |                                                              |
| boxStandardId        | String              | 箱子规格id                        | NO     |                                                              |
| boxStandard          | String              | 箱子规格（如<br/>`20*2020`）      | NO     |                                                              |
| boxUnitPrice         | Long                | 箱子积分单价（每月积<br/>分单价） | NO     |                                                              |
| leaseDuration        | Integer             | 租赁时长（月）                    | NO     |                                                              |
| totalPrice           | Long                | 实付积分                          | NO     |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
{
  "orderName":"传家宝",
  "emptyBoxOrderTime":"2018-03-16 11:33:00",
  "emptyBoxCallName":"王东",
  "emptyBoxCallPhone":"15142815248",
  "emptyBoxCallAddress":"沈阳市大东区xxx",
  "emptyBoxCallTime":"2018-03-16",
  "emptyBoxCallInterval":"09:00-11:00",
  "boxStandardId": 1,
  "boxStandard":"30*30*30",
  "boxUnitPrice":200,
  "leaseDuration":12,
  "totalPrice":2400
}
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "预约成功",
    "code": 200
}
{
    "msg": "预约失败",
    "code": 500
}
```

### 5.2.4 我的订单

#### 5.2.4.1 订单列表（分页）

##### 接入方式

```
app/order/list
GET
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| pageNum       | Integer             | 当前页数                  | NO     | 默认页码为1                                                  |
| pageSize      | Integer             | 每页显示记录<br/>数       | NO     | 默认每页显示10条                                             |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

pageNum=1&pageSize=10
```

##### 响应信息（TableDataInfo）

| 序号 | String     | Object     | 备注       |
| ---- | ---------- | ---------- | ---------- |
| 1    | long total | 总记录数   | 一定存在   |
| 2    | List rows  | 列表数据   | 一定存在   |
| 3    | int code   | 消息状态码 | 一定存在   |
| 4    | String msg | 消息内容   | 不一定存在 |

* ##### AppOrderVO

|  No  |         字段         |  类型   |  空  |                             注释                             |          备注           |
| :--: | :------------------: | :-----: | :--: | :----------------------------------------------------------: | :---------------------: |
|  1   |          id          |  Long   |  NO  |                              id                              |     auto_increment      |
|  2   |        userId        | String  |  NO  |                         手机端用户id                         |                         |
|  3   |       nickName       | String  |  NO  |                           客户名称                           |                         |
|  4   |        status        | Integer |  NO  | 1：已下上门单；<br/>2：待收空箱；<br/>3：已收空箱；<br/>4：已发重箱；<br/>5：已存储；<br/>6：已下提取单；<br/>7：待收重箱；<br/>8：已收重箱；<br/>9：已发空箱；<br/>10：已完成 | 手机端对状态的<br/>解读 |
|  5   |      orderCode       |  Long   |  NO  |                  订单编号（年月日+6位序列）                  |                         |
|  6   |      orderName       | String  |  NO  |                           订单名称                           |                         |
|  7   |  emptyBoxOrderTime   |  Date   |  NO  |                   （订单状态为1-5，显示）                    |                         |
|  8   |  heavyBoxOrderTime   |  Date   | YES  |       空箱上门下单时间<br/>（订单状态为1-5，<br/>显示        |                         |
|  9   |   emptyBoxCallName   | String  |  NO  |      重箱提取下单时间<br/>（订单状态为6-<br/>10，显示）      |                         |
|  10  |  emptyBoxCallPhone   | String  |  NO  |        空箱上门姓名（订<br/>单状态为1-5，显<br/>示）         |                         |
|  11  | emptyBoxCallAddress  | String  |  NO  |        空箱上门电话（订<br/>单状态为1-5，显<br/>示）         |                         |
|  12  |   emptyBoxCallTime   |  Date   |  NO  |       空箱上门地址（订<br/>单状态为1-5，显<br/>示））        |                         |
|  13  | emptyBoxCallInterval | String  |  NO  |    空箱上门时间（年<br/>月日，订单状态为<br/>1-5，显示）     |                         |
|  14  |   heavyBoxCallName   | String  | YES  |         重箱提取姓名（订<br/>单状态为6-10，显<br/>示         |                         |
|  15  |  heavyBoxCallPhone   | String  | YES  |        重箱提取电话（订<br/>单状态为6-10，显<br/>示）        |                         |
|  16  | heavyBoxCallAddress  | String  | YES  |        重箱提取地址（订<br/>单状态为6-10，显<br/>示）        |                         |
|  17  |   heavyBoxCallTime   |  Date   | YES  |     重箱提取时间（年<br/>月日，订单状态为<br/>6-10，显示     |                         |
|  18  | heavyBoxCallInterval | String  | YES  |                    订单状态为6-10，显示）                    |                         |
|  19  |        boxId         |  Long   |  NO  |                            箱子id                            |                         |
|  20  |       boxCode        |  Long   |  NO  |                  箱子编号（年月日+6位序列）                  |                         |
|  21  |     boxStandard      | String  |  NO  |                  箱子规格（如<br/>202020）                   |                         |
|  22  |     boxUnitPrice     |  Long   |  NO  |              箱子积分单价（每<br/>月积分单价）               |                         |
|  23  |    leaseDuration     | Integer |  NO  |                        租赁时长（月）                        |                         |
|  24  |      totalPrice      |  Long   |  NO  |                           实付积分                           |                         |
|  25  |        sortNo        |  Long   | YES  |                             序号                             |                         |
|  26  |      createTime      |  Date   |  NO  |                           创建时间                           |                         |
|  27  |       createBy       | String  |  NO  |                            创建人                            |                         |
|  28  |      updateTime      |  Date   | YES  |                           更新时间                           |                         |
|  29  |       updateBy       | String  | YES  |                            更新人                            |                         |
|  30  |       version        |  Long   |  NO  |                            版本号                            |                         |
|  31  |       delFlag        | String  |  NO  |             删除标记（0：未删<br/>除；2：已删除              |                         |
|  32  |      appDelFlag      | Integer |  NO  |        手机端删除标记<br/>（0：未删除；2：<br/>已删除        |                         |
|  33  |    backendDelFlag    | Integer |  NO  |        后台端删除标记<br/>（0：未删除；2：<br/>已删除        |                         |

* ##### 案例

```sql
{
    "msg": "查询成功",
    "code": 200,
    "total": 1,
      "rows":[
       {
          "id": 1,
          "userId": 1,
          "nickName": "王东",
          "status": 1,
          "orderCode": 20200421000001,
          "orderName": "传家宝",
          "emptyBoxOrderTime": "2018-03-16 11:33:00",
          "heavyBoxOrderTime": "2018-03-17 11:33:00",
          "emptyBoxCallName": "王东",
          "emptyBoxCallPhone": "15142815248",
          "emptyBoxCallAddress": "沈阳市大东区xxx",
          "emptyBoxCallTime": "2018-03-16",
          "emptyBoxCallInterval": "09:00-11:00",
          "heavyBoxCallName": "王东",
          "heavyBoxCallPhone": "15142815248",
          "heavyBoxCallAddress": "沈阳市大东区xxx",
          "heavyBoxCallTime": "2019-03-16",
          "heavyBoxCallInterval": "09:00-11:00",
          "boxId": 1,
          "boxCode": 20200421000001,
          "boxStandard": "30*30*30",
          "boxUnitPrice": 200,
          "leaseDuration": 12,
          "totalPrice": 2400,
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": "2018-03-16 11:33:00",
          "updateBy": "wangdong",
          "version": 2,
          "delFlag": 0,
          "appDelFlag": 0,
          "backendDelFlag": 0
       }
     ]
}
{
    "msg": "查询成功",
    "code": 200,
      "total": 0,
      "rows":[]
}
```

#### 5.2.4.2 订单详情

##### 接入方式

```sql
app/order/info/{id}
GET
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| id            | Long                | 订单id                    | NO     |                                                              |

* ##### 案例

```
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
app/order/info/1
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型   | 参数含义   | 备注       |
| -------- | ---------- | ---------- | ---------- |
| code     | Object     | 消息状态码 | 一定存在   |
| msg      | Object     | 返回信息   | 一定存在   |
| data     | AppOrderVO | 订单详情   | 不一定存在 |

* ##### 案例

```sql
{
      "msg":"查询成功",
      "code":200,
      "data":{
        "id":1,
        "userId":1,
        "nickName":"王东",
        "status":1,
        "orderCode":20200421000001,
        "orderName":"传家宝",
        "emptyBoxOrderTime":"2018-03-16 11:33:00",
        "heavyBoxOrderTime":"2018-03-17 11:33:00",
        "emptyBoxCallName":"王东",
        "emptyBoxCallPhone":"15142815248",
        "emptyBoxCallAddress":"沈阳市大东区xxx",
        "emptyBoxCallTime":"2018-03-16",
        "emptyBoxCallInterval":"09:00-11:00",
        "heavyBoxCallName":"王东",
        "heavyBoxCallPhone":"15142815248",
        "heavyBoxCallAddress":"沈阳市大东区xxx",
        "heavyBoxCallTime":"2019-03-16",
        "heavyBoxCallInterval":"09:00-11:00",
        "boxId":1,
        "boxCode":20200421000001,
        "boxStandard":"30*30*30",
        "boxUnitPrice":200,
        "leaseDuration":12,
        "totalPrice":2400,
        "sortNo":1,
        "createTime":"2018-03-16 11:33:00",
        "createBy":"wangdong",
        "updateTime":"2018-03-16 11:33:00",
        "updateBy":"wangdong",
        "version":2,
        "delFlag":0,
        "appDelFlag":0,
        "backendDelFlag":0
     }
}
```

#### 5.2.4.3 订单操作

##### 接入方式

```
app/order/operate/{id}/{operate}
PUT
```

##### 请求参数

|       参数名称       |      参数类型       |             参数含义             | 可为空 |                             备注                             |
| :------------------: | :-----------------: | :------------------------------: | :----: | :----------------------------------------------------------: |
|    Authorization     | Request<br/>Headers |    令牌自定义Header<br/>标识     |   NO   | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
|          id          |        Long         |              订单id              |   NO   |                                                              |
|       operate        |       Integer       |             订单操作             |  YES   | 3：【收取空箱】；<br/>4：【发送重箱】；<br/>6：【预约提取】；<br/>8：【收取重箱】<br/>9：【发送空箱】 |
|  heavyBoxOrderTime   |        Date         |         重箱提取下单时间         |   NO   |               当operate=6，本字<br/>段不可为空               |
|   heavyBoxCallName   |       String        |           重箱提取姓名           |   NO   |               当operate=6，本字<br/>段不可为空               |
|  heavyBoxCallPhone   |       String        |           重箱提取电话           |   NO   |               当operate=6，本字<br/>段不可为空               |
| heavyBoxCallAddress  |       String        |           重箱提取地址           |   NO   |               当operate=6，本字<br/>段不可为空               |
|   heavyBoxCallTime   |        Date         |    重箱提取时间（年月<br/>日     |   NO   |               当operate=6，本字<br/>段不可为空               |
| heavyBoxCallInterval |       String        | 重箱提取时段（如<br/>09:00-13:00 |   NO   |               当operate=6，本字<br/>段不可为空               |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
app/order/operate/1/3
app/order/operate/1/4
app/order/operate/1/6
{
    "heavyBoxOrderTime":"2018-03-16 11:33:00",
    "heavyBoxCallName":"王东",
    "heavyBoxCallPhone":"15142815248",
    "heavyBoxCallAddress":"沈阳市大东区xxx",
    "heavyBoxCallTime":"2018-03-16",
    "heavyBoxCallInterval":"09:00-11:00",
}
app/order/operate/1/8

app/order/operate/1/9
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 返回信息   | 一定存在 |

* 案例

```sql
{
    "msg": "操作成功",
    "code": 200
}
{
    "msg": "操作失败",
    "code": 500
}
{
    "msg": "已有他人优先操作，请刷新后重试",
    "code": 409
}
```

#### 5.2.4.4 订单删除

##### 接入方式

```
app/order/delete/{ids}
DELETE
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| id            | Long                | 订单ID                    | NO     |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

app/order/delete/1
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 返回信息   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "删除成功",
    "code": 200
}
{
    "msg": "删除失败",
    "code": 500
}
```

### 5.2.5 个人中心

#### 5.2.5.1 修改密码

##### 接入方式

```
app/personal/updatePassword
PUT
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| oldPassword   | String              | 旧密码                    | NO     |                                                              |
| newPassword   | String              | 新密码                    | NO     |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

oldPassword=wangdong&newPassword=wangdong123
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "密码修改成功",
    "code": 200
}
{
    "msg": "密码修改失败",
    "code": 500
}
```

### 5.2.6 地址管理

#### 5.2.6.1 地址列表（分页）

##### 接入方式

```
app/address/list
GET
```

##### 请求参数

|   参数名称    |      参数类型       |         参数含义          | 可为空 |                             备注                             |
| :-----------: | :-----------------: | :-----------------------: | :----: | :----------------------------------------------------------: |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 |   NO   | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
|    pageNum    |       Integer       |         当前页数          |   NO   |                         默认页码为1                          |
|   pageSize    |       Integer       |      每页显示记录数       |   NO   |                       默认每页显示10条                       |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

pageNum=1&pageSize=10
```

##### 响应信息（TableDataInfo）

| 序号 | 字段       | 含义       | 备注       |
| ---- | ---------- | ---------- | ---------- |
| 1    | long total | 总记录数   | 一定存在   |
| 2    | List rows  | 列表数据   | 一定存在   |
| 3    | int code   | 消息状态码 | 一定存在   |
| 4    | String msg | 消息内容   | 不一定存在 |

* ##### Address

|  No  |     字段      |  类型   |  空  |               注释               |      备注      |
| :--: | :-----------: | :-----: | :--: | :------------------------------: | :------------: |
|  1   |      id       |  Long   |  NO  |                id                | auto_increment |
|  2   |    userId     |  Long   |  NO  |           手机端用户id           |                |
|  3   |   contacts    | String  |  NO  |              联系人              |                |
|  4   | contactsPhone | String  |  NO  |            联系人电话            |                |
|  5   |   province    | String  | YES  |              省编号              |                |
|  6   | provinceName  | String  | YES  |              省名称              |                |
|  7   |     city      | String  | YES  |              市编号              |                |
|  8   |   cityName    | String  | YES  |              市名称              |                |
|  9   |     area      | String  | YES  |              区编号              |                |
|  10  |   areaName    | String  | YES  |              区名称              |                |
|  11  |    address    | String  |  NO  |             详细地址             |                |
|  12  |   isDefault   | Integer |  NO  |  是否是默认地址（0：是；1：否）  |                |
|  13  |    sortNo     |  Long   | YES  |               序号               |                |
|  14  |  createTime   |  Date   |  NO  |             创建时间             |                |
|  15  |   createBy    | String  |  NO  |              创建人              |                |
|  16  |  updateTime   |  Date   | YES  |             更新时间             |                |
|  17  |   updateBy    | String  | YES  |              更新人              |                |
|  18  |    version    |  Long   |  NO  |              版本号              |                |
|  19  |    delFlag    | String  |  NO  | 删除标记（0：未删除；2：已删除） |                |

* ##### 案例

```sql
{
    "msg": "查询成功",
    "code": 200,
      "total": 2,
      "rows":[
       {
          "id": 1,
          "userId": 1,
          "contacts": "王东",
          "contactsPhone": "15142815248",
          "province": null,
          "provinceName": null,
          "city": null,
          "cityName": null,
          "area": null,
          "areaName": null,
          "address": "沈阳市大东区XXX",
          "isDefault": 0,
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": "2018-03-16 11:33:00",
          "updateBy": "wangdong",
          "version": 2,
          "delFlag": 0
       },
       {
          "id": 2,
          "userId": 1,
          "contacts": "王东1",
          "contactsPhone": "15142815241",
          "province": null,
          "provinceName": null,
          "city": null,
          "cityName": null,
          "area": null,
          "areaName": null,
          "address": "沈阳市浑南区XXX",
          "isDefault": 1,
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": "2018-03-16 11:33:00",
          "updateBy": "wangdong",
          "version": 2,
          "delFlag": 0
       }
     ]
}
{
    "msg": "查询成功",
    "code": 200,
      "total": 0,
      "rows":[]
}
```

#### 5.2.6.2 地址新增

##### 接入方式

```
app/address/create
POST
```

##### 请求参数

|   参数名称    |      参数类型       |              参数含义               | 可为空 |                             备注                             |
| :-----------: | :-----------------: | :---------------------------------: | :----: | :----------------------------------------------------------: |
| Authorization | Request<br/>Headers |      令牌自定义Header<br/>标识      |   NO   | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
|   contacts    |       String        |               联系人                |   NO   |                                                              |
| contactsPhone |       String        |             联系人电话              |   NO   |                                                              |
|    address    |       String        |              详细地址               |   NO   |                                                              |
|   isDefault   |       String        | 是否是默认地址（0：<br/>是；1：否） |   NO   |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
{
    "contacts": "王东",
    "contactsPhone": "15142815248",
    "address": "沈阳市大东区XXX",
    "isDefault": 0
}
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "新增成功",
    "code": 200
}
{
    "msg": "新增失败",
    "code": 500
}
```

#### 5.2.6.3 地址编辑

##### 接入方式

```
app/address/update
POST
```

##### 请求参数

|   参数名称    |      参数类型       |              参数含义               | 可为空 |                             备注                             |
| :-----------: | :-----------------: | :---------------------------------: | :----: | :----------------------------------------------------------: |
| Authorization | Request<br/>Headers |      令牌自定义Header<br/>标识      |   NO   | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
|      id       |        Long         |               地址id                |   NO   |                                                              |
|   contacts    |       String        |               联系人                |   NO   |                                                              |
| contactsPhone |       String        |             联系人电话              |   NO   |                                                              |
|    address    |       String        |              详细地址               |   NO   |                                                              |
|   isDefault   |       String        | 是否是默认地址（0：<br/>是；1：否） |   NO   |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
{
    "id": 1,
    "contacts": "王东",
    "contactsPhone": "15142815248",
    "address": "沈阳市大东区XXX",
    "isDefault": 0
}
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "修改成功",
    "code": 200
}
{
    "msg": "修改失败",
    "code": 500
}
```

#### 5.2.6.4 地址删除

##### 接入方式

```
app/address/delete/{id}
DELETE
```

##### 请求参数

|   参数名称    |      参数类型       |         参数含义          | 可为空 |                             备注                             |
| :-----------: | :-----------------: | :-----------------------: | :----: | :----------------------------------------------------------: |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 |   NO   | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
|      id       |        Long         |     需要删除的地址ID      |   NO   |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

app/address/delete/1
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "删除成功",
    "code": 200
}
{
    "msg": "删除失败",
    "code": 500
}
```

#### 5.2.6.5 设置默认地址 

##### 接入方式

```
app/address/default/{id}
PUT
```

##### 请求参数

|   参数名称    |      参数类型       |                     参数含义                     | 可为空 |                             备注                             |
| :-----------: | :-----------------: | :----------------------------------------------: | :----: | :----------------------------------------------------------: |
| Authorization | Request<br/>Headers |            令牌自定义Header<br/>标识             |   NO   | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
|    operate    |       String        | 操作类型（"enable"：启<br/>用；"disable"：停用） |   NO   |                                                              |
|      id       |        Long         |             需要设置默认地址的地址ID             |   NO   |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

app/address/default/1
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "设置默认成功",
    "code": 200
}
{
    "msg": "设置默认失败",
    "code": 500
}
```

### 5.2.7 积分记录

#### 5.2.7.1 积分记录列表（分页）

##### 接入方式

```
app/point/list
GET
```

##### 请求参数

|   参数名称    |      参数类型       |         参数含义          | 可为空 |                             备注                             |
| :-----------: | :-----------------: | :-----------------------: | :----: | :----------------------------------------------------------: |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 |   NO   | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
|    pageNum    |       Integer       |         当前页数          |   NO   |                         默认页码为1                          |
|   pageSize    |       Integer       |      每页显示记录数       |   NO   |                       默认每页显示10条                       |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

pageNum=1&pageSize=10
```

##### 响应信息（TableDataInfo）

| 序号 | 字段       | 含义       | 备注       |
| ---- | ---------- | ---------- | ---------- |
| 1    | long total | 总记录数   | 一定存在   |
| 2    | List rows  | 列表数据   | 一定存在   |
| 3    | int code   | 消息状态码 | 一定存在   |
| 4    | String msg | 消息内容   | 不一定存在 |

* ##### PointRecord

|  No  |      字段       |  类型   |  空  |                         注释                          |      备注      |
| :--: | :-------------: | :-----: | :--: | :---------------------------------------------------: | :------------: |
|  1   |       id        |  Long   |  NO  |                          id                           | auto_increment |
|  2   |     userId      | String  |  NO  |                     手机端用户id                      |                |
|  3   |       way       | Integer |  NO  | 方式（1：注册赠送；2：<br/>活动获得；3：积分使<br/>用 |                |
|  4   |     points      |  Long   |  NO  |        积分（积分获得为正数，积分使用未负数）         |                |
|  5   | advertisementId |  Long   | YES  |                        广告id                         |                |
|  6   |     orderId     |  Long   | YES  |                        订单id                         |                |
|  7   |     sortNo      |  Long   | YES  |                         序号                          |                |
|  8   |   createTime    |  Date   |  NO  |                       创建时间                        |                |
|  9   |    createBy     | String  |  NO  |                        创建人                         |                |
|  10  |   updateTime    |  Date   | YES  |                       更新时间                        |                |
|  11  |    updateBy     | String  | YES  |                        更新人                         |                |
|  12  |     version     |  Long   |  NO  |                        版本号                         |                |
|  13  |     delFlag     | String  |  NO  |           删除标记（0：未删除；2：已删除）            |                |

* ##### 案例

```sql
{
    "msg": "查询成功",
    "code": 200,
      "total": 3,
      "rows":[
       {
          "id": 1,
          "userId": 12,
          "way": 1,
          "points": 10000,
          "advertisementId": null,
          "orderId": null,
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": null,
          "updateBy": null,
          "version": 1,
          "delFlag": 0
       },
       {
          "id": 2,
          "userId": 12,
          "way": 2,
          "points": 200,
          "advertisementId": 1,
          "orderId": null,
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": null,
          "updateBy": null,
          "version": 1,
          "delFlag": 0
       },
       {
          "id": 3,
          "userId": 12,
          "way": 3,
          "points": -2400,
          "advertisementId": null,
          "orderId": 1,
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": null,
          "updateBy": null,
          "version": 1,
          "delFlag": 0
       }
     ]
}
{
    "msg": "查询成功",
    "code": 200,
      "total": 0,
      "rows":[]
}
```

#### 5.2.7.2 获取当前用户积分

##### 接入方式

```
app/point/select
GET
```

##### 请求参数

|   参数名称    |      参数类型       |         参数含义          | 可为空 |                             备注                             |
| :-----------: | :-----------------: | :-----------------------: | :----: | :----------------------------------------------------------: |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 |   NO   | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
```

##### 响应信息（AjaxResult）

| 序号 | String | Object         | 备注       |
| ---- | ------ | -------------- | ---------- |
| 1    | code   | 消息状态码     | 一定存在   |
| 2    | msg    | 消息内容       | 一定存在   |
| 3    | data   | 当前用户积分值 | 不一定存在 |

* ##### 案例

```sql
{
    "msg": "查询成功",
    "code": 200,
      "data": 10000
}
{
    "msg": "查询成功",
    "code": 200,
}
```

### 5.2.8 意见建议

##### 接入方式

```
app/personal/advice
POST
```

##### 请求参数

|   参数名称    |      参数类型       |         参数含义          | 可为空 |                             备注                             |
| :-----------: | :-----------------: | :-----------------------: | :----: | :----------------------------------------------------------: |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 |   NO   | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
|     title     |       String        |           标题            |   NO   |                                                              |
|    content    |       String        |           内容            |   NO   |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
{
    "title": "优化程序运行速度",
    "content": "优化XXX模块的程序运行速度"
}
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "新增成功",
    "code": 200
}
{
    "msg": "新增失败",
    "code": 500   
}
```

## 5.3 后台端

### 5.3.1 首页

#### 5.3.1.1 修改密码

##### 接入方式

```
backend/home/updatePassword
PUT
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| oldPassword   | String              | 旧密码                    | NO     |                                                              |
| newPassword   | String              | 新密码                    | NO     |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

oldPassword=wangdong&newPassword=wangdong123
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "密码修改成功",
    "code": 200
}
{
    "msg": "密码修改失败",
    "code": 500
}
```

### 5.3.2 用户管理

#### 5.3.2.1 用户列表（分页）

##### 接入方式

```
backend/user/list
GET
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| pageNum       | Integer             | 每页显示记录数            | NO     | 默认页码为1                                                  |
| pageSize      | Integer             | 当前用户版本号            | NO     | 默认每页显示10条                                             |
| searchValue   | String              | 查询参数                  | YES    | 输入姓名、用户帐号、手机号、邮<br/>箱都可进行右模糊查询      |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

pageNum=1&pageSize=10&searchValue=wangdong

pageNum=1&pageSize=10
```

##### 响应信息（TableDataInfo）

| 序号 | 字段       | 含义       | 备注       |
| ---- | ---------- | ---------- | ---------- |
| 1    | long total | 总记录数   | 一定存在   |
| 2    | List rows  | 列表数据   | 一定存在   |
| 3    | int code   | 消息状态码 | 一定存在   |
| 4    | String msg | 消息内容   | 不一定存在 |

* ##### User

|  No  |     字段      |  类型  |  空  |              注释               |      备注      |
| :--: | :-----------: | :----: | :--: | :-----------------------------: | :------------: |
|  1   |    userId     |  Long  |  NO  |             用户ID              | auto_increment |
|  2   |    deptId     |  Long  | YES  |             部门ID              |                |
|  3   |   userName    | String |  NO  |            用户账号             |                |
|  4   |   nickName    | String |  NO  |            用户昵称             |                |
|  5   |   userType    | String | YES  |     用户类型（00系统用户）      |                |
|  6   |     email     | String | YES  |            用户邮箱             |                |
|  7   |  phonenumber  | String | YES  |            手机号码             |                |
|  8   |      sex      | String | YES  |    用户性别（0男 1女 2未知）    |                |
|  9   |    avatar     | String | YES  |            头像地址             |                |
|  10  |   password    | String | YES  |              密码               |                |
|  11  |    status     | String | YES  |     帐号状态（0正常 1停用）     |                |
|  12  |    delFlag    | String | YES  | 删除标志（0代表存在 2代表删除） |                |
|  13  |    loginIp    | String | YES  |           最后登陆IP            |                |
|  14  |   loginDate   |  Date  | YES  |          最后登陆时间           |                |
|  15  |   createBy    | String | YES  |             创建者              |                |
|  16  |  createTime   |  Date  | YES  |            创建时间             |                |
|  17  |   updateBy    | String | YES  |             更新者              |                |
|  18  |  updateTime   |  Date  | YES  |            更新时间             |                |
|  19  |    remark     | String | YES  |              备注               |                |
|  20  | currentPoints |  Long  | YES  |            当前积分             |                |
|  21  |    version    |  Long  | YES  |             版本号              |                |

* ##### 案例

```sql
{
"msg": "查询成功",
"code": 200,
  "total": 2,
   "rows":[
   {
      "userId":1,
      "deptId":103,
      "userName":"admin",
      "nickName":"若依",
      "userType": "01",
      "email":"ry@163.com",
      "phonenumber":"15888888888",
      "sex":"1",
      "avatar":"",
    
 "password":"$2a$10$7JB720yubVSZvUI0rEqK/.VqGOZTH.ulu33dHOiBE8ByOhJIrdAu2",
      "status":"0",
      "delFlag":"0",
      "loginIp":"127.0.0.1",
      "loginDate":"2018-03-16T11:33:00.000+0800",
      "createBy":"admin",
      "createTime":"2018-03-16 11:33:00",
      "updateBy":null,
      "updateTime":null,
      "remark":"管理员",
      "currentPoints": 1000,
      "version": 3
   },
   {
      "userId":2,
      "deptId":104,
      "userName":"wangdong",
      "nickName":"王东",
      "userType": "01",
      "email":"249627569@qq.com",
      "phonenumber":"15142815248",
      "sex":"0",
      "avatar":"",
    
 "password":"$2a$10$7JB720yubVSZvUI0rEqK/.VqGOZTH.ulu33dHOiBE8ByOhJIrdAu2",
      "status":"0",
      "delFlag":"0",
      "loginIp":"127.0.0.1",
      "loginDate":"2018-03-16T11:33:00.000+0800",
      "createBy":"admin",
      "createTime":"2018-03-16 11:33:00",
      "updateBy":null,
      "updateTime":null,
      "remark":"管理员",
      "currentPoints": 1000,
      "version": 3
   }
 ]
}
{
"msg": "查询成功",
"code": 200,
  "total": 0,
  "rows":[]
}
```

#### 5.3.2.2 用户新增

##### 接入方式

```
backend/user/create
POST
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| userName      | String              | 账号                      | NO     | 最大长度16，只能包含英<br/>文和数字                          |
| nickName      | String              | 姓名                      | NO     | 最大长度10                                                   |
| phonenumber   | String              | 手机号                    | NO     | 最大长度11                                                   |
| email         | String              | 邮箱                      | NO     | 前端正则校验邮箱有效性                                       |
| sex           | Integer             | 性别（0：男；<br/>1：女   | NO     |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

{
"userName": "wangdong",
"nickName": "王东",
"phonenumber": "15142815248",
"email": "249627569@qq.com",
"sex": "0"
}
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "新增成功",
    "code": 200
}
{
    "msg": "新增失败",
    "code": 500
}
```

#### 5.3.2.3 用户编辑

##### 接入方式

```
backend/user/update
PUT
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| nickName      | String              | 姓名                      | NO     | 最大长度10                                                   |
| phonenumber   | String              | 手机号                    | NO     | 最大长度11                                                   |
| email         | String              | 邮箱                      | NO     | 前端正则校验邮箱有效性                                       |
| sex           | Integer             | 性别（0：男；<br/>1：女   | NO     |                                                              |

* ##### 案例

##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
{
"userName": "wangdong",
"nickName": "王东",
"phonenumber": "15142815248",
"email": "249627569@qq.com",
"sex": "0"
}
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "修改成功",
    "code": 200
}
{
    "msg": "修改失败",
    "code": 500
}
```

#### 5.3.2.4 用户删除

##### 接入方式

```
backend/user/delete/{userIds}
DELETE
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| userIds       | Long[]              | 需要删除的用户ID数<br/>组 | NO     |                                                              |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

backend/user/delete/101,102,103

backend/user/delete/101
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "删除成功",
    "code": 200
}
{
    "msg": "删除失败",
    "code": 500
}
```

#### 5.3.2.5 用户重置密码

##### 接入方式

```
backend/user/reset/{userIds}
PUT
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                      | 可为空 | 备注                                                         |
| ------------- | ------------------- | ----------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识     | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| userIds       | Long[]              | 需要充值密码的用户ID<br/>数组 | NO     |                                                              |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

backend/user/reset/101,102,103

backend/user/reset/101
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "密码重置成功",
    "code": 200
}
{
    "msg": "密码重置失败",
    "code": 500
}
```

#### 5.3.2.6 用户启用/停用

##### 接入方式

```
backend/user/{operate}/{userIds}
PUT
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                                       | 可为空 | 备注                                                         |
| ------------- | ------------------- | ---------------------------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识                      | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| operate       | String              | 操作类型（"enable"：启<br/>用；"disable"：停用 | NO     |                                                              |
| userIds       | Long[]              | 需要启用/停用的用户ID数组                      | NO     |                                                              |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

backend/user/disable/101,102,103

backend/user/enable/101
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "启用成功",
    "code": 200
}
{
    "msg": "停用成功",
    "code": 200
}
{
    "msg": "启用失败",
    "code": 500
}
{
    "msg": "停用失败",
    "code": 500
}
```

### 5.3.3 客户管理

#### 5.3.3.1 客户列表（分页）

##### 接入方式

```
backend/customer/list
GET
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| pageNum       | Integer             | 当前页数                  | NO     | 默认页码为1                                                  |
| pageSize      | Integer             | 每页显示记录<br/>数       | NO     | 默认每页显示10条                                             |
| searchValue   | String              | 查询参数                  |        | 输入姓名、客户帐号、手机号、邮<br/>箱都可进行右模糊查询      |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

pageNum=1&pageSize=10&searchValue=wangdong

pageNum=1&pageSize=10
```

##### 响应信息（TableDataInfo）

| 序号 | 字段       | 含义       | 备注       |
| ---- | ---------- | ---------- | ---------- |
| 1    | long total | 总记录数   | 一定存在   |
| 2    | List rows  | 列表数据   | 一定存在   |
| 3    | int code   | 消息状态码 | 一定存在   |
| 4    | String msg | 消息内容   | 不一定存在 |

* ##### Customer

|  No  |     字段      |  类型  |  空  |                            注释                            |      备注      |
| :--: | :-----------: | :----: | :--: | :--------------------------------------------------------: | :------------: |
|  1   |    userId     |  Long  |  NO  |                           用户ID                           | auto_increment |
|  2   |    deptId     |  Long  | YES  |                           部门ID                           |                |
|  3   |   userName    | String |  NO  |                          用户账号                          |                |
|  4   |   nickName    | String |  NO  |                          用户昵称                          |                |
|  5   |   userType    | String | YES  | 用户类型（00系统用户；01<br/>后台端用户；02手机端用<br/>户 |                |
|  6   |     email     | String | YES  |                          用户邮箱                          |                |
|  7   |  phonenumber  | String | YES  |                          手机号码                          |                |
|  8   |      sex      | String | YES  |                 用户性别（0男 1女 2未知）                  |                |
|  9   |    avatar     | String | YES  |                          头像地址                          |                |
|  10  |   password    | String | YES  |                            密码                            |                |
|  11  |    status     | String | YES  |                  帐号状态（0正常 1停用）                   |                |
|  12  |    delFlag    | String | YES  |              删除标志（0代表存在 2代表删除）               |                |
|  13  |    loginIp    | String | YES  |                         最后登陆IP                         |                |
|  14  |   loginDate   |  Date  | YES  |                        最后登陆时间                        |                |
|  15  |   createBy    | String | YES  |                           创建者                           |                |
|  16  |  createTime   |  Date  | YES  |                          创建时间                          |                |
|  17  |   updateBy    | String | YES  |                           更新者                           |                |
|  18  |  updateTime   |  Date  | YES  |                          更新时间                          |                |
|  19  |    remark     | String | YES  |                            备注                            |                |
|  20  | currentPoints |  Long  | YES  |                          当前积分                          |                |
|  21  |    version    |  Long  | YES  |                           版本号                           |                |

* ##### 案例

```json
{
    "msg": "查询成功",
    "code": 200,
      "total": 2,
      "rows":[
       {
          "userId":1,
          "deptId":103,
          "userName":"admin",
          "nickName":"若依",
          "userType": "02",
          "email":"ry@163.com",
          "phonenumber":"15888888888",
          "sex":"1",
          "avatar":"",

     "password":"$2a$10$7JB720yubVSZvUI0rEqK/.VqGOZTH.ulu33dHOiBE8ByOhJIrdAu2",
          "status":"0",
          "delFlag":"0",
          "loginIp":"127.0.0.1",
          "loginDate":"2018-03-16T11:33:00.000+0800",
          "createBy":"admin",
          "createTime":"2018-03-16 11:33:00",
          "updateBy":null,
          "updateTime":null,
          "remark":"管理员",
          "currentPoints": 1000,
          "version": 3
       },
       {
          "userId":2,
          "deptId":104,
          "userName":"wangdong",
          "nickName":"王东",
          "userType": "02",
          "email":"249627569@qq.com",
          "phonenumber":"15142815248",
          "sex":"0",
          "avatar":"",

     "password":"$2a$10$7JB720yubVSZvUI0rEqK/.VqGOZTH.ulu33dHOiBE8ByOhJIrdAu2",
          "status":"0",
          "delFlag":"0",
          "loginIp":"127.0.0.1",
          "loginDate":"2018-03-16T11:33:00.000+0800",
          "createBy":"admin",
          "createTime":"2018-03-16 11:33:00",
          "updateBy":null,
          "updateTime":null,
          "remark":"管理员",
          "currentPoints": 1000,
          "version": 3
       }
     ]
}
{
    "msg": "查询成功",
    "code": 200,
      "total": 0,
      "rows":[]
}
```

#### 5.3.3.2 客户新增

##### 接入方式

```
backend/customer/create
POST
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| nickName      | String              | 姓名                      | NO     | 最大长度10                                                   |
| phonenumber   | String              | 手机号                    | NO     | 最大长度11                                                   |
| email         | String              | 邮箱                      | NO     | 前端正则校验邮箱有效性                                       |
| sex           | Integer             | 性别（0：男；<br/>1：女   | NO     |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
{
    "userName": "wangdong",
    "nickName": "王东",
    "phonenumber": "15142815248",
    "email": "249627569@qq.com",
    "sex": "0"
}
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "新增成功",
    "code": 200
}
{
    "msg": "新增失败",
    "code": 500
}
```

#### 5.3.3.3 客户编辑

##### 接入方式

```
backend/customer/update
PUT
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| nickName      | String              | 姓名                      | NO     | 最大长度10                                                   |
| phonenumber   | String              | 手机号                    | NO     | 最大长度11                                                   |
| email         | String              | 邮箱                      | NO     | 前端正则校验邮箱有效性                                       |
| sex           | Integer             | 性别（0：男；<br/>1：女   | NO     |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
{
    "userName": "wangdong",
    "nickName": "王东",
    "phonenumber": "15142815248",
    "email": "249627569@qq.com",
    "sex": "0"
}
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "修改成功",
    "code": 200
}
{
    "msg": "修改失败",
    "code": 500
}
```

#### 5.3.3.4 客户删除

##### 接入方式

```
backend/customer/delete/{userIds}
DELETE
```

##### 请求参数 

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| userIds       | Long[]              | 需要删除的用户ID数组      | NO     |                                                              |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

backend/customer/delete/101,102,103

backend/customer/delete/101
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```json
{
    "msg": "删除成功",
    "code": 200
}
{
    "msg": "删除失败",
    "code": 500
}
```

#### 5.3.3.5 客户重置密码

##### 接入方式

```
backend/customer/reset/{userIds}
PUT
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                      | 可为空 | 备注                                                         |
| ------------- | ------------------- | ----------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识     | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| userIds       | Long[]              | 需要充值密码的用户ID<br/>数组 | NO     |                                                              |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

backend/customer/reset/101,102,103

backend/customer/reset/101
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```json
{
    "msg": "密码重置成功",
    "code": 200
}
{
    "msg": "密码重置失败",
    "code": 500
}
```

#### 5.3.3.6 客户停用/启用

##### 接入方式

```
backend/customer/{operate}/{userIds}
PUT
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                                       | 可为空 | 备注                                                         |
| ------------- | ------------------- | ---------------------------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识                      | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| operate       | String              | 操作类型（"enable"：启<br/>用；"disable"：停用 | NO     |                                                              |
| userIds       | Long[]              | 需要启用/停用的用户ID数组                      | NO     |                                                              |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

backend/customer/disable/101,102,103

backend/customer/enable/101
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```json
{
    "msg": "启用成功",
    "code": 200
}
{
    "msg": "停用成功",
    "code": 200
}
{
    "msg": "启用失败",
    "code": 500
}
{
    "msg": "停用失败",
    "code": 500
}
```

### 5.3.4 箱子规格

#### 5.3.4.1 箱子规格列表（分页）

##### 接入方式

```
backend/box/standard/list
GET
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| pageNum       | Integer             | 当前页数                  | NO     | 默认页码为1                                                  |
| pageSize      | Integer             | 每页显示记录<br/>数       | NO     | 默认每页显示10条                                             |
| searchValue   | String              | 查询参数                  | YES    | 箱子规格可进行右模糊<br/>查询                                |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

pageNum=1&pageSize=10&searchValue=30*30*30

pageNum=1&pageSize=10
```

##### 响应信息（TableDataInfo）

| 序号 | 字段       | 含义       | 备注       |
| ---- | ---------- | ---------- | ---------- |
| 1    | long total | 总记录数   | 一定存在   |
| 2    | List rows  | 列表数据   | 一定存在   |
| 3    | int code   | 消息状态码 | 一定存在   |
| 4    | String msg | 消息内容   | 不一定存在 |

* ##### BoxStandardVO

|  No  |      字段       |  类型  |  空  |               注释               |            备注             |
| :--: | :-------------: | :----: | :--: | :------------------------------: | :-------------------------: |
|  1   |       id        |  Long  |  NO  |                id                |       auto_increment        |
|  2   |   boxStandard   | String |  NO  |     箱子规格（如`20*20*20`）     |                             |
|  3   |  boxUnitPrice   |  Long  |  NO  | 箱子积分单价（每月积分单<br/>价  |                             |
|  4   |     remark      | String |  NO  |               备注               |                             |
|  5   |     sortNo      |  Long  | YES  |               序号               |                             |
|  6   |   createTime    |  Date  |  NO  |             创建时间             |                             |
|  7   |    createBy     | String |  NO  |              创建人              |                             |
|  8   |   updateTime    |  Date  | YES  |             更新时间             |                             |
|  9   |    updateBy     | String | YES  |              更新人              |                             |
|  10  |     version     |  Long  |  NO  |              版本号              |                             |
|  11  |     delFlag     | String |  NO  | 删除标记（0：未删除；2：已删除） |                             |
|  12  |   totalNumber   |  Long  |  NO  |              总数量              | 关联箱子信息表计<br/>算得出 |
|  13  |   usedNumber    |  Long  |  NO  |            已使用数量            | 关联箱子信息表计<br/>算得出 |
|  14  | inventoryNumber |  Long  |  NO  |             库存数量             | 关联箱子信息表计<br/>算得出 |
|  15  |    useRatio     | String |  NO  |             使用比例             | 关联箱子信息表计<br/>算得出 |

* ##### 案例

```sql
{
"msg": "查询成功",
"code": 200,
  "total": 2,
  "rows":[
   {
      "id": 1,
      "boxStandard": "30*30*30",
      "boxUnitPrice": 200,
      "remark": "当前箱子成本比较低",
      "sortNo": 1,
      "createTime": "2018-03-16 11:33:00",
      "createBy": "wangdong",
      "updateTime": "2018-03-16 11:33:00",
      "updateBy": "wangdong",
      "version": 2,
      "delFlag": 0,
      "totalNumber": 1000,
      "usedNumber": 900,
      "inventoryNumber": 100,
      "useRatio": "90%"
   },
   {
      "id": 2,
      "boxStandard": "40*40*40",
      "boxUnitPrice": 300,
      "remark": "当前箱子成本低",
      "sortNo": 1,
      "createTime": "2018-03-16 11:33:00",
      "createBy": "wangdong",
      "updateTime": "2018-03-16 11:33:00",
      "updateBy": "wangdong",
      "version": 2,
      "delFlag": 0,
      "totalNumber": 100,
      "usedNumber": 80,
      "inventoryNumber": 20,
      "useRatio": "80%"
   }
 ]
}
{
"msg": "查询成功",
"code": 200,
  "total": 0,
  "rows":[]
}
```

#### 5.3.4.2 箱子规格新增

##### 接入方式

```
backend/box/standard/create
POST
```

##### 请求参数

| 参数名称        | 参数类型            | 参数含义                             | 可为空 | 备注                                                         |
| --------------- | ------------------- | ------------------------------------ | ------ | ------------------------------------------------------------ |
| Authorization   | Request<br/>Headers | 令牌自定义Header<br/>标识            | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| boxStandard     | String              | 箱子规格（如<br/>`20*20*20` ）       | NO     | 如果箱子规格已存在，对应积<br/>分也相同，则向箱子信息表插<br/>入【库存数量】条数据 |
| boxUnitPrice    | Long                | 箱子积分单价<br/>（每月积分单<br/>价 | NO     | 大于等于0的整数                                              |
| inventoryNumber | Long                | 库存数量                             | NO     | 大于等于0的整数                                              |
| remark          | String              | 备注                                 | NO     | 最大长度256                                                  |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
{
  "boxStandard": "30*30*30",
  "boxUnitPrice": 200,
  "inventoryNumber": 100,
  "remark": "30*30*30规格箱，添加100库存"
}
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 返回信息   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "新增成功",
    "code": 200
}
{
    "msg": "新增失败",
    "code": 500
```

#### 5.3.4.3 箱子规格删除

##### 接入方式

```
backend/box/standard/delete/{ids}
DELETE
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                      | 可为空 | 备注                                                         |
| ------------- | ------------------- | ----------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识     | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| ids           | Long[]              | 需要删除的箱子规格ID<br/>数组 | NO     |                                                              |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

backend/box/standard/delete/1,2,3,4

backend/box/standard/delete/1
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 返回信息   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "删除成功",
    "code": 200
}
{
    "msg": "删除失败",
    "code": 500
}
```

#### 5.3.4.4. 箱子规格下拉列表（非分页）

##### 接入方式

```
backend/box/standard/select
GET
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
```

##### 响应信息（AjaxResult）

| 序号 | String | Object     | 备注       |
| ---- | ------ | ---------- | ---------- |
| 1    | code   | 消息状态码 | 一定存在   |
| 2    | msg    | 返回信息   | 一定存在   |
| 3    | data   | List       | 不一定存在 |

* ##### BoxStandardSelect

|  No  |     字段     |  类型  |  空  |              注释               | 备注 |
| :--: | :----------: | :----: | :--: | :-----------------------------: | :--: |
|  1   | boxStandard  | String |  NO  |    箱子规格（如`20*20*20`）     |      |
|  2   | boxUnitPrice |  Long  |  NO  | 箱子积分单价（每月积分单<br/>价 |      |

* ##### 案例

```json
{
    "msg": "查询成功",
    "code": 200,
      "data":[
       {
          "boxStandard": "30*30*30",
          "boxUnitPrice": 200
       },
       {
          "boxStandard": "40*40*40",
          "boxUnitPrice": 300
       }
     ]
}
{
    "msg": "查询成功",
    "code": 200,
      "data":[]
}
```

### 5.3.5 箱子信息

#### 5.3.5.1 箱子信息列表（分页）

##### 接入方式

```
backend/box/info/list
GET
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| pageNum       | Integer             | 当前页数                  | NO     | 默认页码为1                                                  |
| pageSize      | Integer             | 每页显示记录<br/>数       | NO     | 默认每页显示10条                                             |
| searchValue   | String              | 查询参数                  | YES    | 箱子规格可进行右模糊<br/>查询                                |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

pageNum=1&pageSize=10&searchValue=30*30*30

pageNum=1&pageSize=10
```

##### 响应信息（TableDataInfo）

| 序号 | 字段       | 含义       | 备注       |
| ---- | ---------- | ---------- | ---------- |
| 1    | long total | 总记录数   | 一定存在   |
| 2    | List rows  | 列表数据   | 一定存在   |
| 3    | int code   | 消息状态码 | 一定存在   |
| 4    | String msg | 消息内容   | 不一定存在 |

* ##### BoxInfoVO

|  No  |     字段     |  类型   |  空  |                 注释                  |      备注      |
| :--: | :----------: | :-----: | :--: | :-----------------------------------: | :------------: |
|  1   |      id      |  Long   |  NO  |                  id                   | auto_increment |
|  2   |   boxCode    |  Long   |  NO  |      箱子编号（年月日+6位序列）       |                |
|  3   | boxStandard  | String  |  NO  |        箱子规格（如20*20*20）         |                |
|  4   | boxUnitPrice |  Long   |  NO  |    箱子积分单价（每月积分单<br/>价    |                |
|  5   |    usedBy    |  Long   | YES  |                使用人                 |                |
|  6   |  usedByName  | String  |  NO  |         使用人姓名（用户名称          |    可能为空    |
|  7   |    isUsed    | Integer | YES  | 是否被使用（0：未使用；<br/>1：已使用 |                |
|  8   |    remark    | String  |  NO  |                 备注                  |                |
|  9   |    sortNo    |  Long   | YES  |                 序号                  |                |
|  10  |  createTime  |  Date   |  NO  |               创建时间                |                |
|  11  |   createBy   | String  |  NO  |                创建人                 |                |
|  12  |  updateTime  |  Date   | YES  |               更新时间                |                |
|  13  |   updateBy   | String  | YES  |                更新人                 |                |
|  14  |   version    |  Long   |  NO  |                版本号                 |                |
|  15  |   delFlag    | String  |  NO  |   删除标记（0：未删除；2：已删除）    |                |

* ##### 案例

```sql
{
    "msg": "查询成功",
    "code": 200,
      "total": 2,
      "rows":[
       {
          "id": 1,
          "boxCode": 20200421000001,
          "boxStandard": "30*30*30",
          "boxUnitPrice": 200,
          "usedBy": 1,
          "usedByName": "王东",
          “isUsed”: 1,
          "remark": "当前箱子成本比较低",
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": "2018-03-16 11:33:00",
          "updateBy": "wangdong",
          "version": 2,
          "delFlag": 0
       },
       {
          "id": 2,
          "boxCode": 20200421000002,
          "boxStandard": "40*40*40",
          "boxUnitPrice": 300,
          "usedBy": null,
          "usedByName": null,
          “isUsed”: 0,
          "remark": "当前箱子成本低",
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": null,
          "updateBy": null,
          "version": 1,
          "delFlag": 0
       }
     ]
}
{
    "msg": "查询成功",
    "code": 200,
      "total": 0,
      "rows":[]
}
```

#### 5.3.5.2 箱子信息新增

##### 接入方式

```
backend/box/iofo/list
POST
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                             | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------------------ | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识            | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| boxStandard   | String              | 箱子规格（如<br/>`20*20*20` ）       | NO     | 如果箱子规格已存在，对应积<br/>分也相同，则向箱子信息表插<br/>入【库存数量】条数据 |
| boxUnitPrice  | Long                | 箱子积分单价<br/>（每月积分单<br/>价 | NO     | 大于等于0的整数                                              |
| remark        | String              | 备注                                 | NO     | 最大长度256                                                  |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
{
  "boxStandard": "30*30*30",
  "boxUnitPrice": 200,
  "remark": "30*30*30规格箱，添加100库存"
}
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 返回信息   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "新增成功",
    "code": 200
}
{
    "msg": "新增失败",
    "code": 500
```

#### 5.3.5.3 箱子信息删除

##### 接入方式

```
backend/box/info/delete/{ids}
DELETE
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                      | 可为空 | 备注                                                         |
| ------------- | ------------------- | ----------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识     | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| ids           | Long[]              | 需要删除的箱子信息ID<br/>数组 | NO     |                                                              |

* ##### 案例

```sql
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
backend/box/info/delete/1,2,3,4
backend/box/info/delete/1
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 返回信息   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "删除成功",
    "code": 200
}
{
    "msg": "删除失败",
    "code": 500
}
```

### 5.3.6 订单管理

#### 5.3.6.1 订单列表（分页）

##### 接入方式

```
backend/order/list
GET
```

##### 请求参数

| 参数名称               | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ---------------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization          | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| pageNum                | Integer             | 当前页数                  | NO     | 默认页码为1                                                  |
| pageSize               | Integer             | 每页显示记录<br/>数       | NO     | 默认每页显示10条                                             |
| nickName               | String              | 客户名称                  | NO     | 右模糊查询                                                   |
| status                 | Integer             | 订单状态                  | NO     | 1：待发空箱；<br/>2：已发空箱；<br/>3：送达空箱；<br/>4：待发重箱；<br/>5：已存储；<br/>6：待发重箱；<br/>7：已发重箱；<br/>8：送达重箱；<br/>9：待收空箱；<br/>10：已完成 |
| emptyBoxOrderTimeStart | String              | 空箱上门下单开<br/>始时间 | NO     | 日期控件                                                     |
| emptyBoxOrderTimeEnd   | String              | 空箱上门下单结<br/>束时间 | NO     | 日期控件                                                     |
| heavyBoxOrderTimeStar  | String              | 重箱提取下单开<br/>始时间 | NO     | 日期控件                                                     |
| heavyBoxOrderTimeEnd   | String              | 重箱提取下单结<br/>束时间 | NO     | 日期控件                                                     |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

pageNum=1&pageSize=10&nickName=王东&status=1&emptyBoxOrderTimeStart=2020-04-
02&emptyBoxOrderTimeEnd=2020-04-03&heavyBoxOrderTimeStart=2020-04-
02&heavyBoxOrderTimeEnd=2020-04-03

pageNum=1&pageSize=10
```

##### 响应信息（TableDataInfo）

| 序号 | String     | Object     | 备注       |
| ---- | ---------- | ---------- | ---------- |
| 1    | long total | 总记录数   | 一定存在   |
| 2    | List rows  | 列表数据   | 一定存在   |
| 3    | int code   | 消息状态码 | 一定存在   |
| 4    | String msg | 消息内容   | 不一定存在 |

* ##### BackendOrderVO

|  No  |         字段         |  类型   |  空  |                             注释                             |          备注           |
| :--: | :------------------: | :-----: | :--: | :----------------------------------------------------------: | :---------------------: |
|  1   |          id          |  Long   |  NO  |                              id                              |     auto_increment      |
|  2   |        userId        | String  |  NO  |                         手机端用户id                         |                         |
|  3   |       nickName       | String  |  NO  |                           客户名称                           |                         |
|  4   |        status        | Integer |  NO  | 1：待发空箱；<br/>2：已发空箱；<br/>3：送达空箱；<br/>4：待发重箱；<br/>5：已存储；<br/>6：待发重箱；<br/>7：已发重箱；<br/>8：送达重箱；<br/>9：待收空箱；<br/>10：已完成 | 后台端对状态的<br/>解读 |
|  5   |      orderCode       |  Long   |  NO  |                  订单编号（年月日+6位序列）                  |                         |
|  6   |      orderName       | String  |  NO  |                           订单名称                           |                         |
|  7   |  emptyBoxOrderTime   |  Date   |  NO  |                   （订单状态为1-5，显示）                    |                         |
|  8   |  heavyBoxOrderTime   |  Date   | YES  |       空箱上门下单时间<br/>（订单状态为1-5，<br/>显示        |                         |
|  9   |   emptyBoxCallName   | String  |  NO  |      重箱提取下单时间<br/>（订单状态为6-<br/>10，显示）      |                         |
|  10  |  emptyBoxCallPhone   | String  |  NO  |        空箱上门姓名（订<br/>单状态为1-5，显<br/>示）         |                         |
|  11  | emptyBoxCallAddress  | String  |  NO  |        空箱上门电话（订<br/>单状态为1-5，显<br/>示）         |                         |
|  12  |   emptyBoxCallTime   |  Date   |  NO  |       空箱上门地址（订<br/>单状态为1-5，显<br/>示））        |                         |
|  13  | emptyBoxCallInterval | String  |  NO  |    空箱上门时间（年<br/>月日，订单状态为<br/>1-5，显示）     |                         |
|  14  |   heavyBoxCallName   | String  | YES  |         重箱提取姓名（订<br/>单状态为6-10，显<br/>示         |                         |
|  15  |  heavyBoxCallPhone   | String  | YES  |        重箱提取电话（订<br/>单状态为6-10，显<br/>示）        |                         |
|  16  | heavyBoxCallAddress  | String  | YES  |        重箱提取地址（订<br/>单状态为6-10，显<br/>示）        |                         |
|  17  |   heavyBoxCallTime   |  Date   | YES  |     重箱提取时间（年<br/>月日，订单状态为<br/>6-10，显示     |                         |
|  18  | heavyBoxCallInterval | String  | YES  |                    订单状态为6-10，显示）                    |                         |
|  19  |        boxId         |  Long   |  NO  |                            箱子id                            |                         |
|  20  |       boxCode        |  Long   |  NO  |                  箱子编号（年月日+6位序列）                  |                         |
|  21  |     boxStandard      | String  |  NO  |                  箱子规格（如<br/>202020）                   |                         |
|  22  |     boxUnitPrice     |  Long   |  NO  |              箱子积分单价（每<br/>月积分单价）               |                         |
|  23  |    leaseDuration     | Integer |  NO  |                        租赁时长（月）                        |                         |
|  24  |      totalPrice      |  Long   |  NO  |                           实付积分                           |                         |
|  25  |        sortNo        |  Long   | YES  |                             序号                             |                         |
|  26  |      createTime      |  Date   |  NO  |                           创建时间                           |                         |
|  27  |       createBy       | String  |  NO  |                            创建人                            |                         |
|  28  |      updateTime      |  Date   | YES  |                           更新时间                           |                         |
|  29  |       updateBy       | String  | YES  |                            更新人                            |                         |
|  30  |       version        |  Long   |  NO  |                            版本号                            |                         |
|  31  |       delFlag        | String  |  NO  |             删除标记（0：未删<br/>除；2：已删除              |                         |
|  32  |      appDelFlag      | Integer |  NO  |        手机端删除标记<br/>（0：未删除；2：<br/>已删除        |                         |
|  33  |    backendDelFlag    | Integer |  NO  |        后台端删除标记<br/>（0：未删除；2：<br/>已删除        |                         |

* ##### 案例

```sql
{
    "msg": "查询成功",
    "code": 200,
      "total": 1,
      "rows":[
       {
          "id": 1,
          "userId": 1,
          "nickName": "王东",
          "status": 1,
          "orderCode": 20200421000001,
          "orderName": "传家宝",
          "emptyBoxOrderTime": "2018-03-16 11:33:00",
          "heavyBoxOrderTime": "2018-03-17 11:33:00",
          "emptyBoxCallName": "王东",
          "emptyBoxCallPhone": "15142815248",
          "emptyBoxCallAddress": "沈阳市大东区xxx",
          "emptyBoxCallTime": "2018-03-16",
          "emptyBoxCallInterval": "09:00-11:00",
          "heavyBoxCallName": "王东",
          "heavyBoxCallPhone": "15142815248",
          "heavyBoxCallAddress": "沈阳市大东区xxx",
          "heavyBoxCallTime": "2019-03-16",
          "heavyBoxCallInterval": "09:00-11:00",
          "boxId": 1,
          "boxCode": 20200421000001,
          "boxStandard": "30*30*30",
          "boxUnitPrice": 200,
          "leaseDuration": 12,
          "totalPrice": 2400,
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": "2018-03-16 11:33:00",
          "updateBy": "wangdong",
          "version": 2,
          "delFlag": 0,
          "appDelFlag": 0,
          "backendDelFlag": 0
       }
     ]
}
{
    "msg": "查询成功",
    "code": 200,
      "total": 0,
      "rows":[]
}
```

#### 5.3.6.2 订单详情

##### 接入方式

```
backend/order/info/{id}
GET
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| id            | Long                | 订单id                    | NO     |                                                              |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

backend/order/info/1
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型       | 参数含义   | 备注       |
| -------- | -------------- | ---------- | ---------- |
| code     | Object         | 消息状态码 | 一定存在   |
| msg      | Object         | 返回信息   | 一定存在   |
| data     | BackendOrderVO | 订单详情   | 不一定存在 |

* 案例

```json
{
      "msg":"查询成功",
      "code":200,
      "data":{
        "id":1,
        "userId":1,
        "nickName":"王东",
        "status":1,
        "orderCode":20200421000001,
        "orderName":"传家宝",
        "emptyBoxOrderTime":"2018-03-16 11:33:00",
        "heavyBoxOrderTime":"2018-03-17 11:33:00",
        "emptyBoxCallName":"王东",
        "emptyBoxCallPhone":"15142815248",
        "emptyBoxCallAddress":"沈阳市大东区xxx",
        "emptyBoxCallTime":"2018-03-16",
        "emptyBoxCallInterval":"09:00-11:00",
        "heavyBoxCallName":"王东",
        "heavyBoxCallPhone":"15142815248",
        "heavyBoxCallAddress":"沈阳市大东区xxx",
        "heavyBoxCallTime":"2019-03-16",
        "heavyBoxCallInterval":"09:00-11:00",
        "boxId":1,
        "boxCode":20200421000001,
        "boxStandard":"30*30*30",
        "boxUnitPrice":200,
        "leaseDuration":12,
        "totalPrice":2400,
        "sortNo":1,
        "createTime":"2018-03-16 11:33:00",
        "createBy":"wangdong",
        "updateTime":"2018-03-16 11:33:00",
        "updateBy":"wangdong",
        "version":2,
        "delFlag":0,
        "appDelFlag":0,
        "backendDelFlag":0
     }
}
```

#### 5.3.6.3 订单操作

##### 接入方式

```
backend/order/operate/{id}/{operate}
PUT
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| id            | Long                | 订单id                    | NO     |                                                              |
| operate       | Integer             | 订单操作                  | No     | 2：【发送空箱】；<br/>5：【收取重箱】；<br/>7：【发送重箱】；<br/>10：【收取空箱】 |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

backend/order/operate/1/2

backend/order/operate/1/5

backend/order/operate/1/7

backend/order/operate/1/10
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 返回信息   | 一定存在 |

* 案例

```sql
{
    "msg": "操作成功",
    "code": 200
}
{
    "msg": "操作失败",
    "code": 500
}
{
    "msg": "已有他人优先操作，请刷新后重试",
    "code": 409
}
```

#### 5.3.6.4 订单删除

##### 接入方式

```
backend/order/delete/{ids}
DELETE
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| id            | Long                | 需要删除的订单ID数<br/>组 | NO     |                                                              |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

backend/order/delete/1,2,3,4

backend/order/delete/1
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 返回信息   | 一定存在 |

* ##### 案例

```json
{
    "msg": "删除成功",
    "code": 200
}
{
    "msg": "删除失败",
    "code": 500
}
```

### 5.3.7 广告管理

#### 5.3.7.1 广告列表（分页）

##### 接入方式

```
backend/advertisement/list
GET
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| pageNum       | Integer             | 当前页数                  | NO     | 默认页码为1                                                  |
| pageSize      | Integer             | 每页显示记录<br/>数       | NO     | 默认每页显示10条                                             |
| searchValue   | String              | 查询参数                  | YES    | 广告标题、奖励积分、图片地址都<br/>可进行右模糊查询          |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

pageNum=1&pageSize=10&searchValue=校园卡

pageNum=1&pageSize=10
```

##### 响应信息（TableDataInfo）

| 序号 | 字段       | 含义       | 备注       |
| ---- | ---------- | ---------- | ---------- |
| 1    | long total | 总记录数   | 一定存在   |
| 2    | List rows  | 列表数据   | 一定存在   |
| 3    | int code   | 消息状态码 | 一定存在   |
| 4    | String msg | 消息内容   | 不一定存在 |

* ##### Advertisement

|  No  |    字段    |  类型   |  空  |               注释               |      备注      |
| :--: | :--------: | :-----: | :--: | :------------------------------: | :------------: |
|  1   |     id     |  Long   |  NO  |                id                | auto_increment |
|  2   |   title    | String  |  NO  |               标题               |                |
|  3   |  content   | String  |  NO  |               内容               |                |
|  4   |   imgUrl   | String  | YES  |             头像路径             |                |
|  5   |   points   |  Long   |  NO  |             可获积分             |                |
|  6   |  isEnable  | Integer |  NO  |   是否启用（0：启用；1：停用）   |                |
|  7   |   sortNo   |  Long   |  NO  |               序号               |                |
|  8   | createTime |  Date   |  NO  |             创建时间             |                |
|  9   |  createBy  | String  |  NO  |              创建人              |                |
|  10  | updateTime |  Date   | YES  |             更新时间             |                |
|  11  |  updateBy  | String  | YES  |              更新人              |                |
|  12  |  version   |  Long   |  NO  |              版本号              |                |
|  13  |  delFlag   | String  |  NO  | 删除标记（0：未删除；2：已删除） |                |

* ##### 案例

```sql
{
    "msg": "查询成功",
    "code": 200,
      "total": 2,
      "rows":[
       {
          "id": 1,
          "title": "校园卡",
          "content": "校园卡即将发布，尽情期待",
          "imgUrl":
    "/profile/upload/2020/04/20/b93224129f7e9177e37b2c13c96d57b0.jpeg",
          "points": 1000,
          "isEnable": 0,
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": "2018-03-16 11:33:00",
          "updateBy": "wangdong",
          "version": 2,
          "delFlag": 0
       },
       {
          "id": 2,
          "title": "图书卡",
          "content": "图书卡即将发布，尽情期待",
          "imgUrl":
    "/profile/upload/2020/04/20/b93224129f7e9177e37b2c13c96d57b0.jpeg",
          "points": 500,
          "isEnable": 0,
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": null,
          "updateBy": null,
          "version": 1,
          "delFlag": 0
       }
     ]
}
{
    "msg": "查询成功",
    "code": 200,
      "total": 0,
      "rows":[]
}
```

#### 5.3.7.2 广告新增

##### 接入方式

```
backend/advertisement/create
POST
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| title         | String              | 标题                      | NO     | 最大长度20                                                   |
| content       | String              | 内容                      | NO     | 最大长度100                                                  |
| points        | Long                | 奖励积分                  | NO     | 正整数                                                       |
| imgUrl        | String              | 图片地址                  | NO     | 上传接口返回（取fileName）                                   |
| sortNo        | Integer             | 序号                      | NO     | 显示顺序，正整数                                             |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
{
  "title": "校园卡",
  "content": "校园卡即将发布，尽情期待",
  "imgUrl":
"/profile/upload/2020/04/20/b93224129f7e9177e37b2c13c96d57b0.jpeg",
  "points": 1000,
  "sortNo": 1
 }
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```json
{
    "msg": "新增成功",
    "code": 200
}
{
    "msg": "新增失败",
    "code": 500
}
```

#### 5.3.7.3. 广告编辑

##### 接入方式

```
backend/advertisement/update
PUT
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
|               | Long                | 广告id                    | NO     |                                                              |
| title         | String              | 标题                      | NO     | 最大长度20                                                   |
| content       | String              | 内容                      | NO     | 最大长度100                                                  |
| points        | Long                | 奖励积分                  | NO     | 正整数                                                       |
| imgUrl        | String              | 图片地址                  | NO     | 上传接口返回（取fileName）                                   |
| sortNo        | Integer             | 序号                      | NO     | 显示顺序，正整数                                             |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ
{
  "id": 1,
  "title": "校园卡",
  "content": "校园卡即将发布，尽情期待",
  "imgUrl":
"/profile/upload/2020/04/20/b93224129f7e9177e37b2c13c96d57b0.jpeg",
  "points": 1000,
  "sortNo": 2
}
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "修改成功",
    "code": 200
}
{
    "msg": "修改失败",
    "code": 500
}
```

#### 5.3.7.4 广告删除

##### 接入方式

```
backend/advertisement/delete/{ids}
DELETE
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| ids           | Long[]              | 需要删除的广告ID数组      | NO     |                                                              |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

backend/advertisement/delete/1,2,3,4

backend/advertisement/delete/1
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "删除成功",
    "code": 200
}
{
    "msg": "删除失败",
    "code": 500
}
```

#### 5.3.7.5 广告停用/启用

##### 接入方式

```
backend/advertisement/{operate}/{ids}
PUT
```

##### 请求参数

| 参数名称      | 参数类型            | 参数含义                                  | 可为空 | 备注                                                         |
| ------------- | ------------------- | ----------------------------------------- | ------ | ------------------------------------------------------------ |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识                 | NO     | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
| operate       | String              | 操作类型（"enable"：启用；"disable"：停用 | NO     |                                                              |
| ids           | Long[]              | 需要启用/停用的广告ID数组                 | NO     |                                                              |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

backend/advertisement/disable/1,2,3,4

backend/advertisement/enable/2
```

##### 响应信息（AjaxResult）

| 参数名称 | 参数类型 | 参数含义   | 备注     |
| -------- | -------- | ---------- | -------- |
| code     | Object   | 消息状态码 | 一定存在 |
| msg      | Object   | 消息内容   | 一定存在 |

* ##### 案例

```sql
{
    "msg": "启用成功",
    "code": 200
}
{
    "msg": "停用成功",
    "code": 200
}
{
    "msg": "启用失败",
    "code": 500
}
{
    "msg": "停用失败",
    "code": 500
}
```

### 5.3.8 意见建议

#### 5.3.8.1 意见建议列表（分页）

##### 接入方式

```
backend/advice/list
GET
```

##### 请求参数

|   参数名称    |      参数类型       |         参数含义          | 可为空 |                             备注                             |
| :-----------: | :-----------------: | :-----------------------: | :----: | :----------------------------------------------------------: |
| Authorization | Request<br/>Headers | 令牌自定义Header<br/>标识 |   NO   | 内容必须以“Bearer ”<br/>开头<br/>（注意有个空格），<br/>拼接登录取得的token |
|    pageNum    |       Integer       |         当前页数          |   NO   |                         默认页码为1                          |
|   pageSize    |       Integer       |      每页显示记录数       |   NO   |                       默认每页显示10条                       |
|  searchValue  |       String        |         查询参数          |  YES   |           提交人，意见标题都可进行右<br/>模糊查询            |

* ##### 案例

```json
Authorization: Bearer
eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6ImI0MjIyYzYyLTNmOWItNGJlNy1hMzViLTc
3OGQ4YTc2OWY0MiJ9.F2eYebDUX4J1R1kGuzszpRKLqB7apgw0VzI77xtE3ZpXwLDKicYmm-
lKcPzRAZOui0Wk_nz_SS_2cxO9_5jWsQ

pageNum=1&pageSize=10&searchValue=王东

pageNum=1&pageSize=10
```

##### 响应信息（TableDataInfo）

| 序号 |    字段    |    含义    |    备注    |
| :--: | :--------: | :--------: | :--------: |
|  1   | long total |  总记录数  |  一定存在  |
|  2   | List rows  |  列表数据  |  一定存在  |
|  3   |  int code  | 消息状态码 |  一定存在  |
|  4   | String msg |  消息内容  | 不一定存在 |

* ##### AdviceVO

|  No  |    字段    |  类型  |  空  |               注释               |      备注      |
| :--: | :--------: | :----: | :--: | :------------------------------: | :------------: |
|  1   |     id     |  Long  |  NO  |                id                | auto_increment |
|  2   |   userId   | String |  NO  |           手机端用户id           |                |
|  3   |   title    | String |  NO  |               标题               |                |
|  4   |  content   | String |  NO  |               内容               |                |
|  5   |   sortNo   |  Long  | YES  |               序号               |                |
|  6   | createTime |  Date  |  NO  |             创建时间             |                |
|  7   |  createBy  | String |  NO  |              创建人              |                |
|  8   | updateTime |  Date  | YES  |             更新时间             |                |
|  9   |  updateBy  | String | YES  |              更新人              |                |
|  10  |  version   |  Long  |  NO  |              版本号              |                |
|  11  |  delFlag   | String |  NO  | 删除标记（0：未删除；2：已删除） |                |

* ##### 案例

```sql
{
    "msg": "查询成功",
    "code": 200,
      "total": 2,
      "rows":[
       {
          "id": 1,
          "userId": 12,
          "nickName": "王东",
          "title": "优化程序运行速度",
          "content": "优化XXX模块的程序运行速度",
          "sortNo": 1,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": null,
          "updateBy": null,
          "version": 1,
          "delFlag": 0
       },
       {
          "id": 2,
          "userId": 12,
          "nickName": "王东",
          "title": "优化app运行速度",
          "content": "优化appXXX模块的程序运行速度",
           "sortNo": 2,
          "createTime": "2018-03-16 11:33:00",
          "createBy": "wangdong",
          "updateTime": null,
          "updateBy": null,
          "version": 1,
          "delFlag": 0
       }
     ]
}
{
    "msg": "查询成功",
    "code": 200,
      "total": 0,
      "rows":[]
}
```

# 储留箱订单流转状态

* 订单状态

  * 对于订单而言，只有1-10共计10个状态，而对于这十个状态，后台端和手机端分别有着不同的解读

  * 订单存在两个有效标识，后台端有效标识，手机端有效标识

  * 后台端收取空箱后，要同时标记箱子状态（设置使用状态为未使用，清空）

  | 订单状态编码 | 手机端对应状态 | 手机端按钮 | 后台端对应状态 | 后台端按钮 |
  | :----------: | :------------: | :--------: | :------------: | :--------: |
  |      1       |   已下上门单   |     -      |    待发空箱    |  发送空箱  |
  |      2       |    代收空箱    |  收取空箱  |    已发空箱    |     -      |
  |      3       |    已收空箱    |  发送重箱  |    送达空箱    |     -      |
  |      4       |    已发重箱    |     -      |    代收重箱    |  收取重箱  |
  |      5       |     已储存     |  预约提取  |     已存储     |     -      |
  |      6       |   已下提取单   |     -      |    待发重箱    |  发送重箱  |
  |      7       |    代收重箱    |  收取重箱  |    已发重箱    |     -      |
  |      8       |    已收重箱    |  发送空箱  |    送达重箱    |     -      |
  |      9       |    已发空箱    |     -      |    代收空箱    |  收取空箱  |
  |      10      |     已完成     |  删除订单  |     已完成     |     -      |

* 空箱上门订单状态时序图


```sequence
title: 空箱上门订单状态时序图 
participant 手机端用户 as A
participant 服务器 as B
participant 后台端用户 as C
note over A:点击【空箱预约】，并提交订单
A->B:提交上门空箱预约
note over B:生成订单同时扣除积分
note over B:状态【1】 
B->A:手机端获取订单状态\n（手机提交订单后，加载订单列表）
note over A:状态【1】--【已下单上门】\n页面无按钮 
B->C:后台端获取订单状态\n（手机端提交订单后，加载订单列表） 
note over C:状态【1】--【待发空箱】\n页面按钮【发送空箱】
C->B:后台端点击【发送空箱】按钮
note over B:状态【2】
B->C:后台端获取订单状态\n（后台端发送空箱后，重新加载订单列表）
note over C:状态【2】--已发空箱\n页面无按钮
B->A:手机端获取订单状态\n（后台端发送空箱后，加载订单列表）
note over A:状态【2】--待收空箱\n页面按钮【收取空箱】
A->B:手机端点击【收取空箱】按钮
note over B:状态【3】
B->A:手机端获取订单状态\n（手机端收取空箱后，加载订单列表）
note over A:状态【3】--已收空箱\n页面按钮【发送重箱】
B->C:后台端获取订单状态\n（手机端收取空箱后，重新加载订单列表）
note over C:状态【3】--送达空箱\n页面无按钮
A->B:放入物品\n手机端点击【发送重箱】按钮
note over B:状态【4】
B->A:手机端获取订单状态\n（手机端发送重箱后，加载订单列表）
note over A:状态【4】--已发重箱\n页面无按钮
B->C:后台端获取订单状态\n（手机端发送重箱后，重新加载订单列表）
note over C:状态【4】--待收空箱\n页面按钮【收取重箱】
C->B:后台端点击【收取重箱】按钮
note over B:状态【5】
B->C:后台端获取订单状态\n（后台端收取重箱后，重新加载订单列表）
note over C:状态【5】--已存储\n页面无按钮
B->A:手机端获取订单状态\n（后台端收取重箱后，加载订单列表）
note over A:状态【5】--已存储\n页面按钮【预约提取】
```

  *  重箱提取订单状态时序图

```sequence
title:重箱提取订单状态时序图
participant 手机端用户 as A
participant 服务器 as B
participant 后台端用户 as C
note over A:点击【预约提取】\n填写地址并提交订单
A->B:提交提取预约
note over B:状态【6】
B->A:手机端获取订单状态\n（手机提交订单后，加载订单列表）
note over A:状态【6】--【已下提取单】\n页面无按钮
B->C:后台端获取订单状态\n（手机端提交订单后，加载订单列表） 
note over C:状态【6】--【待发重箱】\n页面按钮【发送重箱】
C->B:后台端点击【发送重箱】按钮
note over B:状态【7】
B->C:后台端获取订单状态\n（后台端发送重箱后，加载订单列表） 
note over C:状态【7】--【已发重箱】\n页面无按钮
B->A:手机端获取订单状态\n（后台端发送重箱后，加载订单列表）
note over A:状态【7】--【待收重箱】\n页面按钮【收取重箱】
A->B:手机端点击【收取重箱】按钮
note over B:状态【8】
B->A:手机端获取订单状态\n（手机端收取重箱后，加载订单列表）
note over A:状态【8】--【已收重箱】\n页面按钮【发送空箱】
B->C:后台端获取订单状态\n（手机端发送空箱后，加载订单列表） 
note over C:状态【8】--【送达重箱】\n页面无按钮
A->B:手机端点击【发送空箱】按钮
note over B:状态【9】
B->A:手机端获取订单状态\n（手机端发送空箱后，加载订单列表）
note over A:状态【9】--【已发空箱】\n页面无按钮
B->C:后台端获取订单状态\n（手机端提交订单后，加载订单列表） 
note over C:状态【9】--【待收空箱】\n页面按钮【收取空箱】
C->B:后台端点击【收取空箱】按钮
note over B:状态【10】
B->C:后台端获取订单状态\n（后台端收取空箱后，加载订单列表） 
note over C:状态【10】--【已完成】\n页面无按钮
B->A:手机端获取订单状态\n（手机提交订单后，加载订单列表）
note over A:状态【10】--【已完成】\n页面按钮【删除订单】 
```

